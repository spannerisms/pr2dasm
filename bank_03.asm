
org $038000

#_038000: REP #$10

;===================================================================================================

ROUTINE_038002:
#_038002: SEC

#_038003: LDA.w $080C,X
#_038006: SBC.w $0560
#_038009: STA.w $0802,X
#_03800C: CLC

#_03800D: LDA.w $080E,X
#_038010: ADC.w $080A,X
#_038013: SEC
#_038014: SBC.w $0562
#_038017: STA.w $0804,X

#_03801A: LDA.w UNREACH_039E73,Y
#_03801D: ADC.w $080C,X
#_038020: STA.b $38

#_038022: ADC.w UNREACH_039E77,Y
#_038025: STA.b $3A

#_038027: LDA.w UNREACH_039E75,Y
#_03802A: ADC.w $080E,X
#_03802D: ADC.w $080A,X
#_038030: STA.b $3C

#_038032: ADC.w UNREACH_039E79,Y
#_038035: STA.b $3E

#_038037: RTS

;===================================================================================================

ROUTINE_038038:
#_038038: LDA.l $7E7A48
#_03803C: BEQ CODE_03804A

#_03803E: CMP.w #$7FFF
#_038041: BEQ CODE_038059

#_038043: LDA.w #$0000
#_038046: STA.l $7E7A48

CODE_03804A:
#_03804A: LDA.w $05CE
#_03804D: CMP.w #$0100
#_038050: BCC CODE_038057

#_038052: CMP.w #$013C
#_038055: BCC CODE_038059

CODE_038057:
#_038057: SEC
#_038058: RTS

CODE_038059:
#_038059: CLC
#_03805A: RTS

;===================================================================================================

ROUTINE_03805B:
#_03805B: LDA.w #$0001
#_03805E: STA.w $04C8

#_038061: RTS

;===================================================================================================

AreWeOnLevel1:
#_038062: LDA.w $18E4
#_038065: CMP.w #$0000

#_038068: RTS

;===================================================================================================

AreWeOnLevel9:
#_038069: LDY.w $18E4
#_03806C: CPY.w #$0010

#_03806F: RTS

;===================================================================================================

AreWeOnLevel5:
#_038070: LDY.w $18E4
#_038073: CPY.w #$0008

#_038076: RTS

;===================================================================================================

ROUTINE_038077:
#_038077: STZ.w $18E2

#_03807A: LDA.w #$FFFF
#_03807D: STA.w $05A4

#_038080: RTS

;===================================================================================================

ROUTINE_038081:
#_038081: LDA.w #$1000
#_038084: STA.w $0812,X

#_038087: RTS

;===================================================================================================

ROUTINE_038088:
#_038088: LDA.l $7FE816,X
#_03808C: AND.w #$00FF

#_03808F: RTS

;===================================================================================================

ROUTINE_038090:
#_038090: LDA.l $7FE817,X
#_038094: AND.w #$00FF

#_038097: RTS

;===================================================================================================

ROUTINE_038098:
#_038098: LDA.w #$0062
#_03809B: STA.l $7FE816,X

#_03809F: RTS

;===================================================================================================

ROUTINE_0380A0:
#_0380A0: CLC

#_0380A1: LDA.w $0816,X
#_0380A4: ADC.w $0818,X
#_0380A7: STA.w $0816,X

#_0380AA: CLC
#_0380AB: ADC.w $080A,X
#_0380AE: STA.w $080A,X

#_0380B1: RTS

;===================================================================================================

ROUTINE_0380B2:
#_0380B2: STA.w $0810,X

#_0380B5: LDA.w #$006A
#_0380B8: STA.w $04A2

#_0380BB: STZ.w $05A2
#_0380BE: STZ.w $05A4

#_0380C1: RTS

;===================================================================================================

Set_18E2_to_FFFF:
#_0380C2: LDA.w #$FFFF
#_0380C5: STA.w $18E2

#_0380C8: RTS

;===================================================================================================

ROUTINE_0380C9:
#_0380C9: LDA.l $7E7B14
#_0380CD: STA.l $7E7A46

#_0380D1: LDA.w #$0000
#_0380D4: STA.l $7E7B14

#_0380D8: RTS

;===================================================================================================

ROUTINE_0380D9:
#_0380D9: ADC.w $0564
#_0380DC: ASL A
#_0380DD: SEP #$20
#_0380DF: XBA
#_0380E0: REP #$20
#_0380E2: AND.w #$003F
#_0380E5: ASL A
#_0380E6: TAX
#_0380E7: TYA
#_0380E8: ADC.w $0566
#_0380EB: ASL A
#_0380EC: SEP #$20
#_0380EE: XBA
#_0380EF: REP #$20
#_0380F1: AND.w #$003F
#_0380F4: ASL A
#_0380F5: TAY

#_0380F6: LDA.w UNREACH_038F6B,X
#_0380F9: ADC.w UNREACH_038FEB,Y
#_0380FC: TAY
#_0380FD: RTS

;===================================================================================================

QueuePockyPoseTransfer_30_30:
#_0380FE: LDA.w #$3000
#_038101: STA.b $38

#_038103: LDA.w #$3000
#_038106: STA.b $3C

;===================================================================================================

QueuePockyPoseTransfer:
#_038108: LDA.w #$0001
#_03810B: STA.l $7E7A28

#_03810F: LDA.w #$8800
#_038112: STA.b $3A

#_038114: LDA.w #$007E
#_038117: STA.b $3E

#_038119: JSL ROUTINE_00DB57_long

#_03811D: RTS

;===================================================================================================

QueuePockyPoseTransfer_34_38:
#_03811E: LDA.w #$3400
#_038121: STA.b $38

#_038123: LDA.w #$3800
#_038126: STA.b $3C

#_038128: BRA QueuePockyPoseTransfer

;===================================================================================================

QueuePockyPoseTransfer_38_40:
#_03812A: LDA.w #$3800
#_03812D: STA.b $38

#_03812F: LDA.w #$4000
#_038132: STA.b $3C

#_038134: BRA QueuePockyPoseTransfer

;===================================================================================================

QueuePockyPoseTransfer_3C_48:
#_038136: LDA.w #$3C00
#_038139: STA.b $38

#_03813B: LDA.w #$4800
#_03813E: STA.b $3C
#_038140: BRA QueuePockyPoseTransfer

;===================================================================================================

QueuePockyPoseTransfer_40_50:
#_038142: LDA.w #$4000
#_038145: STA.b $38

#_038147: LDA.w #$5000
#_03814A: STA.b $3C

QueuePockyPoseTransfer_bounce:
#_03814C: JMP QueuePockyPoseTransfer

;===================================================================================================

QueuePockyPoseTransfer_44_58:
#_03814F: LDA.w #$4400
#_038152: STA.b $38

#_038154: LDA.w #$5800
#_038157: STA.b $3C

#_038159: BRA QueuePockyPoseTransfer_bounce

;===================================================================================================

QueuePockyPoseTransfer_48_60:
#_03815B: LDA.w #$4800
#_03815E: STA.b $38

#_038160: LDA.w #$6000
#_038163: STA.b $3C

#_038165: BRA QueuePockyPoseTransfer_bounce

;===================================================================================================

QueuePockyPoseTransfer_4C_68:
#_038167: LDA.w #$4C00
#_03816A: STA.b $38

#_03816C: LDA.w #$6800
#_03816F: STA.b $3C

#_038171: BRA QueuePockyPoseTransfer_bounce

;===================================================================================================

ROUTINE_038173:
#_038173: LDA.w #$FE00
#_038176: STA.w $0800,X

;===================================================================================================

ROUTINE_038179:
#_038179: LDA.w #$FFFF
#_03817C: STA.w $0812,X
#_03817F: RTS

;===================================================================================================

ROUTINE_038180:
#_038180: LDA.w #$0001
#_038183: STA.w $0812,X
#_038186: RTS

;===================================================================================================

ROUTINE_038187:
#_038187: LDA.w $04D0
#_03818A: BEQ .exit

#_03818C: LDA.w #$FFFF
#_03818F: STA.l $7E7A48

.exit
#_038193: RTS

;===================================================================================================

ROUTINE_038194:
#_038194: CLC
#_038195: LDA.l $7FE818,X
#_038199: ADC.w $080C,X
#_03819C: STA.w $080C,X

#_03819F: CLC
#_0381A0: LDA.l $7FE81A,X
#_0381A4: ADC.w $080E,X
#_0381A7: STA.w $080E,X

#_0381AA: RTS

;===================================================================================================

ROUTINE_0381AB:
#_0381AB: LDA.w $19CE
#_0381AE: CMP.w #$0080
#_0381B1: BCC .below_128

#_0381B3: CMP.w #$008C
#_0381B6: BCC .exit

.below_128
#_0381B8: LDA.w #$00FD
#_0381BB: STA.w $04A0

.exit
#_0381BE: RTS

;===================================================================================================

ROUTINE_0381BF:
#_0381BF: LDA.w #$0300
#_0381C2: STA.b $20

#_0381C4: LDA.w $080A,X
#_0381C7: JSR ROUTINE_03A07D

#_0381CA: LDA.b $20
#_0381CC: STA.l $7FE818,X

#_0381D0: LDA.b $22
#_0381D2: STA.l $7FE81A,X

#_0381D6: RTS

;===================================================================================================

ROUTINE_0381D7:
#_0381D7: STZ.w $0816,X

#_0381DA: LDA.l $7FE81C,X
#_0381DE: INC A
#_0381DF: INC A
#_0381E0: STA.l $7FE81C,X

#_0381E4: RTS

;===================================================================================================

ROUTINE_0381E5:
#_0381E5: LDA.w $080C,X
#_0381E8: STA.l $7E7A4A

#_0381EC: LDA.w $080E,X
#_0381EF: ADC.w #$0200
#_0381F2: STA.l $7E7A4C

#_0381F6: LDA.w $19CE
#_0381F9: CMP.w #$00B8
#_0381FC: BEQ CODE_03821E

#_0381FE: CMP.w #$0028
#_038201: BEQ CODE_038220

#_038203: CMP.w #$002A
#_038206: BEQ CODE_038220

#_038208: CMP.w #$000E
#_03820B: BCS CODE_038220

#_03820D: STA.l $7E7A50

#_038211: LDA.w #$00B8
#_038214: STA.w $19CE

#_038217: LDA.w #$0000
#_03821A: STA.l $7E7A52

CODE_03821E:
#_03821E: CLC
#_03821F: RTS

CODE_038220:
#_038220: SEC
#_038221: RTS

CODE_038222:
#_038222: LDA.w #$0000
#_038225: STA.l $7FE81E,X

#_038229: LDA.w $080A,X
#_03822C: STA.l $7FE81C,X

#_038230: STZ.w $080A,X

#_038233: JMP ROUTINE_0386EC

;===================================================================================================

ROUTINE_038236:
#_038236: LDA.l $7FE81C,X
#_03823A: TAY

#_03823B: LDA.w $081E,Y
#_03823E: DEC A
#_03823F: STA.w $081E,Y

;===================================================================================================

ROUTINE_038242:
#_038242: LDA.l $7FE81C,X
#_038246: TAY

#_038247: LDA.w $0816,Y
#_03824A: DEC A
#_03824B: STA.w $0816,Y
#_03824E: BNE CODE_03825C

#_038250: LDA.w $080C,X
#_038253: STA.w $080C,Y

#_038256: LDA.w $080E,X
#_038259: STA.w $080E,Y

CODE_03825C:
#_03825C: JSR ROUTINE_038C85

#_03825F: LDA.w #$0000

#_038262: RTS

;===================================================================================================

ROUTINE_038263:
#_038263: STY.b $30
#_038265: STA.b $26

#_038267: LDA.w $080C,X
#_03826A: STA.b $20

#_03826C: LDA.w $080E,X
#_03826F: STA.b $22

#_038271: LDA.w #$000E
#_038274: STA.b $24

#_038276: JMP PrepEnemySpawn

;===================================================================================================

ROUTINE_038279:
#_038279: LDA.l $7E7A64
#_03827D: DEC A
#_03827E: STA.l $7E7A64
#_038282: BNE FailedToAskForSong

#_038284: LDA.w #$001F
#_038287: BRA AskNicelyForSong

;===================================================================================================

ROUTINE_038289:
#_038289: LDA.w #$0000
#_03828C: STA.l $7E258C

#_038290: LDA.w #$0022
#_038293: BRA AskNicelyForSong

;===================================================================================================

AskNicelyForSong_1D:
#_038295: LDA.w #$001D
#_038298: BRA AskNicelyForSong

;===================================================================================================

#AskNicelyForSong_1C:
#_03829A: LDA.w #$001C

;===================================================================================================

AskNicelyForSong:
#_03829D: PHX
#_03829E: JSL RequestSong
#_0382A2: PLX

#_0382A3: SEC

#_0382A4: RTS

;===================================================================================================

FailedToAskForSong:
#_0382A5: CLC

#_0382A6: RTS

;===================================================================================================

ROUTINE_0382A7:
#_0382A7: JSR ROUTINE_0382B2

#_0382AA: LDA.w #$00F4
#_0382AD: JSL ROUTINE_0396E3

#_0382B1: RTS

;===================================================================================================

ROUTINE_0382B2:
#_0382B2: LDA.w $080C,X
#_0382B5: STA.b $20

#_0382B7: CLC
#_0382B8: LDA.w $080E,X
#_0382BB: ADC.w #$0280
#_0382BE: STA.b $22

#_0382C0: STZ.b $30

#_0382C2: RTS

;===================================================================================================

ROUTINE_0382C3:
#_0382C3: CLC
#_0382C4: LDA.w $0560
#_0382C7: ADC.w #$0800
#_0382CA: STA.b $20

#_0382CC: CLC
#_0382CD: LDA.w $0562
#_0382D0: ADC.w #$0600
#_0382D3: STA.b $22

#_0382D5: RTS

;===================================================================================================

ROUTINE_0382D6:
#_0382D6: STZ.w $084E,X

#_0382D9: INC.w $084C,X
#_0382DC: INC.w $084C,X

#_0382DF: RTS

;===================================================================================================

ROUTINE_0382E0:
#_0382E0: STZ.w $084E,X
#_0382E3: STZ.w $083C,X

#_0382E6: RTS

;===================================================================================================

ROUTINE_0382E7:
#_0382E7: JMP ROUTINE_038301

;===================================================================================================

ROUTINE_0382EA:
#_0382EA: JSR ROUTINE_038312
#_0382ED: JMP ROUTINE_038301

;===================================================================================================

ROUTINE_0382F8_0080:
#_0382F0: LDA.w #$0080

#_0382F3: BRA ROUTINE_0382F8

;===================================================================================================

ROUTINE_0382F8_0040:
#_0382F5: LDA.w #$0040

;===================================================================================================

ROUTINE_0382F8:
#_0382F8: JSR ROUTINE_03830B
#_0382FB: BCS .exit

#_0382FD: JMP ROUTINE_038301

.exit
#_038300: RTS

;===================================================================================================

ROUTINE_038301:
#_038301: STZ.w $083C,X

#_038304: INC.w $084E,X
#_038307: INC.w $084E,X

#_03830A: RTS

;===================================================================================================

ROUTINE_03830B:
#_03830B: INC.w $083C,X

#_03830E: CMP.w $083C,X

#_038311: RTS

;===================================================================================================

ROUTINE_038312:
#_038312: LDA.w #$81B6
#_038315: JSR Reset_0816_AndSetAIMode

#_038318: INC.w $083E,X

#_03831B: RTS

;===================================================================================================

ROUTINE_03831C:
#_03831C: LDA.w #$1400
#_03831F: LDY.w #$1C00
#_038322: STA.b $24
#_038324: STY.b $26

#_038326: LDA.w $0832,X
#_038329: BPL CODE_03833D

#_03832B: LDA.w $080C,X
#_03832E: ADC.w #$1000
#_038331: SBC.w $0560
#_038334: CMP.b $24
#_038336: BCS .exit

#_038338: STZ.w $0832,X
#_03833B: BRA .exit

CODE_03833D:
#_03833D: LDA.w $080C,X
#_038340: ADC.w #$1000
#_038343: SBC.w $0560
#_038346: CMP.b $26
#_038348: BCC .exit

#_03834A: LDA.w #$FFFF
#_03834D: STA.w $0832,X

.exit
#_038350: RTS

;===================================================================================================

ROUTINE_038351:
#_038351: LDA.w #$0020
#_038354: STA.b $24

#_038356: LDA.w $0834,X
#_038359: BPL CODE_03837A

#_03835B: LDA.w $080E,X
#_03835E: ADC.w #$1000
#_038361: SBC.w $0562
#_038364: CMP.b $20
#_038366: BCS .exit

#_038368: INC.w $084A,X

#_03836B: LDA.w $084A,X
#_03836E: CMP.b $24
#_038370: BCC .exit

#_038372: STZ.w $084A,X
#_038375: STZ.w $0834,X
#_038378: BRA .exit

CODE_03837A:
#_03837A: LDA.w $080E,X
#_03837D: ADC.w #$1000
#_038380: SBC.w $0562
#_038383: CMP.b $22
#_038385: BCC .exit

#_038387: INC.w $084A,X

#_03838A: LDA.w $084A,X
#_03838D: CMP.b $24
#_03838F: BCC .exit

#_038391: STZ.w $084A,X

#_038394: LDA.w #$FFFF
#_038397: STA.w $0834,X

.exit
#_03839A: RTS

;===================================================================================================

ROUTINE_03839B:
#_03839B: JSR ROUTINE_0392B7
#_03839E: JSR .randomize_offsets

#_0383A1: LDA.w #$001F
#_0383A4: AND.w $05A0
#_0383A7: BNE .exit

#_0383A9: LDA.w #$8032
#_0383AC: STA.b $26

#_0383AE: LDA.b $20
#_0383B0: ADC.w $080C,X
#_0383B3: STA.b $20

#_0383B5: LDA.b $22
#_0383B7: ADC.w $080E,X
#_0383BA: STA.b $22

#_0383BC: JSR ROUTINE_0396D3

.exit
#_0383BF: RTS

;---------------------------------------------------------------------------------------------------

.randomize_offsets
#_0383C0: JSR Random
#_0383C3: AND.w #$01FF
#_0383C6: SBC.w #$00FF
#_0383C9: STA.b $20

#_0383CB: JSR Random
#_0383CE: AND.w #$01FF
#_0383D1: SBC.w #$00FF
#_0383D4: STA.b $22

#_0383D6: RTS

;===================================================================================================

ROUTINE_0383D7:
#_0383D7: JSR ROUTINE_0392B7

#_0383DA: LDA.w $05A0
#_0383DD: AND.w #$0003
#_0383E0: BNE .exit

#_0383E2: LDA.w #$0054
#_0383E5: STA.w $04A6

#_0383E8: JSR Random
#_0383EB: AND.w #$03F0
#_0383EE: SBC.w #$0200
#_0383F1: ADC.w $080C,X
#_0383F4: STA.b $20

#_0383F6: JSR Random
#_0383F9: AND.w #$03F0
#_0383FC: SBC.w #$0100
#_0383FF: ADC.w $080E,X
#_038402: STA.b $22

#_038404: LDA.w $080A,X
#_038407: STA.b $30

#_038409: LDA.w #$0020
#_03840C: STA.b $26

#_03840E: LDA.w #$000C
#_038411: STA.b $24

#_038413: JSR PrepEnemySpawn

.exit
#_038416: RTS

;===================================================================================================

ROUTINE_038417:
#_038417: LDA.w #$0020
#_03841A: JSR ROUTINE_0392EE
#_03841D: BEQ CODE_038426

#_03841F: JSR ROUTINE_039385
#_038422: BNE CODE_038426

#_038424: SEC
#_038425: RTS

CODE_038426:
#_038426: CLC
#_038427: RTS

;===================================================================================================

ROUTINE_038428:
#_038428: LDA.w #$0020

#_03842B: PHY
#_03842C: PHA

#_03842D: JSR ROUTINE_039664

#_038430: LDA.b $22
#_038432: BNE CODE_03843F

#_038434: PLA
#_038435: PLY
#_038436: JSR ROUTINE_039C2D

#_038439: LDA.b $22
#_03843B: BNE CODE_038441

#_03843D: CLC
#_03843E: RTS

CODE_03843F:
#_03843F: PLA
#_038440: PLY

CODE_038441:
#_038441: SEC
#_038442: RTS

;===================================================================================================

Increment_0816_AndCompareTo_003C:
#_038443: LDA.w #$003C
#_038446: BRA Increment_0816_AndCompareTo

;===================================================================================================

Increment_0816_AndCompareTo_0078:
#_038448: LDA.w #$0078
#_03844B: BRA Increment_0816_AndCompareTo

;===================================================================================================

Increment_0816_AndCompareTo_00B4:
#_03844D: LDA.w #$00B4
#_038450: BRA Increment_0816_AndCompareTo

;===================================================================================================

Increment_0816_AndCompareTo_000C:
#_038452: LDA.w #$000C

;===================================================================================================

Increment_0816_AndCompareTo:
#_038455: STA.b $20

#_038457: INC.w $0816,X

#_03845A: LDA.w $0816,X
#_03845D: CMP.b $20

#_03845F: RTS

;===================================================================================================

ROUTINE_038460:
#_038460: LDA.l $7FE816,X
#_038464: BMI CODE_03846F

#_038466: LDA.l $7FE818,X
#_03846A: INC A
#_03846B: STA.l $7FE818,X

CODE_03846F:
#_03846F: CLC

#_038470: LDA.l $7FE816,X
#_038474: ADC.l $7FE818,X
#_038478: STA.l $7FE816,X
#_03847C: RTS

;===================================================================================================

ROUTINE_03847D:
#_03847D: STY.b $34
#_03847F: STA.b $36
#_038481: EOR.w #$FFFF
#_038484: INC A
#_038485: STA.b $38

#_038487: LDA.b $28
#_038489: ASL A

#_03848A: LDA.b $38
#_03848C: BCC CODE_038490

#_03848E: LDA.b $36

CODE_038490:
#_038490: CLC
#_038491: ADC.l $7FE81C,X

#_038495: LDY.b $34
#_038497: JSR ROUTINE_0384BA
#_03849A: STA.l $7FE81C,X
#_03849E: STA.b $20

#_0384A0: LDA.b $2A
#_0384A2: ASL A

#_0384A3: LDA.b $38
#_0384A5: BCC CODE_0384A9

#_0384A7: LDA.b $36

CODE_0384A9:
#_0384A9: CLC
#_0384AA: ADC.l $7FE81E,X

#_0384AE: LDY.b $34
#_0384B0: JSR ROUTINE_0384BA
#_0384B3: STA.l $7FE81E,X
#_0384B7: STA.b $22
#_0384B9: RTS

;===================================================================================================

ROUTINE_0384BA:
#_0384BA: STY.b $24

#_0384BC: TAY
#_0384BD: BPL CODE_0384C3

#_0384BF: EOR.w #$FFFF
#_0384C2: INC A

CODE_0384C3:
#_0384C3: CMP.b $24
#_0384C5: BCC CODE_0384D3

#_0384C7: TYA
#_0384C8: ASL A

#_0384C9: LDY.b $24
#_0384CB: BCC CODE_0384D3

#_0384CD: TYA
#_0384CE: EOR.w #$FFFF
#_0384D1: INC A

#_0384D2: RTS

CODE_0384D3:
#_0384D3: TYA

#_0384D4: RTS

;===================================================================================================

ROUTINE_0384D5:
#_0384D5: STA.b $20

#_0384D7: LDA.l $7FE81A,X
#_0384DB: JSR ROUTINE_03A07D

#_0384DE: LDA.w #$1100
#_0384E1: STA.b $3C

#_0384E3: LDA.w #$1F00
#_0384E6: STA.b $3E
#_0384E8: JSR AreWeOnLevel1
#_0384EB: BNE CODE_0384F7

#_0384ED: LDA.w #$1200
#_0384F0: STA.b $3C

#_0384F2: LDA.w #$1D00
#_0384F5: STA.b $3E

CODE_0384F7:
#_0384F7: CLC

#_0384F8: LDA.b $20
#_0384FA: ADC.w $080C,X
#_0384FD: STA.w $080C,X
#_038500: SEC
#_038501: SBC.w $0560
#_038504: CLC
#_038505: ADC.w #$1000
#_038508: CMP.b $3C
#_03850A: BCS CODE_038510

#_03850C: LDA.b $3C
#_03850E: BRA CODE_038516

CODE_038510:
#_038510: CMP.b $3E
#_038512: BCC CODE_038516

#_038514: LDA.b $3E

CODE_038516:
#_038516: SEC
#_038517: SBC.w #$1000
#_03851A: CLC
#_03851B: ADC.w $0560
#_03851E: STA.w $080C,X
#_038521: CLC

#_038522: LDA.b $22
#_038524: ADC.w $080E,X
#_038527: STA.w $080E,X
#_03852A: SEC
#_03852B: SBC.w $0562
#_03852E: CLC
#_03852F: ADC.w #$1000
#_038532: CMP.w #$1300
#_038535: BCS CODE_03853C

#_038537: LDA.w #$1300
#_03853A: BRA CODE_038544

CODE_03853C:
#_03853C: CMP.w #$1C00
#_03853F: BCC CODE_038544

#_038541: LDA.w #$1C00

CODE_038544:
#_038544: SEC
#_038545: SBC.w #$1000
#_038548: CLC
#_038549: ADC.w $0562
#_03854C: STA.w $080E,X
#_03854F: RTS

;===================================================================================================

ROUTINE_038550:
#_038550: LDA.w #$000D
#_038553: STA.l $7E7A08

#_038557: RTS

;===================================================================================================

SetSpriteMode_FF01:
#_038558: LDA.w #$FF01
#_03855B: STA.w $0800,X

#_03855E: RTS

;===================================================================================================

NegateIfCarryClear:
#_03855F: BCS .exit

#_038561: EOR.w #$FFFF
#_038564: INC A

.exit
#_038565: RTS

;===================================================================================================

ROUTINE_038566:
#_038566: TYX

;===================================================================================================

ROUTINE_038567:
#_038567: LDA.w $0500
#_03856A: CMP.w #$003F
#_03856D: BNE .exit

#_03856F: LDA.l $7E2530

.exit
#_038573: RTS

;===================================================================================================

ROUTINE_038574:
#_038574: PHX
#_038575: JSL HandleDialog
#_038579: PLX

#_03857A: LDA.l $7E2550
#_03857E: RTS

;===================================================================================================

ROUTINE_03857F:
#_03857F: PHX

#_038580: LDX.w #$0008
#_038583: JSL SetMessagePointer

#_038587: PLX
#_038588: RTS

;===================================================================================================

ROUTINE_038589:
#_038589: PHX
#_03858A: PHA

#_03858B: LDA.w #$0008
#_03858E: STA.l $7E7B18
#_038592: TAX
#_038593: PLA
#_038594: STA.l $7E7B16
#_038598: JSL BeginDialog
#_03859C: PLX
#_03859D: RTS

;===================================================================================================

ROUTINE_03859E:
#_03859E: PHX
#_03859F: PHA

#_0385A0: LDX.w #$0008
#_0385A3: JSL BeginDialog
#_0385A7: PLA

#_0385A8: LDX.w #$0008
#_0385AB: JSL SetMessagePointer
#_0385AF: PLX
#_0385B0: RTS

;===================================================================================================

Reset_0816_AndSetAIMode:
#_0385B1: STA.w $0810,X
#_0385B4: STZ.w $0816,X

#_0385B7: RTS

;===================================================================================================

Reset_0816_AndAdvanceAI_bank:
#_0385B8: STZ.w $0816,X

#_0385BB: JMP AdvanceAIModeUp

;===================================================================================================

Reset_0816_AndDecrementAI_bank:
#_0385BE: STZ.w $0816,X
#_0385C1: JMP AdvanceAIModeDown

;===================================================================================================

Reset_0816_through_081F:
#_0385C4: STZ.w $0816,X
#_0385C7: JMP Reset_0818_through_081F

;===================================================================================================

ROUTINE_0385CA:
#_0385CA: LDA.w $05A0
#_0385CD: AND.w #$000F

#_0385D0: RTS

;===================================================================================================

ROUTINE_0385D1:
#_0385D1: LDA.w $04D4
#_0385D4: BNE .exit

#_0385D6: JSR ROUTINE_038567
#_0385D9: BNE .exit

#_0385DB: LDA.w $19CE
#_0385DE: CMP.w #$001A
#_0385E1: BEQ .exit

#_0385E3: CMP.w #$0028
#_0385E6: BEQ .exit

#_0385E8: CMP.w #$002A
#_0385EB: BEQ .exit

#_0385ED: CMP.w #$0056
#_0385F0: BEQ .exit

#_0385F2: CMP.w #$0080
#_0385F5: BCC CODE_038601

#_0385F7: CMP.w #$008C
#_0385FA: BCC .exit

#_0385FC: CMP.w #$00BA
#_0385FF: BCS .exit

CODE_038601:
#_038601: LDA.w #$0078
#_038604: STA.l $7E7A64
#_038608: JSR ROUTINE_0381AB

#_03860B: LDA.w #$0086
#_03860E: STA.w $0500
#_038611: STA.l $7E7B1E

.exit
#_038615: RTS

;===================================================================================================

Set_0814_to_FFFF:
#_038616: LDA.w #$FFFF
#_038619: STA.w $0814,X

#_03861C: RTS

;===================================================================================================

ROUTINE_03861D:
#_03861D: LDA.w $1714
#_038620: STA.w $0814,X

#_038623: RTS

;===================================================================================================

ROUTINE_038624:
#_038624: LDA.w $170A
#_038627: STA.w $080A,X

#_03862A: RTS

;===================================================================================================

Compare_081C_to_FFFF:
#_03862B: LDA.w $081C,X
#_03862E: CMP.w #$FFFF

#_038631: RTS

;===================================================================================================

ROUTINE_038632:
#_038632: LDA.l $7E7A28
#_038636: BEQ CODE_03863A

#_038638: SEC
#_038639: RTS

CODE_03863A:
#_03863A: LDA.w $199E
#_03863D: CMP.w #$004E
#_038640: RTS

;===================================================================================================

ROUTINE_038641:
#_038641: LDA.w $0802,Y
#_038644: STA.b $20

#_038646: LDA.w $0804,Y
#_038649: STA.b $22
#_03864B: JSL ROUTINE_05D57A_long
#_03864F: RTS

;===================================================================================================

ROUTINE_038650:
#_038650: LDA.w #$8134
#_038653: STA.b $26
#_038655: JSR CacheMyCoordinatesIn20
#_038658: JMP ROUTINE_0396D3

;===================================================================================================

CacheMyCoordinatesIn24:
#_03865B: LDA.w $080C,X
#_03865E: STA.b $24

#_038660: LDA.w $080E,X
#_038663: STA.b $26
#_038665: RTS

;===================================================================================================

CacheMyCoordinatesIn20:
#_038666: LDA.w $080C,X
#_038669: STA.b $20

#_03866B: LDA.w $080E,X
#_03866E: STA.b $22

#_038670: RTS

;===================================================================================================

ROUTINE_038671:
#_038671: LDA.w $19EE
#_038674: STA.b $20

#_038676: LDA.w $19F0
#_038679: STA.b $22

#_03867B: RTS

;===================================================================================================

ROUTINE_03867C:
#_03867C: LDA.w $19EE
#_03867F: STA.b $20

#_038681: LDA.w $19F0
#_038684: STA.b $22

;===================================================================================================

ROUTINE_038686:
#_038686: LDA.w $080C,X
#_038689: SBC.b $20
#_03868B: STA.b $28
#_03868D: BPL CODE_038693

#_03868F: EOR.w #$FFFF
#_038692: INC A

CODE_038693:
#_038693: STA.b $24

#_038695: LDA.w $080E,X
#_038698: SBC.b $22
#_03869A: STA.b $2A
#_03869C: BPL CODE_0386A2

#_03869E: EOR.w #$FFFF
#_0386A1: INC A

CODE_0386A2:
#_0386A2: STA.b $26
#_0386A4: ADC.b $24
#_0386A6: ROR A
#_0386A7: RTS

ROUTINE_0386A8:
#_0386A8: LDA.w #$3000
#_0386AB: STA.b $24
#_0386AD: CLC

#_0386AE: LDA.w $080E,X
#_0386B1: ADC.w $080A,X
#_0386B4: SEC
#_0386B5: SBC.w $0562
#_0386B8: STA.b $22
#_0386BA: SEC

#_0386BB: LDA.w $080C,X
#_0386BE: SBC.w $0560
#_0386C1: STA.b $20

#_0386C3: LDA.w $0806,X
#_0386C6: JSL ROUTINE_028220
#_0386CA: RTS

;===================================================================================================

ROUTINE_0386CB:
#_0386CB: LDA.w #$0001
#_0386CE: STA.w $0812,X
#_0386D1: STZ.w $081C,X

#_0386D4: LDA.w #$0000
#_0386D7: STA.l $7FE81E,X
#_0386DB: STA.l $7FE81C,X

#_0386DF: LDA.w $080A,X
#_0386E2: STA.w $0816,X
#_0386E5: JSR ROUTINE_0386EC
#_0386E8: STZ.w $080A,X
#_0386EB: RTS

;===================================================================================================

ROUTINE_0386EC:
#_0386EC: PHX
#_0386ED: TAX

#_0386EE: LDA.l $7FE802,X
#_0386F2: TAY

#_0386F3: LDA.l $7FE804,X
#_0386F7: PLX
#_0386F8: STA.l $7FE804,X

#_0386FC: TYA
#_0386FD: STA.l $7FE802,X

#_038701: RTS

;===================================================================================================

ROUTINE_038702:
#_038702: PHX
#_038703: PHY
#_038704: PHA

#_038705: TYX
#_038706: JSL BeginDialog

#_03870A: PLA
#_03870B: PLX

#_03870C: JSL SetMessagePointer

#_038710: PLX

#_038711: LDA.w #$FFFE
#_038714: STA.l $7E7B38

#_038718: RTS

;===================================================================================================

ROUTINE_038719:
#_038719: LDA.w #$002E
#_03871C: STA.l $7E7B38

#_038720: RTS

;===================================================================================================

ROUTINE_038721:
#_038721: LDA.w #$0016
#_038724: STA.l $7E7B38

#_038728: RTS

;===================================================================================================

ROUTINE_038729:
#_038729: PHX
#_03872A: JSL HandleDialog
#_03872E: PLX

#_03872F: LDA.l $7E2550

#_038733: RTS

;===================================================================================================

ROUTINE_038741_002E:
#_038734: LDA.w #$002E
#_038737: BRA ROUTINE_038741

;===================================================================================================

ROUTINE_038741_0014:
#_038739: LDA.w #$0014
#_03873C: BRA ROUTINE_038741

;===================================================================================================

ROUTINE_038741_0044:
#_03873E: LDA.w #$0044

ROUTINE_038741:
#_038741: STA.b $20
#_038743: PHX

#_038744: LDA.w $05A0
#_038747: ROR A
#_038748: BCC CODE_03875E

#_03874A: LDA.l $7E7B38
#_03874E: CMP.b $20
#_038750: BEQ CODE_038763

#_038752: JSR ROUTINE_038797

#_038755: LDA.l UNREACH_04FC8B,X
#_038759: TAX
#_03875A: JSL ROUTINE_05D57A_long

CODE_03875E:
#_03875E: LDA.w #$0000
#_038761: BRA .exit

CODE_038763:
#_038763: LDA.w #$FFFE
#_038766: STA.l $7E7B38

.exit
#_03876A: PLX
#_03876B: RTS

;===================================================================================================

ROUTINE_03876C:
#_03876C: STA.b $20
#_03876E: PHX

#_03876F: LDA.w $05A0
#_038772: ROR A
#_038773: BCC CODE_038789

#_038775: LDA.l $7E7B38
#_038779: CMP.b $20
#_03877B: BEQ CODE_03878E

#_03877D: JSR ROUTINE_038797

#_038780: LDA.l UNREACH_04FCD1,X
#_038784: TAX
#_038785: JSL ROUTINE_05D57A_long

CODE_038789:
#_038789: LDA.w #$0000
#_03878C: BRA .exit

CODE_03878E:
#_03878E: LDA.w #$FFFE
#_038791: STA.l $7E7B38

.exit
#_038795: PLX
#_038796: RTS

;===================================================================================================

ROUTINE_038797:
#_038797: CLC
#_038798: ADC.w #$0002
#_03879B: STA.l $7E7B38
#_03879F: TAX

#_0387A0: LDA.l $7E257C
#_0387A4: STA.b $20

#_0387A6: LDA.l $7E257E
#_0387AA: STA.b $22
#_0387AC: RTS

;===================================================================================================

ROUTINE_0387AD:
#_0387AD: TXY
#_0387AE: JSR CacheMyCoordinatesIn20

#_0387B1: LDA.l $7FE816,X
#_0387B5: AND.w #$000F
#_0387B8: ASL A
#_0387B9: TAX
#_0387BA: CPX.w #$0012
#_0387BD: BCC .no_overflow

#_0387BF: LDX.w #$000E

.no_overflow
#_0387C2: JMP (.vectors,X)

.vectors
#_0387C5: dw SpawnTreasure_RandomCoins
#_0387C7: dw SpawnTreasure_Key
#_0387C9: dw SpawnTreasure_10Coin
#_0387CB: dw SpawnTreasure_30Coin
#_0387CD: dw SpawnTreasure_Clothes
#_0387CF: dw SpawnTreasure_Charm
#_0387D1: dw SpawnTreasure_Ears
#_0387D3: dw SpawnTreasure_Power
#_0387D5: dw SpawnTreasure_FireBalls

;===================================================================================================

SpawnTreasure_RandomCoins:
#_0387D7: TYX

#_0387D8: LDY.w #$0004

.next_coin
#_0387DB: PHY
#_0387DC: DEY

#_0387DD: STY.b $2C
#_0387DF: STZ.b $28

#_0387E1: JSR Random
#_0387E4: AND.w #$0003
#_0387E7: TAY

#_0387E8: LDA.w .coins,Y
#_0387EB: AND.w #$00FF
#_0387EE: STA.b $26

#_0387F0: LDA.w #$000E
#_0387F3: STA.b $24

#_0387F5: JSR PrepEnemySpawn

#_0387F8: PLY
#_0387F9: DEY
#_0387FA: BNE .next_coin

#_0387FC: RTS

.coins
#_0387FD: db $66
#_0387FE: db $66
#_0387FF: db $6C
#_038800: db $6C

;===================================================================================================

SpawnTreasure_FireBalls:
#_038801: TYX

#_038802: LDA.w #$00C4
#_038805: BRA SetSpawnTreasure

;===================================================================================================

SpawnTreasure_Key:
#_038807: TYX

#_038808: LDA.w #$005C
#_03880B: BRA SetSpawnTreasure

;===================================================================================================

SpawnTreasure_10Coin:
#_03880D: TYX

#_03880E: LDA.w #$0062
#_038811: BRA SetSpawnTreasure

;===================================================================================================

SpawnTreasure_30Coin:
#_038813: TYX

#_038814: LDA.w #$0068
#_038817: BRA SetSpawnTreasure

;===================================================================================================

SpawnTreasure_Clothes:
#_038819: TYX

#_03881A: LDA.w #$006E
#_03881D: BRA SetSpawnTreasure

;===================================================================================================

SpawnTreasure_Charm:
#_03881F: TYX

#_038820: LDA.w #$0074
#_038823: BRA SetSpawnTreasure

;===================================================================================================

SpawnTreasure_Ears:
#_038825: TYX

#_038826: LDA.w #$007A
#_038829: BRA SetSpawnTreasure

;===================================================================================================

SpawnTreasure_Power:
#_03882B: TYX

#_03882C: LDA.w #$0018

;===================================================================================================

SetSpawnTreasure:
#_03882F: JMP PrepEnemySpawnMyCoordinates

;===================================================================================================

ROUTINE_03883A_long:
#_038832: PHB
#_038833: PHK
#_038834: PLB

#_038835: JSR ROUTINE_03883A

#_038838: PLB
#_038839: RTL

;===================================================================================================

ROUTINE_03883A:
#_03883A: JSR AreWeOnLevel1
#_03883D: BNE .exit

#_03883F: LDA.l $7E7A52
#_038843: BEQ .exit

#_038845: DEC A
#_038846: STA.l $7E7A52
#_03884A: BEQ .exit

CODE_03884C:
#_03884C: LDA.w #$0000
#_03884F: STA.l $7E7A6A

.exit
#_038853: RTS

;===================================================================================================

ROUTINE_038854:
#_038854: JSR AreWeOnLevel1
#_038857: BEQ CODE_03884C

#_038859: RTS

;===================================================================================================

ROUTINE_03885A:
#_03885A: LDA.w #$2000
#_03885D: STA.w $0808,X

ROUTINE_038860:
#_038860: SEC

#_038861: LDA.w $080C,X
#_038864: SBC.w $0560
#_038867: STA.w $0802,X
#_03886A: SEC

#_03886B: LDA.w $080E,X
#_03886E: SBC.w $0562
#_038871: STA.w $0804,X

ROUTINE_038874:
#_038874: CLC
#_038875: TXA
#_038876: ADC.w #$0800
#_038879: TAY

#_03887A: LDA.w $0804,X
#_03887D: JMP CODE_038DF6

ROUTINE_038880:
#_038880: LDA.w #$FE00

#_038883: LDY.w #$20B2
#_038886: JSR ROUTINE_038CAA
#_038889: JSR ROUTINE_0392C0

#_03888C: LDA.w $080A,X
#_03888F: BPL CODE_038896

#_038891: CMP.w #$FF00
#_038894: BCC CODE_03889F

CODE_038896:
#_038896: LDY.w #$0050

#_038899: LDA.w #$000E
#_03889C: JSR ROUTINE_039664

CODE_03889F:
#_03889F: JMP ROUTINE_038874

CODE_0388A2:
#_0388A2: LDA.w #$2000
#_0388A5: STA.w $0808,X
#_0388A8: BRA ROUTINE_038860

ROUTINE_0388AA:
#_0388AA: LDA.w #$3000
#_0388AD: STA.w $0808,X
#_0388B0: BRA ROUTINE_038860

ROUTINE_0388B2:
#_0388B2: LDA.w #$2000
#_0388B5: STA.w $0808,X

ROUTINE_0388B8:
#_0388B8: LDA.w $0814,X
#_0388BB: CMP.w #$0002
#_0388BE: BCS CODE_0388C5

#_0388C0: LDA.w #$0600
#_0388C3: BRA CODE_0388C8

CODE_0388C5:
#_0388C5: LDA.w #$0000

CODE_0388C8:
#_0388C8: ORA.w $0808,X
#_0388CB: STA.w $0808,X
#_0388CE: JSR ROUTINE_0392C0
#_0388D1: JMP ROUTINE_038874

;===================================================================================================

ROUTINE_0388D4:
#_0388D4: STZ.b $20

#_0388D6: LDA.w $0560
#_0388D9: SBC.w #$1000
#_0388DC: SBC.w $080C,X
#_0388DF: EOR.w #$FFFF
#_0388E2: INC A
#_0388E3: CMP.w #$1200
#_0388E6: BCC CODE_0388ED

#_0388E8: CMP.w #$2200
#_0388EB: BCC CODE_0388F2

CODE_0388ED:
#_0388ED: LDA.w #$0001
#_0388F0: TSB.b $20

CODE_0388F2:
#_0388F2: LDA.w $0562
#_0388F5: SBC.w #$1000
#_0388F8: SBC.w $080E,X
#_0388FB: EOR.w #$FFFF
#_0388FE: INC A
#_0388FF: CMP.w #$1200
#_038902: BCC CODE_038909

#_038904: CMP.w #$1C00
#_038907: BCC .exit

CODE_038909:
#_038909: LDA.w #$0002
#_03890C: TSB.b $20

.exit
#_03890E: RTS

;===================================================================================================

ROUTINE_03890F:
#_03890F: STZ.b $20

#_038911: LDA.w $0560
#_038914: SBC.w #$1000
#_038917: SBC.w $080C,X
#_03891A: EOR.w #$FFFF
#_03891D: INC A
#_03891E: CMP.w #$0E00
#_038921: BCC CODE_038928

#_038923: CMP.w #$2200
#_038926: BCC CODE_03892D

CODE_038928:
#_038928: LDA.w #$0001
#_03892B: TSB.b $20

CODE_03892D:
#_03892D: LDA.w $0562
#_038930: SBC.w #$1000
#_038933: SBC.w $080E,X
#_038936: EOR.w #$FFFF
#_038939: INC A
#_03893A: CMP.w #$0E00
#_03893D: BCC CODE_038944

#_03893F: CMP.w #$1D00
#_038942: BCC .exit

CODE_038944:
#_038944: LDA.w #$0002
#_038947: TSB.b $20

.exit
#_038949: RTS

;===================================================================================================

ROUTINE_03894A:
#_03894A: LDA.w $0560
#_03894D: SBC.w #$1000
#_038950: SBC.w $080C,X
#_038953: EOR.w #$FFFF
#_038956: INC A
#_038957: CMP.w #$0D80
#_03895A: BCC CODE_038978

#_03895C: CMP.w #$2280
#_03895F: BCS CODE_038978

#_038961: LDA.w $0562
#_038964: SBC.w #$1000
#_038967: SBC.w $080E,X
#_03896A: EOR.w #$FFFF
#_03896D: INC A
#_03896E: CMP.w #$0D80
#_038971: BCC CODE_038978

#_038973: CMP.w #$2080
#_038976: BCC CODE_03897F

CODE_038978:
#_038978: JSR ROUTINE_038C85

#_03897B: LDA.w #$0000
#_03897E: RTS

CODE_03897F:
#_03897F: LDA.w #$FFFF
#_038982: RTS

;===================================================================================================

ROUTINE_038983:
#_038983: STA.b $20

#_038985: LDA.w $0560
#_038988: SBC.w #$1000
#_03898B: SBC.w $080C,X
#_03898E: EOR.w #$FFFF
#_038991: INC A
#_038992: CMP.w #$0D80
#_038995: BCC CODE_0389B3

#_038997: CMP.w #$2280
#_03899A: BCS CODE_0389B3

#_03899C: LDA.w $0562
#_03899F: SBC.w #$1000
#_0389A2: SBC.w $080E,X
#_0389A5: EOR.w #$FFFF
#_0389A8: INC A
#_0389A9: CMP.w #$0D80
#_0389AC: BCC CODE_0389B3

#_0389AE: CMP.w #$2080
#_0389B1: BCC CODE_0389BA

CODE_0389B3:
#_0389B3: JSR .call_routine

#_0389B6: LDA.w #$0000
#_0389B9: RTS

CODE_0389BA:
#_0389BA: LDA.w #$0001
#_0389BD: RTS

;---------------------------------------------------------------------------------------------------

.call_routine
#_0389BE: JMP ($0020)

;===================================================================================================

ROUTINE_0389C1:
#_0389C1: STA.b $20

#_0389C3: LDA.w $0560
#_0389C6: SBC.w #$1000
#_0389C9: SBC.w $080C,X
#_0389CC: EOR.w #$FFFF
#_0389CF: INC A
#_0389D0: CMP.w #$0D80
#_0389D3: BCC CODE_0389F1

#_0389D5: CMP.w #$2280
#_0389D8: BCS CODE_0389F1

#_0389DA: LDA.w $0562
#_0389DD: SBC.w #$1000
#_0389E0: SBC.w $080E,X
#_0389E3: EOR.w #$FFFF
#_0389E6: INC A
#_0389E7: CMP.w #$0D80
#_0389EA: BCC CODE_0389F1

#_0389EC: CMP.w #$2080
#_0389EF: BCC CODE_038A04

CODE_0389F1:
#_0389F1: LDA.l $7FE81E,X
#_0389F5: AND.w #$00FF
#_0389F8: BEQ CODE_038A0F

#_0389FA: JSR .call_routine

#_0389FD: LDA.w #$0000
#_038A00: RTS

;---------------------------------------------------------------------------------------------------

.call_routine
#_038A01: JMP ($0020)

;---------------------------------------------------------------------------------------------------

CODE_038A04:
#_038A04: LDA.w #$0001
#_038A07: STA.l $7FE81E,X

CODE_038A0B:
#_038A0B: LDA.w #$0001
#_038A0E: RTS

CODE_038A0F:
#_038A0F: LDA.l $7FE81E,X
#_038A13: CLC
#_038A14: ADC.w #$0100
#_038A17: BCC CODE_038A1C

#_038A19: SBC.w #$0100

CODE_038A1C:
#_038A1C: STA.l $7FE81E,X
#_038A20: BRA CODE_038A0B

;===================================================================================================

ROUTINE_038A25_0020:
#_038A22: LDA.w #$0020

;===================================================================================================

ROUTINE_038A25:
#_038A25: PHA

#_038A26: LDA.w #$0054
#_038A29: STA.w $04A6

#_038A2C: PLA

;===================================================================================================

ROUTINE_038A2D:
#_038A2D: STA.b $26

#_038A2F: LDA.w $080C,X
#_038A32: STA.b $20

#_038A34: LDA.w $080E,X
#_038A37: STA.b $22

#_038A39: LDA.w $080A,X
#_038A3C: STA.b $30

;===================================================================================================

ROUTINE_038A3E:
#_038A3E: LDA.w #$000C
#_038A41: STA.b $24

#_038A43: JMP PrepEnemySpawn

;===================================================================================================

ROUTINE_038A46:
#_038A46: PHB
#_038A47: PHK
#_038A48: PLB

#_038A49: LDA.w $080C,X
#_038A4C: STA.b $20

#_038A4E: LDA.w $080E,X
#_038A51: STA.b $22

#_038A53: LDY.w #$0010
#_038A56: BRA CODE_038A5B

;===================================================================================================

ROUTINE_038A58:
#_038A58: PHB
#_038A59: PHK
#_038A5A: PLB

CODE_038A5B:
#_038A5B: PHY
#_038A5C: TYA
#_038A5D: STA.b $28
#_038A5F: JSR Random
#_038A62: AND.w #$000F
#_038A65: ADC.b $28
#_038A67: INC A
#_038A68: STA.b $28

#_038A6A: LDA.w #$010C
#_038A6D: STA.b $26

#_038A6F: LDA.w #$000E
#_038A72: STA.b $24
#_038A74: JSR PrepEnemySpawn
#_038A77: PLY
#_038A78: DEY
#_038A79: BNE CODE_038A5B

#_038A7B: PLB
#_038A7C: RTL

;===================================================================================================

ROUTINE_038A7D:
#_038A7D: STZ.w $080A,X

ROUTINE_038A80:
#_038A80: JSR Set_0814_to_FFFF

#_038A83: STZ.w $0816,X

#_038A86: JSR Reset_0818_through_081F

;===================================================================================================

AdvanceAIModeUp:
#_038A89: INC.w $0810,X
#_038A8C: INC.w $0810,X
#_038A8F: RTS

;===================================================================================================

AdvanceAIModeDown:
#_038A90: DEC.w $0810,X
#_038A93: DEC.w $0810,X
#_038A96: RTS

;===================================================================================================

ROUTINE_038A97:
#_038A97: INC.w $081E,X

#_038A9A: CMP.w $081E,X
#_038A9D: BCS .exit

#_038A9F: STZ.w $081E,X

.exit
#_038AA2: RTS

;===================================================================================================

ROUTINE_038AA3:
#_038AA3: CLC

#_038AA4: LDA.w $080C,X
#_038AA7: ADC.w $0812,X
#_038AAA: STA.w $080C,X
#_038AAD: CLC

#_038AAE: LDA.w $080E,X
#_038AB1: ADC.w $0814,X
#_038AB4: STA.w $080E,X
#_038AB7: RTS

;===================================================================================================

ROUTINE_038AB8:
#_038AB8: CLC

#_038AB9: LDA.w $080C,X
#_038ABC: ADC.w $0812,X
#_038ABF: STA.w $080C,X
#_038AC2: CLC

#_038AC3: LDA.w $080E,X
#_038AC6: ADC.w $0814,X
#_038AC9: CLC
#_038ACA: ADC.l $7E7A34
#_038ACE: STA.w $080E,X
#_038AD1: RTS

;===================================================================================================

ROUTINE_038AD2:
#_038AD2: CLC

#_038AD3: LDA.w $080C,X
#_038AD6: ADC.w $081C,X
#_038AD9: STA.w $080C,X
#_038ADC: CLC

#_038ADD: LDA.w $080E,X
#_038AE0: ADC.w $081E,X
#_038AE3: STA.w $080E,X
#_038AE6: RTS

;===================================================================================================

ROUTINE_038AE7:
#_038AE7: CLC

#_038AE8: LDA.w $080C,X
#_038AEB: ADC.w $081C,X
#_038AEE: STA.w $080C,X
#_038AF1: CLC

#_038AF2: LDA.w $080E,X
#_038AF5: ADC.w $081E,X
#_038AF8: CLC
#_038AF9: ADC.l $7E7A34
#_038AFD: STA.w $080E,X
#_038B00: RTS

;===================================================================================================

ROUTINE_038B01:
#_038B01: CLC

#_038B02: LDA.b $20
#_038B04: ADC.w $080C,X
#_038B07: STA.w $080C,X
#_038B0A: CLC

#_038B0B: LDA.b $22
#_038B0D: ADC.w $080E,X
#_038B10: STA.w $080E,X
#_038B13: RTS

ROUTINE_038B14:
#_038B14: JSR ROUTINE_0392C0
#_038B17: PHX

#_038B18: LDA.w $0802,X
#_038B1B: STA.b $20

#_038B1D: LDA.w $0804,X
#_038B20: STA.b $22

#_038B22: LDA.w #$3000
#_038B25: STA.b $24

#_038B27: LDA.w $0806,X
#_038B2A: JSL ROUTINE_028220
#_038B2E: PLX
#_038B2F: RTS

;===================================================================================================

ROUTINE_038B30:
#_038B30: CLC

#_038B31: LDA.w $080C,X
#_038B34: ADC.w $0814,X
#_038B37: STA.w $080C,X
#_038B3A: SEC
#_038B3B: SBC.w $0560
#_038B3E: STA.w $0802,X
#_038B41: ADC.w #$0100
#_038B44: CMP.w #$1200
#_038B47: BCS CODE_038B62

#_038B49: CLC

#_038B4A: LDA.w $080E,X
#_038B4D: ADC.w $0816,X
#_038B50: STA.w $080E,X
#_038B53: SEC
#_038B54: SBC.w $0562
#_038B57: STA.w $0804,X
#_038B5A: ADC.w #$0100
#_038B5D: CMP.w #$1200
#_038B60: BCC .exit

CODE_038B62:
#_038B62: LDA.w #$0004
#_038B65: STA.w $0810,X

.exit
#_038B68: RTS

;===================================================================================================

ROUTINE_038B69:
#_038B69: LDA.w $0818,X
#_038B6C: STA.b $20

#_038B6E: LDA.w $081A,X
#_038B71: STA.b $22

;===================================================================================================

ROUTINE_038B73:
#_038B73: CLC

#_038B74: LDA.w $080C,X
#_038B77: ADC.b $20
#_038B79: STA.w $080C,X
#_038B7C: SEC
#_038B7D: SBC.w $0560
#_038B80: STA.w $0802,X
#_038B83: ADC.w #$0100
#_038B86: CMP.w #$1200
#_038B89: BCS CODE_038BA3

#_038B8B: CLC

#_038B8C: LDA.w $080E,X
#_038B8F: ADC.b $22
#_038B91: STA.w $080E,X
#_038B94: SEC
#_038B95: SBC.w $0562
#_038B98: STA.w $0804,X
#_038B9B: ADC.w #$0100
#_038B9E: CMP.w #$1200
#_038BA1: BCC CODE_038BAB

CODE_038BA3:
#_038BA3: LDA.w #$0004
#_038BA6: STA.w $0810,X
#_038BA9: SEC
#_038BAA: RTS

CODE_038BAB:
#_038BAB: CLC
#_038BAC: RTS

;===================================================================================================

ROUTINE_038BAD:
#_038BAD: JSR ROUTINE_0382B2

#_038BB0: LDA.w #$00FA
#_038BB3: JSL ROUTINE_0396E3
#_038BB7: RTS

;===================================================================================================

ROUTINE_038BB8:
#_038BB8: PHA
#_038BB9: JSR ROUTINE_038BE0
#_038BBC: PLA
#_038BBD: STA.b $3C

#_038BBF: LDY.w #$0004

CODE_038BC2:
#_038BC2: PHY
#_038BC3: JSL ROUTINE_00DB57_long
#_038BC7: CLC

#_038BC8: LDA.b $38
#_038BCA: ADC.w #$0100
#_038BCD: STA.b $38
#_038BCF: CLC

#_038BD0: LDA.b $3C
#_038BD2: ADC.w #$0200
#_038BD5: STA.b $3C
#_038BD7: BCC CODE_038BDB

#_038BD9: INC.b $3E

CODE_038BDB:
#_038BDB: PLY
#_038BDC: DEY
#_038BDD: BNE CODE_038BC2

#_038BDF: RTS

;===================================================================================================

ROUTINE_038BE0:
#_038BE0: LDA.w $0000,X
#_038BE3: BEQ .exit

#_038BE5: STA.b $24
#_038BE7: INX
#_038BE8: INX

#_038BE9: LDA.w $0000,X
#_038BEC: STA.b $20
#_038BEE: INX
#_038BEF: INX

#_038BF0: LDA.w $0000,X
#_038BF3: AND.w #$00FF
#_038BF6: STA.b $22
#_038BF8: INX

#_038BF9: LDY.w #$0000
#_038BFC: SEP #$20

CODE_038BFE:
#_038BFE: LDA.w $0000,X
#_038C01: STA.b [$20],Y
#_038C03: INX
#_038C04: INY
#_038C05: DEC.b $24
#_038C07: BNE CODE_038BFE

#_038C09: REP #$20
#_038C0B: BRA ROUTINE_038BE0

.exit
#_038C0D: RTS

;===================================================================================================

ROUTINE_038C0E:
#_038C0E: LDA.w $0000,X
#_038C11: BEQ .exit

#_038C13: STA.b $38
#_038C15: INX
#_038C16: INX

#_038C17: LDA.w $0000,X
#_038C1A: STA.b $34
#_038C1C: INX
#_038C1D: INX

#_038C1E: LDA.w $0000,X
#_038C21: AND.w #$00FF
#_038C24: STA.b $36
#_038C26: INX

#_038C27: LDY.w #$0000
#_038C2A: SEP #$20

CODE_038C2C:
#_038C2C: LDA.w $0000,X
#_038C2F: STA.b [$34],Y

#_038C31: INX

#_038C32: INY

#_038C33: DEC.b $38
#_038C35: BNE CODE_038C2C

#_038C37: REP #$20
#_038C39: BRA ROUTINE_038C0E

.exit
#_038C3B: RTS

;===================================================================================================

ROUTINE_038C3C:
#_038C3C: STZ.w $0800,X
#_038C3F: PHX

#_038C40: LDY.w #$000B

CODE_038C43:
#_038C43: LDA.l $7FE802,X
#_038C47: STA.w $0802,X
#_038C4A: INX
#_038C4B: INX
#_038C4C: DEY
#_038C4D: BNE CODE_038C43

#_038C4F: PLX
#_038C50: PHX
#_038C51: TXY

#_038C52: LDA.l $7FE800,X
#_038C56: AND.w #$00FF
#_038C59: ASL A
#_038C5A: TAX
#_038C5B: JSR (.vectors,X)
#_038C5E: PLX
#_038C5F: RTS

.vectors
#_038C60: dw ROUTINE_038C66
#_038C62: dw ROUTINE_038C66
#_038C64: dw ROUTINE_038C68

;===================================================================================================

ROUTINE_038C66:
#_038C66: TYX
#_038C67: RTS

;===================================================================================================

ROUTINE_038C68:
#_038C68: TYX

#_038C69: LDA.l $7FE800,X
#_038C6D: AND.w #$FF00
#_038C70: BEQ .exit

#_038C72: LDA.l $7FE800,X
#_038C76: SEC
#_038C77: SBC.w #$0100
#_038C7A: STA.l $7FE800,X

.exit
#_038C7E: RTS

;===================================================================================================

ROUTINE_038C7F:
#_038C7F: RTS

;===================================================================================================

ROUTINE_038C80:
#_038C80: TYX
#_038C81: JMP ROUTINE_038C3C

;===================================================================================================

ROUTINE_038C84:
#_038C84: TYX

;===================================================================================================

ROUTINE_038C85:
#_038C85: JSR ROUTINE_038C3C
#_038C88: CPX.w #$0800
#_038C8B: BCS .exit

#_038C8D: LDA.w #$0000
#_038C90: STA.l $7FE802,X
#_038C94: STA.l $7FE804,X

#_038C98: LDY.w $18EA
#_038C9B: CPY.w #$0080
#_038C9E: BCS .exit

#_038CA0: TXA
#_038CA1: STA.w $1840,Y
#_038CA4: INY
#_038CA5: INY
#_038CA6: STY.w $18EA

.exit
#_038CA9: RTS

;===================================================================================================

ROUTINE_038CAA:
#_038CAA: STA.b $20
#_038CAC: STY.b $22

#_038CAE: LDA.w $080A,X
#_038CB1: BPL CODE_038CB7

#_038CB3: CMP.b $20
#_038CB5: BCC CODE_038CB9

CODE_038CB7:
#_038CB7: INY
#_038CB8: INY

CODE_038CB9:
#_038CB9: TYA
#_038CBA: STA.w $0808,X

;===================================================================================================

ROUTINE_038CBD:
#_038CBD: LDY.w $0600
#_038CC0: CPY.w #$0100
#_038CC3: BCS .exit

#_038CC5: TXA
#_038CC6: ADC.w #$0800
#_038CC9: STA.w $0602,Y
#_038CCC: INY
#_038CCD: INY
#_038CCE: STY.w $0600

.exit
#_038CD1: RTS

;===================================================================================================

Reset_0818_through_081F:
#_038CD2: STZ.w $081C,X
#_038CD5: STZ.w $081E,X
#_038CD8: STZ.w $0818,X
#_038CDB: STZ.w $081A,X

#_038CDE: RTS

;===================================================================================================

ROUTINE_038CDF:
#_038CDF: JSR ROUTINE_038D39

#_038CE2: LDA.w $081C,X
#_038CE5: CMP.w #$FFFF
#_038CE8: RTS

;===================================================================================================

ROUTINE_038CE9:
#_038CE9: JSR ROUTINE_038D39

#_038CEC: LDA.w $081E,X
#_038CEF: RTS

;===================================================================================================

ROUTINE_038CF0:
#_038CF0: PHY
#_038CF1: JSR ROUTINE_038D39

#_038CF4: LDA.w $081C,X
#_038CF7: INC A
#_038CF8: TAY
#_038CF9: PLA
#_038CFA: CMP.w $081E,X
#_038CFD: RTS

;===================================================================================================

ROUTINE_038CFE:
#_038CFE: JSR ROUTINE_038D44

#_038D01: LDA.w $081C,X
#_038D04: CMP.w #$FFFF
#_038D07: RTS

;===================================================================================================

ROUTINE_038D08:
#_038D08: PHA
#_038D09: SEP #$20
#_038D0B: XBA
#_038D0C: REP #$20
#_038D0E: AND.w #$00FF
#_038D11: TAY
#_038D12: PLA
#_038D13: AND.w #$00FF
#_038D16: CMP.w $0818,X
#_038D19: BEQ CODE_038D24

#_038D1B: STA.w $0818,X
#_038D1E: STZ.w $081C,X
#_038D21: STZ.w $081E,X

CODE_038D24:
#_038D24: JSR ROUTINE_038D55

#_038D27: LDA.w $081C,X
#_038D2A: CMP.w #$FFFF
#_038D2D: BNE .exit

#_038D2F: STZ.w $0818,X
#_038D32: STZ.w $081C,X
#_038D35: STZ.w $081E,X

.exit
#_038D38: RTS

;===================================================================================================

ROUTINE_038D39:
#_038D39: PHA
#_038D3A: SEP #$20
#_038D3C: XBA
#_038D3D: REP #$20
#_038D3F: AND.w #$00FF
#_038D42: TAY
#_038D43: PLA

;===================================================================================================

ROUTINE_038D44:
#_038D44: AND.w #$00FF
#_038D47: CMP.w $081A,X
#_038D4A: BEQ ROUTINE_038D55

#_038D4C: STA.w $081A,X
#_038D4F: STZ.w $081C,X
#_038D52: STZ.w $081E,X

;===================================================================================================

ROUTINE_038D55:
#_038D55: AND.w #$00FF
#_038D58: STA.b $2C
#_038D5A: STY.b $2A

#_038D5C: LDA.w $081C,X
#_038D5F: BEQ CODE_038D6B

#_038D61: CMP.w #$FFFF
#_038D64: BEQ .exit

#_038D66: DEC.w $081C,X
#_038D69: BNE .exit

CODE_038D6B:
#_038D6B: PHX

#_038D6C: LDA.b $2A
#_038D6E: ASL A
#_038D6F: TAX

#_038D70: LDA.l UNREACH_05EA9E,X
#_038D74: STA.b $20

#_038D76: LDA.w #$0005
#_038D79: STA.b $22
#_038D7B: STA.b $26
#_038D7D: PLX

#_038D7E: LDA.b $2C
#_038D80: ASL A
#_038D81: TAY

#_038D82: LDA.b [$20],Y
#_038D84: STA.b $24

#_038D86: LDA.w $081E,X
#_038D89: ASL A
#_038D8A: ASL A

CODE_038D8B:
#_038D8B: TAY

#_038D8C: LDA.b [$24],Y
#_038D8E: BEQ CODE_038DBC

#_038D90: STA.w $081C,X
#_038D93: INC.w $081E,X
#_038D96: INY
#_038D97: INY

#_038D98: LDA.b [$24],Y
#_038D9A: AND.w #$1FFF
#_038D9D: STA.w $0806,X

#_038DA0: LDA.b [$24],Y
#_038DA2: BPL .exit

#_038DA4: ROL A
#_038DA5: ROL A
#_038DA6: ROL A
#_038DA7: ROL A
#_038DA8: ROL A
#_038DA9: AND.w #$0006
#_038DAC: TAY

#_038DAD: LDA.w UNREACH_038DB4,Y
#_038DB0: STA.w $052C

.exit
#_038DB3: RTS

UNREACH_038DB4:
#_038DB4: db $63,$00,$6B,$00,$73,$00,$7B,$00

;---------------------------------------------------------------------------------------------------

CODE_038DBC:
#_038DBC: STA.w $081E,X
#_038DBF: JMP CODE_038D8B

ROUTINE_038DC2:
#_038DC2: JSR ROUTINE_0392C0

ROUTINE_038DC5:
#_038DC5: LDA.w #$3000

CODE_038DC8:
#_038DC8: STA.b $24
#_038DCA: CLC

#_038DCB: LDA.w $0804,X
#_038DCE: ADC.w $080A,X
#_038DD1: STA.b $22

#_038DD3: LDA.w $0802,X
#_038DD6: STA.b $20

#_038DD8: LDA.w $0806,X
#_038DDB: JSL ROUTINE_028220
#_038DDF: RTS

;===================================================================================================

ROUTINE_038DE0:
#_038DE0: STA.w $0808,X

#_038DE3: LDY.w $0814,X
#_038DE6: CPY.w #$0002
#_038DE9: BCS CODE_038DF4

#_038DEB: LDA.w #$0600
#_038DEE: ORA.w $0808,X
#_038DF1: STA.w $0808,X

CODE_038DF4:
#_038DF4: BRA CODE_038DC8

CODE_038DF6:
#_038DF6: AND.w #$0FF0
#_038DF9: ORA.w #$000E
#_038DFC: TAX

CODE_038DFD:
#_038DFD: LDA.l $7EB000,X
#_038E01: BEQ CODE_038E0B

#_038E03: DEX
#_038E04: DEX
#_038E05: CPX.w #$FFFE
#_038E08: BNE CODE_038DFD

#_038E0A: RTS

CODE_038E0B:
#_038E0B: TYA
#_038E0C: STA.l $7EB000,X
#_038E10: STX.b $20

#_038E12: LDA.b $21
#_038E14: AND.w #$000F
#_038E17: ASL A
#_038E18: TAX

#_038E19: LDA.l $7EC000,X
#_038E1D: INC A
#_038E1E: BEQ CODE_038E0B

#_038E20: STA.l $7EC000,X
#_038E24: RTS

;===================================================================================================

Random:
#_038E25: LDA.w $1984
#_038E28: ASL A
#_038E29: ADC.w $1982
#_038E2C: ASL A
#_038E2D: ADC.w $1984
#_038E30: ADC.w #$3211
#_038E33: STA.w $1984

#_038E36: EOR.w $1982
#_038E39: STA.w $1982

#_038E3C: RTS

;===================================================================================================

ROUTINE_038E3D:
#_038E3D: STA.b $20
#_038E3F: STY.b $22

#_038E41: STZ.b $24
#_038E43: STZ.b $26

#_038E45: STZ.b $34

#_038E47: STZ.b $2C
#_038E49: STZ.b $2E

#_038E4B: STX.b $30

#_038E4D: LDX.w $056C
#_038E50: BMI CODE_038E92

#_038E52: ADC.w $0564
#_038E55: ASL A
#_038E56: SEP #$20
#_038E58: XBA
#_038E59: REP #$20
#_038E5B: AND.w #$003F
#_038E5E: ASL A
#_038E5F: TAX
#_038E60: TYA
#_038E61: ADC.w $0566
#_038E64: ASL A
#_038E65: SEP #$20
#_038E67: XBA
#_038E68: REP #$20
#_038E6A: AND.w #$003F
#_038E6D: ASL A
#_038E6E: TAY

#_038E6F: LDA.w UNREACH_038F6B,X
#_038E72: ADC.w UNREACH_038FEB,Y
#_038E75: TAX
#_038E76: STX.b $28

#_038E78: LDA.l $7E3000,X
#_038E7C: STA.b $24
#_038E7E: AND.w #$03FF
#_038E81: BEQ CODE_038E92

#_038E83: ASL A
#_038E84: TAX

#_038E85: LDA.l $7EC100,X
#_038E89: BEQ CODE_038E92

#_038E8B: ASL A
#_038E8C: TAX
#_038E8D: STA.b $2C
#_038E8F: JSR (.vectors_a,X)

CODE_038E92:
#_038E92: LDA.w $056C
#_038E95: ASL A
#_038E96: BMI CODE_038EE2

#_038E98: ASL A
#_038E99: BMI CODE_038E9F

#_038E9B: LDX.b $28
#_038E9D: BRA CODE_038EC6

CODE_038E9F:
#_038E9F: LDA.b $20
#_038EA1: ADC.w $0568
#_038EA4: ASL A
#_038EA5: SEP #$20
#_038EA7: XBA
#_038EA8: REP #$20
#_038EAA: AND.w #$003F
#_038EAD: ASL A
#_038EAE: TAX

#_038EAF: LDA.b $22
#_038EB1: ADC.w $056A
#_038EB4: ASL A
#_038EB5: SEP #$20
#_038EB7: XBA
#_038EB8: REP #$20
#_038EBA: AND.w #$003F
#_038EBD: ASL A
#_038EBE: TAY

#_038EBF: LDA.w UNREACH_038F6B,X
#_038EC2: ADC.w UNREACH_038FEB,Y
#_038EC5: TAX

CODE_038EC6:
#_038EC6: STX.b $2A

#_038EC8: LDA.l $7E5000,X
#_038ECC: AND.w #$03FF
#_038ECF: BEQ CODE_038EE2

#_038ED1: ASL A
#_038ED2: TAX

#_038ED3: LDA.l $7EC100,X
#_038ED7: STA.b $26
#_038ED9: BEQ CODE_038EE2

#_038EDB: ASL A
#_038EDC: TAX
#_038EDD: STA.b $2E
#_038EDF: JSR (.vectors_b,X)

CODE_038EE2:
#_038EE2: LDX.b $30

#_038EE4: LDA.b $2C
#_038EE6: BNE .exit

#_038EE8: LDA.b $2E

.exit
#_038EEA: RTS

;---------------------------------------------------------------------------------------------------

.vectors_a
#_038EEB: dw ROUTINE_038F63
#_038EED: dw ROUTINE_038F64
#_038EEF: dw ROUTINE_038F64
#_038EF1: dw ROUTINE_038F64
#_038EF3: dw ROUTINE_038F63
#_038EF5: dw ROUTINE_038F63
#_038EF7: dw ROUTINE_038F63
#_038EF9: dw ROUTINE_038F64
#_038EFB: dw ROUTINE_038F64
#_038EFD: dw ROUTINE_038F64
#_038EFF: dw ROUTINE_038F63
#_038F01: dw ROUTINE_038F63
#_038F03: dw ROUTINE_038F63
#_038F05: dw ROUTINE_038F63
#_038F07: dw ROUTINE_038F63
#_038F09: dw ROUTINE_038F63
#_038F0B: dw ROUTINE_038F63
#_038F0D: dw ROUTINE_038F64
#_038F0F: dw ROUTINE_038F63
#_038F11: dw ROUTINE_038F63
#_038F13: dw ROUTINE_038F63
#_038F15: dw ROUTINE_038F63
#_038F17: dw ROUTINE_038F63
#_038F19: dw ROUTINE_038F63
#_038F1B: dw ROUTINE_038F63
#_038F1D: dw ROUTINE_038F63
#_038F1F: dw ROUTINE_038F63
#_038F21: dw ROUTINE_038F64
#_038F23: dw ROUTINE_038F64
#_038F25: dw ROUTINE_038F64

;---------------------------------------------------------------------------------------------------

.vectors_b
#_038F27: dw ROUTINE_038F67
#_038F29: dw ROUTINE_038F68
#_038F2B: dw ROUTINE_038F68
#_038F2D: dw ROUTINE_038F68
#_038F2F: dw ROUTINE_038F67
#_038F31: dw ROUTINE_038F67
#_038F33: dw ROUTINE_038F67
#_038F35: dw ROUTINE_038F68
#_038F37: dw ROUTINE_038F68
#_038F39: dw ROUTINE_038F68
#_038F3B: dw ROUTINE_038F67
#_038F3D: dw ROUTINE_038F67
#_038F3F: dw ROUTINE_038F67
#_038F41: dw ROUTINE_038F67
#_038F43: dw ROUTINE_038F67
#_038F45: dw ROUTINE_038F67
#_038F47: dw ROUTINE_038F67
#_038F49: dw ROUTINE_038F68
#_038F4B: dw ROUTINE_038F67
#_038F4D: dw ROUTINE_038F67
#_038F4F: dw ROUTINE_038F67
#_038F51: dw ROUTINE_038F67
#_038F53: dw ROUTINE_038F67
#_038F55: dw ROUTINE_038F67
#_038F57: dw ROUTINE_038F67
#_038F59: dw ROUTINE_038F67
#_038F5B: dw ROUTINE_038F67
#_038F5D: dw ROUTINE_038F68
#_038F5F: dw ROUTINE_038F68
#_038F61: dw ROUTINE_038F68

;===================================================================================================

ROUTINE_038F63:
#_038F63: RTS

;===================================================================================================

ROUTINE_038F64:
#_038F64: INC.b $34
#_038F66: RTS

;===================================================================================================

ROUTINE_038F67:
#_038F67: RTS

;===================================================================================================

ROUTINE_038F68:
#_038F68: INC.b $34
#_038F6A: RTS

;===================================================================================================

UNREACH_038F6B:
#_038F6B: db $00,$00,$02,$00,$04,$00,$06,$00
#_038F73: db $08,$00,$0A,$00,$0C,$00,$0E,$00
#_038F7B: db $10,$00,$12,$00,$14,$00,$16,$00
#_038F83: db $18,$00,$1A,$00,$1C,$00,$1E,$00
#_038F8B: db $20,$00,$22,$00,$24,$00,$26,$00
#_038F93: db $28,$00,$2A,$00,$2C,$00,$2E,$00
#_038F9B: db $30,$00,$32,$00,$34,$00,$36,$00
#_038FA3: db $38,$00,$3A,$00,$3C,$00,$3E,$00
#_038FAB: db $00,$08,$02,$08,$04,$08,$06,$08
#_038FB3: db $08,$08,$0A,$08,$0C,$08,$0E,$08
#_038FBB: db $10,$08,$12,$08,$14,$08,$16,$08
#_038FC3: db $18,$08,$1A,$08,$1C,$08,$1E,$08
#_038FCB: db $20,$08,$22,$08,$24,$08,$26,$08
#_038FD3: db $28,$08,$2A,$08,$2C,$08,$2E,$08
#_038FDB: db $30,$08,$32,$08,$34,$08,$36,$08
#_038FE3: db $38,$08,$3A,$08,$3C,$08,$3E,$08

UNREACH_038FEB:
#_038FEB: db $00,$00,$40,$00,$80,$00,$C0,$00
#_038FF3: db $00,$01,$40,$01,$80,$01,$C0,$01
#_038FFB: db $00,$02,$40,$02,$80,$02,$C0,$02
#_039003: db $00,$03,$40,$03,$80,$03,$C0,$03
#_03900B: db $00,$04,$40,$04,$80,$04,$C0,$04
#_039013: db $00,$05,$40,$05,$80,$05,$C0,$05
#_03901B: db $00,$06,$40,$06,$80,$06,$C0,$06
#_039023: db $00,$07,$40,$07,$80,$07,$C0,$07
#_03902B: db $00,$10,$40,$10,$80,$10,$C0,$10
#_039033: db $00,$11,$40,$11,$80,$11,$C0,$11
#_03903B: db $00,$12,$40,$12,$80,$12,$C0,$12
#_039043: db $00,$13,$40,$13,$80,$13,$C0,$13
#_03904B: db $00,$14,$40,$14,$80,$14,$C0,$14
#_039053: db $00,$15,$40,$15,$80,$15,$C0,$15
#_03905B: db $00,$16,$40,$16,$80,$16,$C0,$16
#_039063: db $00,$17,$40,$17,$80,$17,$C0,$17
#_03906B: db $48,$A9,$FF,$FF,$85,$28,$68,$80
#_039073: db $25

;===================================================================================================

ROUTINE_039074:
#_039074: STA.b $34

#_039076: LDY.w #$0003
#_039079: STY.b $36

#_03907B: LDY.w #$0000
#_03907E: LDA.b [$34],Y
#_039080: STA.w $081E,X
#_039083: STA.w $0816,X
#_039086: JSR ROUTINE_0390A5
#_039089: BCC .exit

#_03908B: STA.b $20

#_03908D: LDA.w $081E,X
#_039090: SBC.b $20
#_039092: STA.w $081E,X
#_039095: STA.w $0816,X

.exit
#_039098: RTS

;===================================================================================================

ROUTINE_039099:
#_039099: STA.b $34

#_03909B: LDY.w #$0003
#_03909E: STY.b $36

#_0390A0: LDY.w #$0000
#_0390A3: LDA.b [$34],Y

;===================================================================================================

ROUTINE_0390A5:
#_0390A5: INY
#_0390A6: INY

CODE_0390A7:
#_0390A7: PHA
#_0390A8: INC.b $28

#_0390AA: LDA.b [$34],Y
#_0390AC: ADC.w $080C,X
#_0390AF: STA.b $20
#_0390B1: INY
#_0390B2: INY

#_0390B3: LDA.b [$34],Y
#_0390B5: ADC.w $080E,X
#_0390B8: STA.b $22
#_0390BA: INY
#_0390BB: INY

#_0390BC: LDA.b [$34],Y
#_0390BE: INY
#_0390BF: INY
#_0390C0: STA.b $26
#_0390C2: STX.b $30

#_0390C4: LDA.w #$000E
#_0390C7: STA.b $24
#_0390C9: PHY
#_0390CA: JSR PrepEnemySpawn
#_0390CD: PLY
#_0390CE: PLA
#_0390CF: BCC CODE_0390D2

#_0390D1: RTS

CODE_0390D2:
#_0390D2: DEC A
#_0390D3: BNE CODE_0390A7

#_0390D5: CLC
#_0390D6: RTS

;===================================================================================================

ROUTINE_0390D7:
#_0390D7: STA.b $34

#_0390D9: LDY.w #$0003
#_0390DC: STY.b $36

#_0390DE: LDY.w #$0000
#_0390E1: LDA.b [$34],Y
#_0390E3: STA.w $081E,X
#_0390E6: STA.w $0816,X
#_0390E9: JSR ROUTINE_039108
#_0390EC: BCC .exit

#_0390EE: STA.b $20

#_0390F0: LDA.w $081E,X
#_0390F3: SBC.b $20
#_0390F5: STA.w $081E,X
#_0390F8: STA.w $0816,X

.exit
#_0390FB: RTS

;===================================================================================================

ROUTINE_0390FC:
#_0390FC: STA.b $34

#_0390FE: LDY.w #$0003
#_039101: STY.b $36

#_039103: LDY.w #$0000
#_039106: LDA.b [$34],Y

;===================================================================================================

ROUTINE_039108:
#_039108: INY
#_039109: INY

CODE_03910A:
#_03910A: PHA
#_03910B: INC.b $28

#_03910D: LDA.b [$34],Y
#_03910F: ADC.w $080C,X
#_039112: STA.b $20
#_039114: INY
#_039115: INY

#_039116: LDA.b [$34],Y
#_039118: ADC.w $080E,X
#_03911B: STA.b $22
#_03911D: INY
#_03911E: INY

#_03911F: LDA.b [$34],Y
#_039121: STA.b $26
#_039123: INY
#_039124: INY

#_039125: LDA.b [$34],Y
#_039127: STA.b $2C
#_039129: INY
#_03912A: INY
#_03912B: STX.b $30

#_03912D: LDA.w #$000E
#_039130: STA.b $24
#_039132: PHY
#_039133: JSR PrepEnemySpawn
#_039136: PLY
#_039137: PLA
#_039138: BCC CODE_03913B

#_03913A: RTS

CODE_03913B:
#_03913B: DEC A
#_03913C: BNE CODE_03910A

#_03913E: CLC
#_03913F: RTS

;===================================================================================================

ROUTINE_039140:
#_039140: PHB
#_039141: PHK
#_039142: PLB

#_039143: LDA.w #$00B4
#_039146: STA.b $26
#_039148: JSR Random
#_03914B: AND.w #$01FF
#_03914E: SBC.w #$0100
#_039151: ADC.w $05E6
#_039154: STA.b $20

#_039156: LDA.w $05E8
#_039159: ADC.w #$0100
#_03915C: STA.b $22

#_03915E: LDA.w $05CA
#_039161: STA.b $30

#_039163: LDA.w #$000C
#_039166: STA.b $24
#_039168: JSR PrepEnemySpawn
#_03916B: PLB
#_03916C: RTL

;===================================================================================================

ROUTINE_03916D:
#_03916D: PHB
#_03916E: PHK
#_03916F: PLB

#_039170: LDA.w #$00A2
#_039173: STA.b $26

#_039175: LDA.w $080C,X
#_039178: STA.b $20

#_03917A: LDA.w $080E,X
#_03917D: STA.b $22

#_03917F: LDA.w $080A,X
#_039182: STA.b $30

#_039184: LDA.w #$000C
#_039187: STA.b $24
#_039189: JSR PrepEnemySpawn
#_03918C: PLB
#_03918D: RTL

;===================================================================================================

ROUTINE_03918E:
#_03918E: PHB
#_03918F: PHK
#_039190: PLB

#_039191: LDA.w #$00A2
#_039194: STA.b $26

#_039196: LDA.w #$000C
#_039199: STA.b $24
#_03919B: JSR PrepEnemySpawn
#_03919E: PLB
#_03919F: RTL

CODE_0391A0:
#_0391A0: LDA.w #$0010
#_0391A3: STA.w $081C,X

#_0391A6: LDA.w #$003E
#_0391A9: STA.w $0810,X
#_0391AC: RTS

;===================================================================================================

ROUTINE_0391AD:
#_0391AD: LDA.w #$0010
#_0391B0: STA.b $2C

#_0391B2: LDA.w #$003E
#_0391B5: STA.b $26
#_0391B7: JMP ROUTINE_0396C9

;===================================================================================================

PrepEnemySpawnMyCoordinates:
#_0391BA: STA.b $26

#_0391BC: LDA.w $080C,X
#_0391BF: STA.b $20

#_0391C1: LDA.w $080E,X
#_0391C4: STA.b $22

#_0391C6: LDA.w $080A,X
#_0391C9: STA.b $30

#_0391CB: LDA.w #$000C
#_0391CE: STA.b $24

#_0391D0: JMP PrepEnemySpawn

;===================================================================================================

PrepEnemySpawn_long:
#_0391D3: PHB
#_0391D4: PHK
#_0391D5: PLB

#_0391D6: JSR PrepEnemySpawn

#_0391D9: PLB
#_0391DA: RTL

;===================================================================================================

PrepEnemySpawn:
#_0391DB: PHX

#_0391DC: LDA.b $0E
#_0391DE: CMP.w #$0100
#_0391E1: BCS .exit

#_0391E3: SEC

#_0391E4: LDY.w $18EA
#_0391E7: BEQ .exit

#_0391E9: DEY
#_0391EA: DEY
#_0391EB: STY.w $18EA

#_0391EE: LDA.w $1840,Y
#_0391F1: LDY.b $0E
#_0391F3: STA.w $0700,Y
#_0391F6: INY
#_0391F7: INY
#_0391F8: STY.b $0E
#_0391FA: TAY

#_0391FB: LDA.b $20
#_0391FD: STA.w $080C,Y

#_039200: LDA.b $22
#_039202: STA.w $080E,Y

#_039205: LDX.b $24
#_039207: JSR (.vectors,X)
#_03920A: CLC

.exit
#_03920B: PLX
#_03920C: RTS

.vectors
#_03920D: dw ROUTINE_03921F
#_03920F: dw ROUTINE_039220
#_039211: dw ROUTINE_03923F
#_039213: dw ROUTINE_039254
#_039215: dw ROUTINE_03926F
#_039217: dw ROUTINE_03925F
#_039219: dw ROUTINE_039285
#_03921B: dw ROUTINE_03928F
#_03921D: dw ROUTINE_03929C

;===================================================================================================

ROUTINE_03921F:
#_03921F: RTS

;===================================================================================================

ROUTINE_039220:
#_039220: LDA.w #$0040
#_039223: STA.w $0816,Y

#_039226: LDA.w #$0000
#_039229: STA.w $0814,Y

#_03922C: LDA.w #$008C
#_03922F: STA.w $0810,Y

#_039232: LDA.w #$0001
#_039235: STA.w $0812,Y

CODE_039238:
#_039238: LDA.w #$8001
#_03923B: STA.w $0800,Y
#_03923E: RTS

;===================================================================================================

ROUTINE_03923F:
#_03923F: LDA.b $26
#_039241: STA.w $081E,Y

#_039244: LDA.w #$0090
#_039247: STA.w $0810,Y
#_03924A: STA.w $0812,Y

#_03924D: LDA.b $28
#_03924F: STA.w $0808,Y
#_039252: BRA CODE_039238

;===================================================================================================

ROUTINE_039254:
#_039254: LDA.w #$0020
#_039257: STA.w $0810,Y
#_03925A: STA.w $0812,Y
#_03925D: BRA CODE_03927E

;===================================================================================================

ROUTINE_03925F:
#_03925F: LDA.b $26
#_039261: STA.w $081C,Y

#_039264: LDA.w #$009C
#_039267: STA.w $0810,Y
#_03926A: STA.w $0812,Y
#_03926D: BRA CODE_039238

;===================================================================================================

ROUTINE_03926F:
#_03926F: LDA.b $28
#_039271: STA.w $0812,Y

#_039274: LDA.b $2A
#_039276: STA.w $0814,Y

#_039279: LDA.b $26
#_03927B: STA.w $0810,Y

CODE_03927E:
#_03927E: LDA.b $30
#_039280: STA.w $080A,Y
#_039283: BRA CODE_039238

;===================================================================================================

ROUTINE_039285:
#_039285: LDA.b $26
#_039287: STA.w $0810,Y
#_03928A: STA.w $0812,Y
#_03928D: BRA CODE_03927E

;===================================================================================================

ROUTINE_03928F:
#_03928F: LDA.b $28
#_039291: STA.w $0806,Y

#_039294: LDA.b $2C
#_039296: STA.w $081C,Y
#_039299: JMP ROUTINE_039285

;===================================================================================================

ROUTINE_03929C:
#_03929C: LDA.b $26
#_03929E: STA.w $0810,Y

#_0392A1: LDA.b $28
#_0392A3: STA.w $0806,Y

#_0392A6: LDA.b $2A
#_0392A8: STA.w $0812,Y

#_0392AB: LDA.b $2C
#_0392AD: STA.w $0816,Y

#_0392B0: LDA.b $2E
#_0392B2: STA.w $080A,Y
#_0392B5: BRA CODE_039238

;===================================================================================================

ROUTINE_0392B7:
#_0392B7: INC.w $0814,X
#_0392BA: BNE .exit

#_0392BC: DEC.w $0814,X

.exit
#_0392BF: RTS

;===================================================================================================

ROUTINE_0392C0:
#_0392C0: SEC

#_0392C1: LDA.w $080C,X
#_0392C4: SBC.w $0560
#_0392C7: STA.w $0802,X
#_0392CA: SEC

#_0392CB: LDA.w $080E,X
#_0392CE: SBC.w $0562
#_0392D1: STA.w $0804,X

#_0392D4: RTS

;===================================================================================================

ROUTINE_0392D5:
#_0392D5: SEC

#_0392D6: LDA.w $080C,X
#_0392D9: SBC.w $0560
#_0392DC: STA.w $0802,X
#_0392DF: CLC

#_0392E0: LDA.w $080E,X
#_0392E3: ADC.w $080A,X
#_0392E6: SEC
#_0392E7: SBC.w $0562
#_0392EA: STA.w $0804,X
#_0392ED: RTS

;===================================================================================================

ROUTINE_0392EE:
#_0392EE: STA.w $1F36
#_0392F1: SEC

#_0392F2: LDA.w $080C,X
#_0392F5: SBC.w $0560
#_0392F8: STA.w $0802,X
#_0392FB: SEC

#_0392FC: LDA.w $080E,X
#_0392FF: ADC.w $080A,X
#_039302: SBC.w $0562
#_039305: STA.w $0804,X

#_039308: LDA.w UNREACH_039E73,Y
#_03930B: ADC.w $080C,X
#_03930E: STA.b $38
#_039310: ADC.w UNREACH_039E77,Y
#_039313: STA.b $3A

#_039315: LDA.w UNREACH_039E75,Y
#_039318: ADC.w $080A,X
#_03931B: ADC.w $080E,X
#_03931E: STA.b $3C
#_039320: ADC.w UNREACH_039E79,Y
#_039323: STA.b $3E
#_039325: INC.w $0814,X
#_039328: BNE CODE_03932D

#_03932A: DEC.w $0814,X

CODE_03932D:
#_03932D: STX.b $20
#_03932F: STZ.b $22

#_039331: LDA.w $0812,X
#_039334: STA.b $36
#_039336: INC A
#_039337: BNE CODE_03933E

#_039339: LDA.w $04C0
#_03933C: BEQ CODE_03937E

CODE_03933E:
#_03933E: LDA.w $0814,X
#_039341: CMP.w #$0004
#_039344: BCC CODE_039382

#_039346: LDY.b $0A

CODE_039348:
#_039348: DEY
#_039349: DEY
#_03934A: BMI CODE_039380

#_03934C: LDX.b $40,Y
#_03934E: LDA.b $80,X
#_039350: CMP.b $3E
#_039352: BCS CODE_039348

#_039354: LDA.b $C0,X
#_039356: CMP.b $3C
#_039358: BCC CODE_039348

#_03935A: LDA.w $0140,X
#_03935D: CMP.b $3A
#_03935F: BCS CODE_039348

#_039361: LDA.w $0100,X
#_039364: CMP.b $38
#_039366: BCC CODE_039348

#_039368: TXY
#_039369: INC.b $36
#_03936B: BEQ CODE_03937E

#_03936D: LDA.w $0340,Y
#_039370: BEQ CODE_039380

#_039372: DEC A
#_039373: STA.w $0340,Y
#_039376: BNE CODE_03937E

#_039378: LDA.w #$FFFF
#_03937B: STA.w $0080,Y

CODE_03937E:
#_03937E: INC.b $22

CODE_039380:
#_039380: LDX.b $20

CODE_039382:
#_039382: LDA.b $22
#_039384: RTS

;===================================================================================================

ROUTINE_039385:
#_039385: LDA.w $0800,X
#_039388: CMP.w #$FE00
#_03938B: BCS ROUTINE_039390

#_03938D: JSR ROUTINE_0394E7

;===================================================================================================

ROUTINE_039390:
#_039390: LDA.w $0800,X
#_039393: AND.w #$FF00
#_039396: CMP.w #$FE00
#_039399: BEQ CODE_0393EF

#_03939B: CMP.w #$FF00
#_03939E: BEQ CODE_0393A3

#_0393A0: JMP CODE_039413

CODE_0393A3:
#_0393A3: LDA.w #$004D
#_0393A6: STA.w $04AA

#_0393A9: LDA.w $0180,Y
#_0393AC: CMP.w #$009C
#_0393AF: BEQ CODE_0393DC

#_0393B1: CMP.w #$00B0
#_0393B4: BEQ CODE_0393C0

#_0393B6: CMP.w #$0094
#_0393B9: BNE CODE_0393DC

#_0393BB: LDA.w #$0044
#_0393BE: BRA CODE_0393C3

CODE_0393C0:
#_0393C0: LDA.w #$004E

CODE_0393C3:
#_0393C3: PHX
#_0393C4: PHA
#_0393C5: PHY
#_0393C6: JSR ROUTINE_03A273
#_0393C9: PLY
#_0393CA: PLA
#_0393CB: PHY
#_0393CC: STA.b $28

#_0393CE: LDA.w #$0032
#_0393D1: STA.b $26
#_0393D3: STZ.b $2C
#_0393D5: STZ.b $30
#_0393D7: JSR ROUTINE_0394C6
#_0393DA: PLY
#_0393DB: PLX

CODE_0393DC:
#_0393DC: PHY

#_0393DD: LDA.w #$001E
#_0393E0: STA.b $26
#_0393E2: STZ.b $28
#_0393E4: STZ.b $2C
#_0393E6: STZ.b $30
#_0393E8: JSR ROUTINE_0394C6
#_0393EB: PLY
#_0393EC: JMP CODE_0394C2

CODE_0393EF:
#_0393EF: LDA.w $0180,Y
#_0393F2: CMP.w #$009C
#_0393F5: BNE CODE_0393FE

#_0393F7: JSR ROUTINE_0394D8

#_0393FA: LDA.w #$0000
#_0393FD: RTS

CODE_0393FE:
#_0393FE: LDA.w $0180,Y
#_039401: CMP.w #$0060
#_039404: BCC CODE_039410

#_039406: CMP.w #$0070
#_039409: BCS CODE_039410

#_03940B: JSR ROUTINE_0394D8
#_03940E: BRA CODE_039479

CODE_039410:
#_039410: JMP CODE_03948B

CODE_039413:
#_039413: LDA.w $0180,Y
#_039416: CMP.w #$0060
#_039419: BCC CODE_03948B

#_03941B: CMP.w #$0066
#_03941E: BCC CODE_03942C

#_039420: CMP.w #$006C
#_039423: BCC CODE_03948B

#_039425: CMP.w #$0070
#_039428: BCS CODE_03948B

#_03942A: BRA CODE_03943D

CODE_03942C:
#_03942C: LDA.w $0810,X
#_03942F: CMP.w #$000C
#_039432: BNE CODE_03943D

#_039434: LDA.w $04D0
#_039437: BEQ CODE_039454

CODE_039439:
#_039439: LDA.w #$FFFF
#_03943C: RTS

CODE_03943D:
#_03943D: LDA.w $0810,X
#_039440: CMP.w #$0018
#_039443: BCC CODE_039479

#_039445: CMP.w #$001E
#_039448: BCC CODE_039454

#_03944A: CMP.w #$005C
#_03944D: BCC CODE_039479

#_03944F: CMP.w #$0080
#_039452: BCS CODE_039479

CODE_039454:
#_039454: LDA.w #$FFFF
#_039457: STA.w $0080,Y
#_03945A: PHY
#_03945B: TXA

#_03945C: LDX.w $1F36
#_03945F: CPX.w #$0010
#_039462: BCC CODE_039473

#_039464: CPX.w #$0020
#_039467: BCS CODE_039473

#_039469: JSR ROUTINE_039690

#_03946C: LDA.b $22
#_03946E: BNE CODE_039474

#_039470: PLY
#_039471: BRA CODE_039439

CODE_039473:
#_039473: TAX

CODE_039474:
#_039474: PLY

#_039475: LDA.w #$0000
#_039478: RTS

CODE_039479:
#_039479: LDA.w $0812,X
#_03947C: BNE CODE_03948B

#_03947E: LDA.w #$FFFF
#_039481: STA.w $0080,Y
#_039484: JSR ROUTINE_039598

#_039487: LDA.w #$0000
#_03948A: RTS

CODE_03948B:
#_03948B: LDA.w $0180,Y
#_03948E: CMP.w #$0094
#_039491: BNE CODE_0394C2

#_039493: LDA.w $0800,X
#_039496: AND.w #$FF00
#_039499: CMP.w #$FE00
#_03949C: BEQ CODE_0394C2

#_03949E: LDA.w #$0098
#_0394A1: STA.w $0180,Y
#_0394A4: TXA
#_0394A5: STA.w $0440,Y
#_0394A8: SEC

#_0394A9: LDA.w $0280,Y
#_0394AC: SBC.w $080C,X
#_0394AF: STA.w $0380,Y
#_0394B2: SEC

#_0394B3: LDA.w $02C0,Y
#_0394B6: SBC.w $080E,X
#_0394B9: STA.w $03C0,Y

#_0394BC: LDA.w #$0000
#_0394BF: STA.w $0400,Y

CODE_0394C2:
#_0394C2: LDA.w $0812,X
#_0394C5: RTS

;===================================================================================================

ROUTINE_0394C6:
#_0394C6: LDA.w $0280,Y
#_0394C9: STA.b $20

#_0394CB: LDA.w $02C0,Y
#_0394CE: STA.b $22

#_0394D0: LDA.w #$000E
#_0394D3: STA.b $24
#_0394D5: JMP PrepEnemySpawn

;===================================================================================================

ROUTINE_0394D8:
#_0394D8: JSR ROUTINE_03952F

#_0394DB: LDA.w #$0000
#_0394DE: STZ.w $0814,X
#_0394E1: STA.w $0812,X
#_0394E4: JMP ROUTINE_03960A

;===================================================================================================

ROUTINE_0394E7:
#_0394E7: LDA.w $0300,Y
#_0394EA: BEQ .exit

#_0394EC: LDA.w $0180,Y
#_0394EF: CMP.w #$008E
#_0394F2: BNE CODE_0394F9

#_0394F4: JSR ROUTINE_039525
#_0394F7: BRA CODE_0394FC

CODE_0394F9:
#_0394F9: JSR ROUTINE_03952F

CODE_0394FC:
#_0394FC: SEC

#_0394FD: LDA.w $0812,X
#_039500: SBC.w $0300,Y
#_039503: BCS CODE_039508

#_039505: LDA.w #$0000

CODE_039508:
#_039508: STZ.w $0814,X
#_03950B: STA.w $0812,X
#_03950E: BNE CODE_039516

#_039510: PHY
#_039511: JSR ROUTINE_03960A
#_039514: PLY
#_039515: RTS

CODE_039516:
#_039516: LDA.w #$0053
#_039519: STA.w $04A8
#_03951C: STZ.b $20

#_03951E: LDA.w #$0001
#_039521: JSR AddToScore

.exit
#_039524: RTS

;===================================================================================================

ROUTINE_039525:
#_039525: JSR ROUTINE_039542
#_039528: STZ.b $30

#_03952A: LDA.w #$803C
#_03952D: BRA CODE_039535

;===================================================================================================

ROUTINE_03952F:
#_03952F: JSR ROUTINE_039542

;===================================================================================================

ROUTINE_039532:
#_039532: LDA.w #$0038

CODE_039535:
#_039535: STA.b $26
#_039537: PHY

#_039538: LDA.w #$000C
#_03953B: STA.b $24
#_03953D: JSR PrepEnemySpawn
#_039540: PLY
#_039541: RTS

;===================================================================================================

ROUTINE_039542:
#_039542: LDA.w $0280,Y
#_039545: STA.b $20

#_039547: LDA.w $02C0,Y
#_03954A: STA.b $22

#_03954C: LDA.w $0240,Y
#_03954F: STA.b $30
#_039551: RTS

;===================================================================================================

ROUTINE_039552:
#_039552: STX.b $20

#_039554: LDY.w $18E8
#_039557: BEQ .exit

#_039559: DEY
#_03955A: DEY
#_03955B: PHX
#_03955C: PHY

#_03955D: LDX.w $1800,Y
#_039560: LDY.b $20

#_039562: LDA.w $080C,Y
#_039565: STA.w $0280,X

#_039568: LDA.w $080E,Y
#_03956B: STA.w $02C0,X
#_03956E: PHX
#_03956F: TXA
#_039570: TYX
#_039571: TAY
#_039572: PHY
#_039573: PHX
#_039574: JSR ROUTINE_03A267
#_039577: PLX
#_039578: PLY
#_039579: JSR ROUTINE_03959F
#_03957C: PLX
#_03957D: PLY
#_03957E: BCC CODE_039596

#_039580: STY.w $18E8

#_039583: LDA.w $04B6
#_039586: BNE CODE_03958E

#_039588: LDA.w #$0055
#_03958B: STA.w $04A6

CODE_03958E:
#_03958E: LDY.b $0A
#_039590: STX.b $40,Y
#_039592: INY
#_039593: INY
#_039594: STY.b $0A

CODE_039596:
#_039596: PLX

.exit
#_039597: RTS

;===================================================================================================

ROUTINE_039598:
#_039598: PHY
#_039599: PHX

#_03959A: JSR ROUTINE_03A25D

#_03959D: PLX
#_03959E: PLY

;===================================================================================================

ROUTINE_03959F:
#_03959F: PHY
#_0395A0: PHX

#_0395A1: LDA.w $0810,X
#_0395A4: BPL CODE_0395C3

#_0395A6: CMP.w #$8300
#_0395A9: BCC CODE_0395B7

#_0395AB: SEC
#_0395AC: SBC.w #$8300
#_0395AF: LSR A
#_0395B0: TAX

#_0395B1: LDA.l $7FE400,X
#_0395B5: BRA CODE_0395C9

CODE_0395B7:
#_0395B7: SEC
#_0395B8: SBC.w #$8000
#_0395BB: LSR A
#_0395BC: TAX

#_0395BD: LDA.l $7FE200,X
#_0395C1: BRA CODE_0395C9

CODE_0395C3:
#_0395C3: LSR A
#_0395C4: TAX

#_0395C5: LDA.l $7FE000,X

CODE_0395C9:
#_0395C9: PLX
#_0395CA: AND.w #$00FF
#_0395CD: PLY
#_0395CE: CMP.w #$0000
#_0395D1: BEQ CODE_0395F5

#_0395D3: STA.w $0440,Y

#_0395D6: LDA.l $7E7B1A
#_0395DA: ASL A

#_0395DB: LDA.w #$0080
#_0395DE: BCS CODE_0395E3

#_0395E0: LDA.w #$FF80

CODE_0395E3:
#_0395E3: STA.l $7E7B1A
#_0395E7: CLC
#_0395E8: ADC.b $2C
#_0395EA: STA.w $0400,Y

#_0395ED: LDA.w #$0066
#_0395F0: STA.w $0180,Y
#_0395F3: SEC
#_0395F4: RTS

CODE_0395F5:
#_0395F5: CLC
#_0395F6: RTS

;===================================================================================================

ROUTINE_0395FF_0002:
#_0395F7: LDY.w #$0002
#_0395FA: BRA ROUTINE_0395FF

;===================================================================================================

ROUTINE_0395FF_0001:
#_0395FC: LDY.w #$0001

ROUTINE_0395FF:
#_0395FF: LDA.w #$0000
#_039602: STY.b $20
#_039604: BRA AddToScore

;===================================================================================================

ROUTINE_039606:
#_039606: STZ.b $20
#_039608: BRA AddToScore

;===================================================================================================

ROUTINE_03960A:
#_03960A: LDA.l $7FE802,X
#_03960E: BEQ EXIT_039660

;===================================================================================================

AddToScore_x10:
#_039610: STZ.b $20
#_039612: ASL A
#_039613: ROL.b $20
#_039615: ASL A
#_039616: ROL.b $20
#_039618: ASL A
#_039619: ROL.b $20
#_03961B: ASL A
#_03961C: ROL.b $20

;===================================================================================================

AddToScore:
#_03961E: PHA

#_03961F: JSL ROUTINE_0095C1_long

#_039623: STY.b $34

#_039625: PLA

#_039626: SED
#_039627: CLC
#_039628: ADC.w $05B6
#_03962B: STA.w $05B6

#_03962E: LDA.w $05B8
#_039631: ADC.b $20
#_039633: CMP.w #$0999
#_039636: BCC .not_max_points

#_039638: LDA.w #$9990
#_03963B: STA.w $05B6

#_03963E: LDA.w #$0999

.not_max_points
#_039641: STA.w $05B8

#_039644: CLD
#_039645: JSL ROUTINE_0095C1_long

#_039649: CPY.b $34
#_03964B: BEQ EXIT_039660

#_03964D: BCC EXIT_039660

#_03964F: LDA.w $19F4
#_039652: CMP.w #$0005
#_039655: BCS EXIT_039660

#_039657: INC.w $19F4

#_03965A: LDA.w #$0010
#_03965D: STA.w $04A4

;---------------------------------------------------------------------------------------------------

#EXIT_039660:
#_039660: RTS

;===================================================================================================

#_039661: LDA.w #$0020

;===================================================================================================

ROUTINE_039664:
#_039664: STA.b $24
#_039666: STZ.b $22

#_039668: LDA.w UNREACH_039E73,Y
#_03966B: ADC.w $080C,X
#_03966E: CMP.b $14
#_039670: BCS .exit

#_039672: ADC.w UNREACH_039E77,Y
#_039675: CMP.b $10
#_039677: BCC .exit

#_039679: LDA.w UNREACH_039E75,Y
#_03967C: ADC.w $080E,X
#_03967F: ADC.w $080A,X
#_039682: CMP.b $16
#_039684: BCS .exit

#_039686: ADC.w UNREACH_039E79,Y
#_039689: CMP.b $12
#_03968B: BCC .exit

#_03968D: TXA

#_03968E: LDX.b $24

;===================================================================================================

#ROUTINE_039690:
#_039690: JSR (.vectors,X)

#_039693: INC.b $22

.exit
#_039695: RTS

.vectors
#_039696: dw SpriteCollision_Nothing              ; 00
#_039698: dw SpriteCollision_ShopDoor             ; 02
#_03969A: dw SpriteCollision_Nothing              ; 04
#_03969C: dw ROUTINE_039BA2                       ; 06
#_03969E: dw SpriteCollision_Door                 ; 08
#_0396A0: dw SpriteCollision_Power                ; 0A
#_0396A2: dw SpriteCollision_Chest                ; 0C
#_0396A4: dw SpriteCollision_Present              ; 0E
#_0396A6: dw SpriteCollision_10Coins              ; 10
#_0396A8: dw SpriteCollision_30Coins              ; 12
#_0396AA: dw SpriteCollision_Key                  ; 14
#_0396AC: dw SpriteCollision_Robe                 ; 16
#_0396AE: dw SpriteCollision_Charm                ; 18
#_0396B0: dw SpriteCollision_Ears                 ; 1A
#_0396B2: dw SpriteCollision_PartnerChange        ; 1C
#_0396B4: dw SpriteCollision_Power                ; 1E
#_0396B6: dw SpriteCollision_EnemyDamage          ; 20
#_0396B8: dw SpriteCollision_Projectile           ; 22
#_0396BA: dw ROUTINE_0397B6                       ; 24
#_0396BC: dw SpriteCollision_Projectile           ; 26
#_0396BE: dw SpriteCollision_EnemyHug             ; 28
#_0396C0: dw ROUTINE_039783                       ; 2A

;===================================================================================================

ROUTINE_0396C2:
#_0396C2: STA.b $2C

#_0396C4: LDA.w #$00AE
#_0396C7: STA.b $26

ROUTINE_0396C9:
#_0396C9: LDA.w $080C,X
#_0396CC: STA.b $20

#_0396CE: LDA.w $080E,X
#_0396D1: STA.b $22

;===================================================================================================

ROUTINE_0396D3:
#_0396D3: LDA.w $080A,X
#_0396D6: STA.b $30

#_0396D8: LDA.w #$000E
#_0396DB: STA.b $24
#_0396DD: JMP PrepEnemySpawn

;===================================================================================================

ROUTINE_0396E3_00D6:
#_0396E0: LDA.w #$00D6

;===================================================================================================

ROUTINE_0396E3:
#_0396E3: PHB
#_0396E4: PHK
#_0396E5: PLB

#_0396E6: STA.b $26

#_0396E8: LDA.w #$000C
#_0396EB: STA.b $24

#_0396ED: JSR PrepEnemySpawn

#_0396F0: PLB
#_0396F1: RTL

;===================================================================================================

ROUTINE_0396E3_00DC:
#_0396F2: LDA.w #$00DC
#_0396F5: BRA ROUTINE_0396E3

;===================================================================================================

ROUTINE_0396E3_00E8:
#_0396F7: LDA.w #$00E8
#_0396FA: BRA ROUTINE_0396E3

;===================================================================================================

ROUTINE_0396E3_00E2:
#_0396FC: LDA.w #$00E2
#_0396FF: BRA ROUTINE_0396E3

;===================================================================================================

ROUTINE_0396E3_00EE:
#_039701: LDA.w #$00EE
#_039704: BRA ROUTINE_0396E3

;===================================================================================================

ROUTINE_03970E_long:
#_039706: PHB
#_039707: PHK
#_039708: PLB

#_039709: JSR ROUTINE_03970E

#_03970C: PLB
#_03970D: RTL

;===================================================================================================

ROUTINE_03970E:
#_03970E: LDA.w $1F68
#_039711: BEQ CODE_039716

#_039713: JMP CODE_039772

CODE_039716:
#_039716: JSR AreWeOnLevel1
#_039719: BNE CODE_039729

#_03971B: LDA.w #$000E
#_03971E: STA.w $19CE

#_039721: LDA.w #$0007
#_039724: STA.w $04A4
#_039727: BRA CODE_039752

CODE_039729:
#_039729: JSR ROUTINE_039774
#_03972C: CMP.w #$00FF
#_03972F: BEQ CODE_039772

#_039731: STA.w $19CE
#_039734: CMP.w #$0010
#_039737: BNE CODE_039741

#_039739: LDA.w #$0008
#_03973C: STA.w $04A2
#_03973F: BRA CODE_039747

CODE_039741:
#_039741: LDA.w #$0007
#_039744: STA.w $04A4

CODE_039747:
#_039747: LDA.w $19F6
#_03974A: BEQ CODE_03974F

#_03974C: DEC.w $19F6

CODE_03974F:
#_03974F: DEC.w $19F2

CODE_039752:
#_039752: STX.w $0570

#_039755: LDA.w #$0001
#_039758: STA.w $0572
#_03975B: STZ.w $19E2
#_03975E: JSR ROUTINE_03A295

#_039761: LDA.b $2C
#_039763: STA.w $0578
#_039766: STZ.w $19D4
#_039769: STZ.w $19D6
#_03976C: JSL ROUTINE_04F92E_long
#_039770: SEC
#_039771: RTS

CODE_039772:
#_039772: CLC
#_039773: RTS

;===================================================================================================

ROUTINE_039774:
#_039774: PHX

#_039775: LDA.w $19CE
#_039778: LSR A
#_039779: TAX

#_03977A: LDA.l UNREACH_09FC02,X
#_03977E: AND.w #$00FF
#_039781: PLX
#_039782: RTS

;===================================================================================================

ROUTINE_039783:
#_039783: TAX

#_039784: LDA.w #$0001
#_039787: STA.w $0816,X
#_03978A: RTS

;===================================================================================================

SpriteCollision_EnemyHug:
#_03978B: TAX

#_03978C: LDA.w #$019A
#_03978F: CMP.w $0810,X
#_039792: BEQ .exit

#_039794: STA.w $0810,X
#_039797: JSR Reset_0818_through_081F
#_03979A: STZ.w $080A,X
#_03979D: STZ.w $0816,X

.exit
#_0397A0: RTS

;===================================================================================================

SpriteCollision_ShopDoor:
#_0397A1: TAX

;===================================================================================================

TriggerDoorSprite:
#_0397A2: LDA.w #$0001
#_0397A5: STA.w $081E,X

#_0397A8: RTS

;===================================================================================================

SpriteCollision_Door:
#_0397A9: TAX

#_0397AA: LDA.w $19CE
#_0397AD: CMP.w #$00BA
#_0397B0: BEQ .exit

#_0397B2: JSR TriggerDoorSprite

.exit
#_0397B5: RTS

;===================================================================================================

ROUTINE_0397B6:
#_0397B6: TAX

;===================================================================================================

ROUTINE_0397B7:
#_0397B7: STZ.b $24
#_0397B9: STZ.b $26

#_0397BB: LDA.w UNREACH_039E73,Y
#_0397BE: ADC.w $080C,X
#_0397C1: CMP.b $14
#_0397C3: BCS CODE_039810

#_0397C5: STA.b $20
#_0397C7: ADC.w UNREACH_039E77,Y
#_0397CA: CMP.b $10
#_0397CC: BCC CODE_039810

#_0397CE: STA.b $22

#_0397D0: LDA.b $20
#_0397D2: SBC.b $10
#_0397D4: BCC CODE_0397E4

#_0397D6: LDA.b $14
#_0397D8: SBC.b $20
#_0397DA: BCC .exit_a

#_0397DC: ADC.w #$001F
#_0397DF: STA.b $28
#_0397E1: BRA CODE_0397F5

.exit_a
#_0397E3: RTS

CODE_0397E4:
#_0397E4: LDA.b $22
#_0397E6: SBC.b $10
#_0397E8: BCC .exit_b

#_0397EA: BEQ CODE_0397F5

#_0397EC: ADC.w #$001F
#_0397EF: STA.b $28
#_0397F1: EOR.w #$FFFF
#_0397F4: INC A

CODE_0397F5:
#_0397F5: STA.b $24
#_0397F7: STZ.b $2E

#_0397F9: LDA.b $28
#_0397FB: CMP.w #$0040

#_0397FE: LDA.b $24
#_039800: BCC CODE_03980E

#_039802: INC.b $2E

#_039804: LDA.w #$0010
#_039807: ASL.b $24
#_039809: BCC CODE_03980E

#_03980B: LDA.w #$FFF0

CODE_03980E:
#_03980E: STA.b $24

CODE_039810:
#_039810: LDA.w UNREACH_039E75,Y
#_039813: ADC.w $080E,X
#_039816: ADC.w $080A,X
#_039819: CMP.b $16
#_03981B: BCS CODE_039868

#_03981D: STA.b $20
#_03981F: ADC.w UNREACH_039E79,Y
#_039822: CMP.b $12
#_039824: BCC CODE_039868

#_039826: STA.b $22

#_039828: LDA.b $20
#_03982A: SBC.b $12
#_03982C: BCC CODE_03983C

#_03982E: LDA.b $16
#_039830: SBC.b $20
#_039832: BCC .exit_b

#_039834: ADC.w #$001F
#_039837: STA.b $2A
#_039839: BRA CODE_03984D

.exit_b
#_03983B: RTS

CODE_03983C:
#_03983C: LDA.b $22
#_03983E: SBC.b $12
#_039840: BCC .exit_b

#_039842: BEQ CODE_03984D

#_039844: ADC.w #$001F
#_039847: STA.b $2A
#_039849: EOR.w #$FFFF
#_03984C: INC A

CODE_03984D:
#_03984D: STA.b $26
#_03984F: STZ.b $30

#_039851: LDA.b $2A
#_039853: CMP.w #$0040

#_039856: LDA.b $26
#_039858: BCC CODE_039866

#_03985A: INC.b $30

#_03985C: LDA.w #$0010
#_03985F: ASL.b $26
#_039861: BCC CODE_039866

#_039863: LDA.w #$FFF0

CODE_039866:
#_039866: STA.b $26

CODE_039868:
#_039868: LDA.b $28
#_03986A: CMP.b $2A
#_03986C: BCC CODE_039878

#_03986E: JSR .routine_039881

#_039871: LDA.b $26
#_039873: STA.w $081E,X
#_039876: BRA .exit_c

CODE_039878:
#_039878: JSR .routine_039881

#_03987B: LDA.b $24
#_03987D: STA.w $081C,X

.exit_c
#_039880: RTS

;===================================================================================================

.routine_039881
#_039881: LDY.w $18E0
#_039884: CPY.w #$0010
#_039887: BEQ .exit

#_039889: TXA
#_03988A: STA.w $18D0,Y
#_03988D: INY
#_03988E: INY
#_03988F: STY.w $18E0
#_039892: RTS

;===================================================================================================

SpriteCollision_Power:
#_039893: TAX
#_039894: JSR ROUTINE_03995F
#_039897: BNE CODE_0398A1

#_039899: LDA.w $19F6
#_03989C: CMP.w #$0002
#_03989F: BNE CODE_0398B8

CODE_0398A1:
#_0398A1: STZ.b $20

#_0398A3: LDA.w #$0100
#_0398A6: JSR AddToScore_x10

#_0398A9: LDA.w #$0000
#_0398AC: JSR ROUTINE_0396C2

#_0398AF: LDA.w #$000C
#_0398B2: STA.w $04A8
#_0398B5: JMP ROUTINE_0399ED

CODE_0398B8:
#_0398B8: BCS CODE_0398C4

#_0398BA: INC A
#_0398BB: STA.w $19F6

#_0398BE: LDA.w #$0120
#_0398C1: JSR ROUTINE_0396C2

CODE_0398C4:
#_0398C4: STZ.b $30
#_0398C6: JSR ROUTINE_0391AD

#_0398C9: LDA.w #$000D
#_0398CC: STA.w $04A8
#_0398CF: JMP ROUTINE_0399ED

;===================================================================================================

SpriteCollision_Chest:
#_0398D2: TAX
#_0398D3: JSR ROUTINE_0397B7
#_0398D6: JSR ROUTINE_03993F
#_0398D9: BNE CODE_03990E

#_0398DB: LDA.w $05B2
#_0398DE: BNE CODE_03990E

#_0398E0: LDA.l $7E7B02
#_0398E4: AND.w #$0002
#_0398E7: BNE .exit

#_0398E9: LDA.l $7E7B02
#_0398ED: ORA.w #$0002
#_0398F0: STA.l $7E7B02
#_0398F4: CLC

#_0398F5: LDA.w $19EE
#_0398F8: ADC.w #$0080
#_0398FB: STA.b $20
#_0398FD: SEC

#_0398FE: LDA.w $19F0
#_039901: SBC.w #$0200
#_039904: STA.b $22
#_039906: STZ.b $30
#_039908: JSL ROUTINE_0396E3_00E2
#_03990C: BRA .exit

CODE_03990E:
#_03990E: JSR ROUTINE_03992B
#_039911: BCS .exit

#_039913: LDA.w #$004A
#_039916: STA.w $0810,X
#_039919: JSR ROUTINE_03993F
#_03991C: BNE .exit

#_03991E: LDA.w $05B2
#_039921: SED
#_039922: SEC
#_039923: SBC.w #$0001
#_039926: STA.w $05B2
#_039929: CLD

.exit
#_03992A: RTS

;===================================================================================================

ROUTINE_03992B:
#_03992B: LDA.w $080C,X
#_03992E: STA.b $20

#_039930: LDA.w $080E,X
#_039933: STA.b $22
#_039935: STX.b $26

#_039937: LDA.w #$000A
#_03993A: STA.b $24
#_03993C: JMP PrepEnemySpawn

;===================================================================================================

ROUTINE_03993F:
#_03993F: LDY.w #$0000

#_039942: LDA.w $19CE
#_039945: CMP.w #$00A4
#_039948: BCC CODE_03995D

#_03994A: CMP.w #$00B0
#_03994D: BCS CODE_03995D

#_03994F: LDA.w $05CE
#_039952: CMP.w #$000E
#_039955: BCC CODE_03995D

#_039957: CMP.w #$0018
#_03995A: BCS CODE_03995D

#_03995C: INY

CODE_03995D:
#_03995D: TYA
#_03995E: RTS

;===================================================================================================

ROUTINE_03995F:
#_03995F: LDY.w #$0000

#_039962: LDA.w $19CE
#_039965: CMP.w #$00A4
#_039968: BCC CODE_039970

#_03996A: CMP.w #$00B0
#_03996D: BCS CODE_039970

#_03996F: INY

CODE_039970:
#_039970: TYA
#_039971: RTS

;===================================================================================================

SpriteCollision_Present:
#_039972: TAX
#_039973: JSR ROUTINE_0397B7

#_039976: LDA.w $081A,X
#_039979: BPL CODE_03998B

#_03997B: JSR AreWeOnLevel5
#_03997E: BNE CODE_039985

#_039980: LDA.w #$0001
#_039983: BRA CODE_039988

CODE_039985:
#_039985: LDA.w #$0020

CODE_039988:
#_039988: STA.w $081A,X

CODE_03998B:
#_03998B: JMP ROUTINE_0399ED

;===================================================================================================

SpriteCollision_10Coins:
#_03998E: TAX
#_03998F: CLC

#_039990: LDA.w $080A,X
#_039993: ADC.w #$0200
#_039996: BPL CODE_03999B

#_039998: DEC.b $22

#_03999A: RTS

CODE_03999B:
#_03999B: LDA.w #$0080
#_03999E: JSR ROUTINE_0396C2

#_0399A1: STZ.b $30

#_0399A3: JSR ROUTINE_0391AD

#_0399A6: LDA.w #$000F
#_0399A9: STA.w $04A8

#_0399AC: LDA.w #$0010
#_0399AF: BRA GivePockyCoins

;===================================================================================================

SpriteCollision_30Coins:
#_0399B1: TAX
#_0399B2: CLC

#_0399B3: LDA.w $080A,X
#_0399B6: ADC.w #$0200
#_0399B9: BPL CODE_0399BE

#_0399BB: DEC.b $22

#_0399BD: RTS

CODE_0399BE:
#_0399BE: LDA.w #$00A0
#_0399C1: JSR ROUTINE_0396C2

#_0399C4: STZ.b $30

#_0399C6: JSR ROUTINE_0391AD

#_0399C9: LDA.w #$000F
#_0399CC: STA.w $04A8

#_0399CF: LDA.w #$0030

;===================================================================================================

GivePockyCoins:
#_0399D2: SED
#_0399D3: CLC

#_0399D4: ADC.w $05B0

#_0399D7: CLD
#_0399D8: BCC .under_10000

#_0399DA: LDA.w #$9999

.under_10000
#_0399DD: STA.w $05B0

#_0399E0: JSR ROUTINE_03883A

#_0399E3: LDA.l $7E7A6A
#_0399E7: BEQ ROUTINE_0399ED

#_0399E9: STA.l $7E7A70

;===================================================================================================

ROUTINE_0399ED:
#_0399ED: LDA.w #$0003
#_0399F0: STA.w $0572

#_0399F3: LDA.w #$0000
#_0399F6: STA.w $0578

#_0399F9: RTS

;===================================================================================================

SpriteCollision_Key:
#_0399FA: TAX

#_0399FB: LDA.w #$0001
#_0399FE: SED
#_0399FF: CLC
#_039A00: ADC.w $05B2

#_039A03: CLD

#_039A04: CMP.w #$0100
#_039A07: BCC .not_maxed

#_039A09: LDA.w #$0060
#_039A0C: JSR ROUTINE_0396C2

#_039A0F: LDA.w #$0099
#_039A12: STA.w $05B2

#_039A15: BRA CODE_039A25

.not_maxed
#_039A17: STA.w $05B2

#_039A1A: LDA.w #$00C0
#_039A1D: JSR ROUTINE_0396C2
#_039A20: STZ.b $30
#_039A22: JSR ROUTINE_0391AD

CODE_039A25:
#_039A25: LDA.w #$000D
#_039A28: STA.w $04A8

#_039A2B: JMP ROUTINE_0399ED

;===================================================================================================

SpriteCollision_Robe:
#_039A2E: TAX
#_039A2F: JSR AreWeOnLevel5
#_039A32: BNE CODE_039A47

#_039A34: LDA.w $19F2
#_039A37: CMP.w #$0003
#_039A3A: BCC CODE_039A41

#_039A3C: JSR ROUTINE_039B92
#_039A3F: BRA CODE_039A44

CODE_039A41:
#_039A41: INC.w $19F2

CODE_039A44:
#_039A44: JMP CODE_039B84

CODE_039A47:
#_039A47: LDA.w $19CE
#_039A4A: LSR A
#_039A4B: PHX
#_039A4C: TAX

#_039A4D: LDA.l UNREACH_04FCF5,X
#_039A51: PLX
#_039A52: AND.w #$00FF
#_039A55: JMP CODE_039B55

;===================================================================================================

SpriteCollision_Charm:
#_039A58: TAX
#_039A59: JSR AreWeOnLevel5
#_039A5C: BNE CODE_039A74

#_039A5E: LDA.w $19F2
#_039A61: CMP.w #$0003
#_039A64: BCC CODE_039A6B

#_039A66: JSR ROUTINE_039B92
#_039A69: BRA CODE_039A71

CODE_039A6B:
#_039A6B: LDA.w #$0003
#_039A6E: STA.w $19F2

CODE_039A71:
#_039A71: JMP CODE_039B84

CODE_039A74:
#_039A74: LDA.w $19CE
#_039A77: LSR A
#_039A78: PHX
#_039A79: TAX

#_039A7A: LDA.l UNREACH_04FD4D,X
#_039A7E: PLX
#_039A7F: JMP CODE_039B55

;===================================================================================================

SpriteCollision_PartnerChange:
#_039A82: TAX
#_039A83: JSR ROUTINE_038567
#_039A86: BNE CODE_039AA0

#_039A88: LDA.w $04D0
#_039A8B: BNE CODE_039AA0

#_039A8D: LDA.l $7E7A26
#_039A91: BNE CODE_039AA0

#_039A93: LDA.w $19CE
#_039A96: CMP.w #$008C
#_039A99: BCC CODE_039AA8

#_039A9B: CMP.w #$00B0
#_039A9E: BCS CODE_039AA8

CODE_039AA0:
#_039AA0: LDA.w #$FFFF
#_039AA3: STA.b $22
#_039AA5: JMP ROUTINE_0399ED

CODE_039AA8:
#_039AA8: PHX

#_039AA9: LDA.w $05CE
#_039AAC: LSR A
#_039AAD: TAX

#_039AAE: LDA.l $7FFC00,X
#_039AB2: PLX
#_039AB3: AND.w #$00FF
#_039AB6: CMP.w #$00FF
#_039AB9: BEQ CODE_039AA0

#_039ABB: STA.b $20

#_039ABD: LDY.w $19A8
#_039AC0: CPY.b $20
#_039AC2: BNE CODE_039AD3

#_039AC4: JSR ROUTINE_039B94

#_039AC7: LDA.w #$000C
#_039ACA: STA.w $04AA
#_039ACD: STZ.w $0812,X
#_039AD0: JMP ROUTINE_0399ED

CODE_039AD3:
#_039AD3: TYA
#_039AD4: ASL A
#_039AD5: TAY
#_039AD6: PHX
#_039AD7: PHY

#_039AD8: LDX.w UNREACH_039AFE,Y
#_039ADB: JSL ROUTINE_01AC9D_long
#_039ADF: PLY

#_039AE0: LDA.w #$FFFF
#_039AE3: STA.w $18EC
#_039AE6: JSL ROUTINE_00D746_long
#_039AEA: PLX

#_039AEB: LDA.w #$0148
#_039AEE: STA.w $05CE
#_039AF1: PHX
#_039AF2: JSL ROUTINE_01A8FF_long
#_039AF6: JSL ROUTINE_00DF9D_long
#_039AFA: PLX
#_039AFB: JMP ROUTINE_0399ED

UNREACH_039AFE:
#_039AFE: db $10,$00,$02,$00,$06,$00,$04,$00
#_039B06: db $08,$00,$0A,$00,$0C,$00

;===================================================================================================

SpriteCollision_Ears:
#_039B0C: TAX

#_039B0D: LDA.w $19CE
#_039B10: LSR A
#_039B11: PHX
#_039B12: TAX

#_039B13: LDA.l UNREACH_04FDA5,X
#_039B17: PLX
#_039B18: AND.w #$00FF
#_039B1B: BNE CODE_039B2A

#_039B1D: JSR ROUTINE_03995F
#_039B20: BNE CODE_039B2F

#_039B22: LDA.w #$FFFF
#_039B25: STA.b $22
#_039B27: STZ.b $20
#_039B29: RTS

CODE_039B2A:
#_039B2A: CMP.w #$00FF
#_039B2D: BNE CODE_039B3F

CODE_039B2F:
#_039B2F: STZ.b $20

#_039B31: LDA.w #$0500
#_039B34: JSR AddToScore_x10

#_039B37: LDA.w #$0040
#_039B3A: JSR ROUTINE_0396C2
#_039B3D: BRA CODE_039B4C

CODE_039B3F:
#_039B3F: STA.w $19CE
#_039B42: JSL ROUTINE_04F92E_long

#_039B46: LDA.w #$00E0
#_039B49: JSR ROUTINE_0396C2

CODE_039B4C:
#_039B4C: LDA.w #$000D
#_039B4F: STA.w $04A8
#_039B52: JMP ROUTINE_0399ED

CODE_039B55:
#_039B55: AND.w #$00FF
#_039B58: BNE CODE_039B67

#_039B5A: JSR ROUTINE_03995F
#_039B5D: BNE CODE_039B6C

#_039B5F: LDA.w #$FFFF
#_039B62: STA.b $22
#_039B64: STZ.b $20
#_039B66: RTS

CODE_039B67:
#_039B67: CMP.w #$00FF
#_039B6A: BNE CODE_039B77

CODE_039B6C:
#_039B6C: LDA.w #$000C
#_039B6F: STA.w $04A8
#_039B72: JSR ROUTINE_039B92
#_039B75: BRA CODE_039B84

CODE_039B77:
#_039B77: STA.w $19CE
#_039B7A: JSL ROUTINE_04F92E_long

#_039B7E: LDA.w #$0100
#_039B81: JSR ROUTINE_0396C2

CODE_039B84:
#_039B84: STZ.b $30
#_039B86: JSR ROUTINE_0391AD

#_039B89: LDA.w #$000D
#_039B8C: STA.w $04A8
#_039B8F: JMP ROUTINE_0399ED

;===================================================================================================

ROUTINE_039B92:
#_039B92: STZ.b $20

;===================================================================================================

ROUTINE_039B94:
#_039B94: LDA.w #$0300
#_039B97: JSR AddToScore_x10

#_039B9A: LDA.w #$0020
#_039B9D: JMP ROUTINE_0396C2

;===================================================================================================

SpriteCollision_Nothing:
#_039BA0: TAX
#_039BA1: RTS

;===================================================================================================

ROUTINE_039BA2:
#_039BA2: TAX

#_039BA3: STZ.w $081E,X

#_039BA6: LDA.w $0572
#_039BA9: BNE .exit

#_039BAB: LDA.w #$0001
#_039BAE: STA.w $0572
#_039BB1: STA.w $081E,X

#_039BB4: JMP ROUTINE_0399ED

.exit
#_039BB7: RTS

;===================================================================================================

SpriteCollision_EnemyDamage:
#_039BB8: TAX

#_039BB9: LDA.w $0572
#_039BBC: BNE .exit

#_039BBE: LDA.w $19E2
#_039BC1: CMP.w #$0080
#_039BC4: BCC .exit

#_039BC6: LDA.w $19F2
#_039BC9: BEQ .exit

#_039BCB: JSR ROUTINE_03970E

.exit
#_039BCE: RTS

;===================================================================================================

SpriteCollision_Projectile:
#_039BCF: TAX

#_039BD0: LDA.w $0572
#_039BD3: BEQ CODE_039BDB

CODE_039BD5:
#_039BD5: LDA.w #$FFFF
#_039BD8: STA.b $22
#_039BDA: RTS

;---------------------------------------------------------------------------------------------------

CODE_039BDB:
#_039BDB: LDA.w $19E2
#_039BDE: CMP.w #$0080
#_039BE1: BCC CODE_039BEB

#_039BE3: LDA.w $19F2
#_039BE6: BEQ CODE_039BD5

#_039BE8: JSR ROUTINE_03970E

CODE_039BEB:
#_039BEB: LDA.w $0812,X
#_039BEE: BEQ CODE_039BF8

#_039BF0: CMP.w #$FFFF
#_039BF3: BEQ CODE_039BF8

#_039BF5: DEC A
#_039BF6: BNE CODE_039C23

CODE_039BF8:
#_039BF8: LDA.w $080C,X
#_039BFB: STA.b $20

#_039BFD: LDA.w $080E,X
#_039C00: STA.b $22

#_039C02: LDA.w $080A,X
#_039C05: STA.b $30
#_039C07: JSR ROUTINE_039532

#_039C0A: LDA.w $0810,Y
#_039C0D: CMP.w #$802E
#_039C10: BNE CODE_039C18

#_039C12: LDA.w #$0054
#_039C15: STA.w $04A6

CODE_039C18:
#_039C18: LDA.w #$0004
#_039C1B: STA.w $0810,X
#_039C1E: STZ.w $0812,X
#_039C21: BRA .exit

CODE_039C23:
#_039C23: STA.w $0812,X

#_039C26: LDA.w #$0053
#_039C29: STA.w $04A8

.exit
#_039C2C: RTS

;===================================================================================================

ROUTINE_039C2D:
#_039C2D: STA.b $24
#_039C2F: STZ.b $22

#_039C31: LDA.w UNREACH_039E73,Y
#_039C34: ADC.w $080C,X
#_039C37: CMP.b $1C
#_039C39: BCS .exit

#_039C3B: ADC.w UNREACH_039E77,Y
#_039C3E: CMP.b $18
#_039C40: BCC .exit

#_039C42: LDA.w UNREACH_039E75,Y
#_039C45: ADC.w $080E,X
#_039C48: ADC.w $080A,X
#_039C4B: CMP.b $1E
#_039C4D: BCS .exit

#_039C4F: ADC.w UNREACH_039E79,Y
#_039C52: CMP.b $1A
#_039C54: BCC .exit

#_039C56: TXA

#_039C57: LDX.b $24
#_039C59: JSR (.vectors,X)
#_039C5C: INC.b $22

.exit
#_039C5E: RTS

.vectors
#_039C5F: dw ROUTINE_039D37
#_039C61: dw ROUTINE_039D37
#_039C63: dw ROUTINE_039D37
#_039C65: dw ROUTINE_039D37
#_039C67: dw ROUTINE_039D37
#_039C69: dw ROUTINE_039D37
#_039C6B: dw ROUTINE_039D37
#_039C6D: dw ROUTINE_039D37
#_039C6F: dw SpriteCollision_10Coins
#_039C71: dw SpriteCollision_30Coins
#_039C73: dw SpriteCollision_Key
#_039C75: dw ROUTINE_039D37
#_039C77: dw ROUTINE_039D37
#_039C79: dw ROUTINE_039D37
#_039C7B: dw SpriteCollision_PartnerChange
#_039C7D: dw ROUTINE_039D37
#_039C7F: dw ROUTINE_039D4D
#_039C81: dw ROUTINE_039D7F
#_039C83: dw ROUTINE_039D37
#_039C85: dw ROUTINE_039D16
#_039C87: dw ROUTINE_039D39
#_039C89: dw ROUTINE_039D37

;===================================================================================================

ROUTINE_039C8B:
#_039C8B: STZ.w $0814,X

#_039C8E: LDA.w $1F68
#_039C91: BNE CODE_039CA0

#_039C93: LDA.w $05EA
#_039C96: BEQ CODE_039CA0

#_039C98: DEC.w $05EA
#_039C9B: BPL CODE_039CA0

#_039C9D: STZ.w $05EA

CODE_039CA0:
#_039CA0: STZ.w $05E4
#_039CA3: STX.w $0580

#_039CA6: LDA.w #$0001
#_039CA9: STA.w $0582

#_039CAC: LDA.w #$0000
#_039CAF: STA.w $0588
#_039CB2: RTS

;===================================================================================================

ROUTINE_039CB3:
#_039CB3: LDA.w $05CE
#_039CB6: CMP.w #$0002
#_039CB9: BNE CODE_039D12

#_039CBB: SEC

#_039CBC: LDA.w $05EE
#_039CBF: SBC.w $059E
#_039CC2: BCS CODE_039CC8

#_039CC4: EOR.w #$FFFF
#_039CC7: INC A

CODE_039CC8:
#_039CC8: CMP.w #$0280
#_039CCB: BCS CODE_039D12

#_039CCD: LDA.w $080C,X
#_039CD0: SBC.w $05E6
#_039CD3: BCS CODE_039CD9

#_039CD5: EOR.w #$FFFF
#_039CD8: INC A

CODE_039CD9:
#_039CD9: STA.b $20

#_039CDB: LDA.w $080E,X
#_039CDE: SBC.w $05E8
#_039CE1: BCS CODE_039CE7

#_039CE3: EOR.w #$FFFF
#_039CE6: INC A

CODE_039CE7:
#_039CE7: ADC.b $20
#_039CE9: LSR A
#_039CEA: CMP.w #$0400
#_039CED: BCS CODE_039D12

#_039CEF: PHX
#_039CF0: JSR ROUTINE_03A289

#_039CF3: LDA.b $2C
#_039CF5: ADC.w #$0100
#_039CF8: ASL A
#_039CF9: STA.b $2C

#_039CFB: LDA.b $2D
#_039CFD: EOR.w #$0004
#_039D00: AND.w #$0007
#_039D03: STA.w $05CC
#_039D06: JSL ROUTINE_01E117

#_039D0A: LDA.w #$0001
#_039D0D: STA.w $0582
#_039D10: PLX
#_039D11: RTS

CODE_039D12:
#_039D12: LDA.w #$0000
#_039D15: RTS

;===================================================================================================

ROUTINE_039D16:
#_039D16: TAX

#_039D17: JSR ROUTINE_039D6E
#_039D1A: BCS .exit

#_039D1C: JSR ROUTINE_039CB3
#_039D1F: BNE .exit

#_039D21: LDA.w $0582
#_039D24: BNE .exit

#_039D26: JSR ROUTINE_039D9E
#_039D29: BCS .exit

#_039D2B: LDA.w $05E4
#_039D2E: CMP.w #$0040
#_039D31: BCC .exit

#_039D33: JSR ROUTINE_039C8B

.exit
#_039D36: RTS

;===================================================================================================

ROUTINE_039D37:
#_039D37: TAX
#_039D38: RTS

;===================================================================================================

ROUTINE_039D39:
#_039D39: TAX
#_039D3A: JSR ROUTINE_039D6E
#_039D3D: BCS CODE_039D4A

#_039D3F: LDA.w $0582
#_039D42: BNE .exit

#_039D44: LDA.w $0582
#_039D47: BNE CODE_039D4A

.exit
#_039D49: RTS

CODE_039D4A:
#_039D4A: JMP ROUTINE_039CB3

;===================================================================================================

ROUTINE_039D4D:
#_039D4D: TAX
#_039D4E: JSR ROUTINE_039CB3
#_039D51: BNE .exit

#_039D53: JSR ROUTINE_039D6E
#_039D56: BCS .exit

#_039D58: JSR ROUTINE_039D9E
#_039D5B: BCS .exit

#_039D5D: LDA.w $0582
#_039D60: BNE .exit

#_039D62: LDA.w $05E4
#_039D65: CMP.w #$0040
#_039D68: BCC .exit

#_039D6A: JSR ROUTINE_039C8B

.exit
#_039D6D: RTS

;===================================================================================================

ROUTINE_039D6E:
#_039D6E: LDA.w $19CE
#_039D71: CMP.w #$003C
#_039D74: BCC CODE_039D7D

#_039D76: CMP.w #$0056
#_039D79: BCS CODE_039D7D

#_039D7B: SEC
#_039D7C: RTS

CODE_039D7D:
#_039D7D: CLC
#_039D7E: RTS

;===================================================================================================

ROUTINE_039D7F:
#_039D7F: TAX
#_039D80: JSR ROUTINE_039CB3
#_039D83: BNE .exit

#_039D85: JSR ROUTINE_039D6E
#_039D88: BCS .exit

#_039D8A: LDA.w $0582
#_039D8D: BNE .exit

#_039D8F: LDA.w $05E4
#_039D92: CMP.w #$0010
#_039D95: BCC CODE_039D9A

#_039D97: JSR ROUTINE_039C8B

CODE_039D9A:
#_039D9A: JMP CODE_039BEB

.exit
#_039D9D: RTS

;===================================================================================================

ROUTINE_039D9E:
#_039D9E: LDA.w $05CE
#_039DA1: CMP.w #$001E
#_039DA4: BEQ CODE_039DC6

#_039DA6: CMP.w #$007E
#_039DA9: BEQ CODE_039DC6

#_039DAB: CMP.w #$005E
#_039DAE: BEQ CODE_039DC6

#_039DB0: CMP.w #$009E
#_039DB3: BEQ CODE_039DC6

#_039DB5: CMP.w #$003E
#_039DB8: BEQ CODE_039DC6

#_039DBA: CMP.w #$00BE
#_039DBD: BEQ CODE_039DC6

#_039DBF: CMP.w #$00FE
#_039DC2: BEQ CODE_039DC6

#_039DC4: CLC
#_039DC5: RTS

CODE_039DC6:
#_039DC6: LDA.w $0800,X
#_039DC9: AND.w #$FF00
#_039DCC: CMP.w #$FE00
#_039DCF: BEQ CODE_039DDE

#_039DD1: LDA.w $0812,X
#_039DD4: CMP.w #$F000
#_039DD7: BCS CODE_039DDE

#_039DD9: CMP.w #$0008
#_039DDC: BCS CODE_039DE0

CODE_039DDE:
#_039DDE: CLC
#_039DDF: RTS

CODE_039DE0:
#_039DE0: LDA.w $05CE
#_039DE3: CMP.w #$00FE
#_039DE6: BNE CODE_039E24

#_039DE8: JSR AreWeOnLevel1
#_039DEB: BNE CODE_039E24

#_039DED: LDA.w #$0080
#_039DF0: STA.w $05DC

#_039DF3: LDA.w #$00E8
#_039DF6: STA.w $05CE

#_039DF9: LDA.w #$0030
#_039DFC: STA.l $7FE818,X

#_039E00: LDA.w #$FF40
#_039E03: STA.l $7FE81A,X
#_039E07: JSR ROUTINE_03883A

#_039E0A: LDA.w #$8136
#_039E0D: STA.b $26

#_039E0F: LDA.w $05E6
#_039E12: STA.b $20

#_039E14: LDA.w $05E8
#_039E17: STA.b $22

#_039E19: LDA.w $05CA
#_039E1C: STA.b $30
#_039E1E: JSR ROUTINE_038A3E
#_039E21: JMP CODE_039E5F

CODE_039E24:
#_039E24: LDY.w #$0002

#_039E27: LDA.w $05CE
#_039E2A: CMP.w #$001E
#_039E2D: BEQ CODE_039E61

#_039E2F: LDY.w #$000E
#_039E32: CMP.w #$00FE
#_039E35: BEQ CODE_039E61

#_039E37: LDY.w #$0008
#_039E3A: CMP.w #$007E
#_039E3D: BEQ CODE_039E61

#_039E3F: LDY.w #$0006
#_039E42: CMP.w #$005E
#_039E45: BEQ CODE_039E61

#_039E47: LDY.w #$000A
#_039E4A: CMP.w #$009E
#_039E4D: BEQ CODE_039E61

#_039E4F: LDY.w #$0004
#_039E52: CMP.w #$003E
#_039E55: BEQ CODE_039E61

#_039E57: LDY.w #$000C
#_039E5A: CMP.w #$00BE
#_039E5D: BEQ CODE_039E61

CODE_039E5F:
#_039E5F: CLC
#_039E60: RTS

CODE_039E61:
#_039E61: LDA.w #$FFFF
#_039E64: STA.w $04D0

#_039E67: LDA.w #$0001
#_039E6A: STA.w $0582
#_039E6D: JSL ROUTINE_08EBDC
#_039E71: SEC
#_039E72: RTS

UNREACH_039E73:
#_039E73: db $00,$00

UNREACH_039E75:
#_039E75: db $00,$00

UNREACH_039E77:
#_039E77: db $00,$00

UNREACH_039E79:
#_039E79: db $00,$00,$F0,$FF,$F0,$FF,$20,$00
#_039E81: db $20,$00,$E0,$FF,$E0,$FF,$40,$00
#_039E89: db $40,$00,$D0,$FF,$D0,$FF,$60,$00
#_039E91: db $60,$00,$C0,$FF,$C0,$FF,$80,$00
#_039E99: db $80,$00,$B0,$FF,$B0,$FF,$A0,$00
#_039EA1: db $A0,$00,$A0,$FF,$A0,$FF,$C0,$00
#_039EA9: db $C0,$00,$90,$FF,$90,$FF,$E0,$00
#_039EB1: db $E0,$00,$80,$FF,$80,$FF,$00,$01
#_039EB9: db $00,$01,$40,$FF,$40,$FF,$80,$01
#_039EC1: db $80,$01,$10,$FF,$10,$FF,$E0,$01
#_039EC9: db $E0,$01,$E0,$FE,$E0,$FE,$40,$02
#_039ED1: db $40,$02,$00,$00,$00,$00,$00,$00
#_039ED9: db $00,$00,$80,$FE,$00,$FE,$00,$03
#_039EE1: db $00,$02,$00,$FE,$80,$FC,$00,$04
#_039EE9: db $80,$03,$C0,$FF,$C0,$FF,$80,$00
#_039EF1: db $00,$02,$F0,$FF,$00,$FF,$20,$00
#_039EF9: db $00,$02,$80,$FE,$00,$FE,$00,$03
#_039F01: db $80,$04,$00,$FF,$00,$FE,$00,$02
#_039F09: db $00,$02,$00,$FE,$00,$FD,$00,$04
#_039F11: db $00,$04,$00,$FF,$00,$FF,$00,$02
#_039F19: db $00,$01,$80,$FE,$00,$FE,$00,$03
#_039F21: db $00,$03,$80,$FF,$80,$FE,$00,$01
#_039F29: db $80,$03,$00,$FF,$80,$FD,$00,$02
#_039F31: db $00,$05,$80,$FF,$00,$FD,$00,$01
#_039F39: db $80,$03,$00,$FF,$80,$FC,$00,$02
#_039F41: db $00,$05,$00,$FE,$80,$FF,$00,$04
#_039F49: db $00,$01,$80,$FD,$00,$FF,$00,$05
#_039F51: db $00,$02,$80,$FA,$00,$FA,$00,$02
#_039F59: db $00,$02,$80,$03,$00,$FA,$00,$02
#_039F61: db $00,$02,$80,$FB,$00,$FE,$80,$01
#_039F69: db $00,$03,$00,$03,$00,$FE,$80,$01
#_039F71: db $00,$03,$00,$FE,$80,$FF,$00,$04
#_039F79: db $00,$02,$00,$FC,$00,$FA,$80,$01
#_039F81: db $00,$06,$80,$02,$00,$FA,$80,$01
#_039F89: db $00,$06,$80,$FA,$80,$FA,$00,$03
#_039F91: db $00,$03,$80,$02,$80,$FA,$00,$03
#_039F99: db $00,$03,$00,$FA,$00,$FA,$00,$04
#_039FA1: db $00,$02,$00,$02,$00,$FA,$00,$04
#_039FA9: db $00,$02,$80,$FB,$80,$FA,$00,$02
#_039FB1: db $80,$05,$80,$02,$80,$FA,$00,$02
#_039FB9: db $80,$05,$80,$FC,$00,$FA,$00,$02
#_039FC1: db $00,$05,$80,$01,$00,$FA,$00,$02
#_039FC9: db $00,$05,$80,$FD,$00,$FC,$00,$05
#_039FD1: db $00,$05,$20,$FF,$00,$00,$C0,$01
#_039FD9: db $00,$02,$80,$FD,$00,$00,$00,$05
#_039FE1: db $00,$01,$00,$FE,$00,$FD,$00,$04
#_039FE9: db $00,$04,$80,$FE,$00,$FE,$00,$03
#_039FF1: db $00,$02,$80,$FD,$80,$FF,$00,$03
#_039FF9: db $00,$02,$00,$FC,$00,$00,$00,$02
#_03A001: db $80,$00,$00,$FE,$00,$00,$00,$02
#_03A009: db $80,$00,$80,$FE,$80,$FE,$00,$03
#_03A011: db $00,$03

;===================================================================================================

ROUTINE_03A013:
#_03A013: CLC
#_03A014: ADC.w $081C,X
#_03A017: STA.w $081C,X
#_03A01A: JSR ROUTINE_03A0D3

#_03A01D: LDA.b $24
#_03A01F: LSR A
#_03A020: LSR A
#_03A021: LSR A
#_03A022: LSR A
#_03A023: LSR A
#_03A024: ADC.w #$0000
#_03A027: ASL.b $24
#_03A029: BCC CODE_03A02E

#_03A02B: ORA.w #$FF00

CODE_03A02E:
#_03A02E: STA.w $0818,X

#_03A031: LDA.b $26
#_03A033: LSR A
#_03A034: LSR A
#_03A035: LSR A
#_03A036: LSR A
#_03A037: LSR A
#_03A038: ADC.w #$0000
#_03A03B: ASL.b $26
#_03A03D: BCC CODE_03A042

#_03A03F: ORA.w #$FF00

CODE_03A042:
#_03A042: STA.w $081A,X
#_03A045: RTS

;===================================================================================================

ROUTINE_03A046:
#_03A046: CLC
#_03A047: ADC.w $081C,X
#_03A04A: STA.w $081C,X

;===================================================================================================

ROUTINE_03A04D:
#_03A04D: JSR ROUTINE_03A156

#_03A050: LDA.b $24
#_03A052: BPL CODE_03A05C

#_03A054: LSR A
#_03A055: LSR A
#_03A056: LSR A
#_03A057: ORA.w #$E000
#_03A05A: BRA CODE_03A05F

CODE_03A05C:
#_03A05C: LSR A
#_03A05D: LSR A
#_03A05E: LSR A

CODE_03A05F:
#_03A05F: STA.w $0818,X

#_03A062: LDA.b $26
#_03A064: BPL CODE_03A06E

#_03A066: LSR A
#_03A067: LSR A
#_03A068: LSR A
#_03A069: ORA.w #$E000
#_03A06C: BRA CODE_03A071

CODE_03A06E:
#_03A06E: LSR A
#_03A06F: LSR A
#_03A070: LSR A

CODE_03A071:
#_03A071: STA.w $081A,X
#_03A074: RTS

;===================================================================================================

ROUTINE_03A07D_long:
#_03A075: PHB
#_03A076: PHK
#_03A077: PLB

#_03A078: JSR ROUTINE_03A07D

#_03A07B: PLB
#_03A07C: RTL

;===================================================================================================

ROUTINE_03A07D:
#_03A07D: JSR ROUTINE_03A156

#_03A080: LDA.b $24
#_03A082: BPL CODE_03A08C

#_03A084: LSR A
#_03A085: LSR A
#_03A086: LSR A
#_03A087: ORA.w #$E000
#_03A08A: BRA CODE_03A08F

CODE_03A08C:
#_03A08C: LSR A
#_03A08D: LSR A
#_03A08E: LSR A

CODE_03A08F:
#_03A08F: STA.b $20

#_03A091: LDA.b $26
#_03A093: BPL CODE_03A09D

#_03A095: LSR A
#_03A096: LSR A
#_03A097: LSR A
#_03A098: ORA.w #$E000
#_03A09B: BRA CODE_03A0A0

CODE_03A09D:
#_03A09D: LSR A
#_03A09E: LSR A
#_03A09F: LSR A

CODE_03A0A0:
#_03A0A0: STA.b $22
#_03A0A2: RTS

;===================================================================================================

ROUTINE_03A0A3:
#_03A0A3: PHB
#_03A0A4: PHK
#_03A0A5: PLB
#_03A0A6: JSR ROUTINE_03A0D3

#_03A0A9: LDA.b $24
#_03A0AB: LSR A
#_03A0AC: LSR A
#_03A0AD: LSR A
#_03A0AE: ASL.b $24
#_03A0B0: BCC CODE_03A0B5

#_03A0B2: ORA.w #$E000

CODE_03A0B5:
#_03A0B5: STA.b $24

#_03A0B7: LDA.b $26
#_03A0B9: LSR A
#_03A0BA: LSR A
#_03A0BB: LSR A
#_03A0BC: ASL.b $26
#_03A0BE: BCC CODE_03A0C3

#_03A0C0: ORA.w #$E000

CODE_03A0C3:
#_03A0C3: STA.b $26
#_03A0C5: PLB
#_03A0C6: RTL

;===================================================================================================

ROUTINE_03A0D3_long:
#_03A0C7: PHB
#_03A0C8: PHK
#_03A0C9: PLB

#_03A0CA: JSR ROUTINE_03A0D3

#_03A0CD: PLB
#_03A0CE: RTL

;===================================================================================================

ROUTINE_03A0D3_divide_by_16:
#_03A0CF: LSR A
#_03A0D0: LSR A
#_03A0D1: LSR A
#_03A0D2: LSR A

;===================================================================================================

ROUTINE_03A0D3:
#_03A0D3: PHX
#_03A0D4: STA.b $22
#_03A0D6: AND.w #$00FF
#_03A0D9: TAX
#_03A0DA: BNE CODE_03A0EC

#_03A0DC: LDA.b $20
#_03A0DE: SEP #$20
#_03A0E0: XBA
#_03A0E1: REP #$20
#_03A0E3: AND.w #$FF00
#_03A0E6: STA.b $24
#_03A0E8: STZ.b $26
#_03A0EA: BRA CODE_03A11A

CODE_03A0EC:
#_03A0EC: SEP #$20

#_03A0EE: LDA.l UNREACH_04FB8B,X
#_03A0F2: STA.w WRMPYA

#_03A0F5: LDA.b $20
#_03A0F7: STA.w WRMPYB
#_03A0FA: NOP
#_03A0FB: NOP
#_03A0FC: REP #$20

#_03A0FE: LDA.w RDMPY
#_03A101: STA.b $24
#_03A103: SEP #$20

#_03A105: LDA.l UNREACH_04FA8B,X
#_03A109: STA.w WRMPYA

#_03A10C: LDA.b $20
#_03A10E: STA.w WRMPYB
#_03A111: NOP
#_03A112: NOP
#_03A113: REP #$20

#_03A115: LDA.w RDMPY
#_03A118: STA.b $26

CODE_03A11A:
#_03A11A: LDA.b $22
#_03A11C: AND.w #$0300
#_03A11F: BEQ .exit

#_03A121: CMP.w #$0200
#_03A124: BCC CODE_03A136

#_03A126: BEQ CODE_03A144

#_03A128: LDA.b $24
#_03A12A: LDY.b $26
#_03A12C: STY.b $24
#_03A12E: EOR.w #$FFFF
#_03A131: INC A
#_03A132: STA.b $26
#_03A134: PLX
#_03A135: RTS

CODE_03A136:
#_03A136: LDA.b $26

#_03A138: LDY.b $24
#_03A13A: STY.b $26
#_03A13C: EOR.w #$FFFF
#_03A13F: INC A
#_03A140: STA.b $24
#_03A142: PLX
#_03A143: RTS

CODE_03A144:
#_03A144: SEC

#_03A145: LDA.w #$0000
#_03A148: SBC.b $24
#_03A14A: STA.b $24
#_03A14C: SEC

#_03A14D: LDA.w #$0000
#_03A150: SBC.b $26
#_03A152: STA.b $26

.exit
#_03A154: PLX
#_03A155: RTS

;===================================================================================================

ROUTINE_03A156:
#_03A156: PHX
#_03A157: AND.w #$03FF
#_03A15A: STA.b $22
#_03A15C: AND.w #$00FF
#_03A15F: TAX
#_03A160: BNE CODE_03A16B

#_03A162: LDA.b $20
#_03A164: LSR A
#_03A165: STA.b $24
#_03A167: STZ.b $26
#_03A169: BRA CODE_03A1DF

CODE_03A16B:
#_03A16B: SEP #$20

#_03A16D: LDA.l UNREACH_04FB8B,X
#_03A171: STA.w WRMPYA

#_03A174: LDA.b $20
#_03A176: STA.w WRMPYB
#_03A179: NOP
#_03A17A: NOP
#_03A17B: REP #$20

#_03A17D: LDA.w RDMPY
#_03A180: STA.b $24
#_03A182: SEP #$20

#_03A184: LDA.b $21
#_03A186: STA.w WRMPYB
#_03A189: REP #$20
#_03A18B: STZ.b $26
#_03A18D: CLC

#_03A18E: LDA.b $24
#_03A190: ADC.w #$0080
#_03A193: STA.b $24

#_03A195: LDA.b $25
#_03A197: BCC CODE_03A19C

#_03A199: ADC.w #$00FF

CODE_03A19C:
#_03A19C: AND.w #$01FF
#_03A19F: ADC.w RDMPY
#_03A1A2: ROR A
#_03A1A3: STA.b $24
#_03A1A5: SEP #$20

#_03A1A7: LDA.l UNREACH_04FA8B,X
#_03A1AB: STA.w WRMPYA

#_03A1AE: LDA.b $20
#_03A1B0: STA.w WRMPYB
#_03A1B3: NOP
#_03A1B4: NOP
#_03A1B5: REP #$20

#_03A1B7: LDA.w RDMPY
#_03A1BA: STA.b $26
#_03A1BC: SEP #$20

#_03A1BE: LDA.b $21
#_03A1C0: STA.w WRMPYB
#_03A1C3: REP #$20
#_03A1C5: STZ.b $28
#_03A1C7: CLC

#_03A1C8: LDA.b $26
#_03A1CA: ADC.w #$0080
#_03A1CD: STA.b $26

#_03A1CF: LDA.b $27
#_03A1D1: BCC CODE_03A1D6

#_03A1D3: ADC.w #$00FF

CODE_03A1D6:
#_03A1D6: AND.w #$01FF
#_03A1D9: ADC.w RDMPY
#_03A1DC: ROR A
#_03A1DD: STA.b $26

CODE_03A1DF:
#_03A1DF: LDA.b $22
#_03A1E1: AND.w #$0300
#_03A1E4: BEQ .exit

#_03A1E6: CMP.w #$0200
#_03A1E9: BCC CODE_03A1FB

#_03A1EB: BEQ CODE_03A209

#_03A1ED: LDA.b $24
#_03A1EF: LDY.b $26
#_03A1F1: STY.b $24
#_03A1F3: EOR.w #$FFFF
#_03A1F6: INC A
#_03A1F7: STA.b $26
#_03A1F9: PLX
#_03A1FA: RTS

CODE_03A1FB:
#_03A1FB: LDA.b $26

#_03A1FD: LDY.b $24
#_03A1FF: STY.b $26
#_03A201: EOR.w #$FFFF
#_03A204: INC A
#_03A205: STA.b $24
#_03A207: PLX
#_03A208: RTS

CODE_03A209:
#_03A209: SEC

#_03A20A: LDA.w #$0000
#_03A20D: SBC.b $24
#_03A20F: STA.b $24
#_03A211: SEC

#_03A212: LDA.w #$0000
#_03A215: SBC.b $26
#_03A217: STA.b $26

.exit
#_03A219: PLX
#_03A21A: RTS

;===================================================================================================

ROUTINE_02FB70_bounce_long:
#_03A21B: PHB
#_03A21C: PHK
#_03A21D: PLB

#_03A21E: JSR ROUTINE_02FB70_bounce

#_03A221: PLB
#_03A222: RTL

;===================================================================================================

ROUTINE_03A223:
#_03A223: PHB
#_03A224: PHK
#_03A225: PLB

#_03A226: LDA.w $05E6
#_03A229: STA.b $24

#_03A22B: LDA.w $05E8
#_03A22E: STA.b $26

#_03A230: LDA.w $080C,Y
#_03A233: STA.b $20

#_03A235: LDA.w $080E,Y
#_03A238: STA.b $22
#_03A23A: JSR ROUTINE_02FB70_bounce
#_03A23D: PLB
#_03A23E: RTL

;===================================================================================================

ROUTINE_03A23F:
#_03A23F: PHB
#_03A240: PHK
#_03A241: PLB

#_03A242: JSR .execute

#_03A245: PLB
#_03A246: RTL

;---------------------------------------------------------------------------------------------------

.execute
#_03A247: LDA.w $0280,X
#_03A24A: STA.b $24

#_03A24C: LDA.w $02C0,X
#_03A24F: STA.b $26

#_03A251: LDA.w $080C,Y
#_03A254: STA.b $20

#_03A256: LDA.w $080E,Y
#_03A259: STA.b $22
#_03A25B: BRA ROUTINE_02FB70_bounce

;===================================================================================================

ROUTINE_03A25D:
#_03A25D: LDA.w $19EE
#_03A260: STA.b $24

#_03A262: LDA.w $19F0
#_03A265: STA.b $26

;===================================================================================================

ROUTINE_03A267:
#_03A267: LDA.w $080C,X
#_03A26A: STA.b $20

#_03A26C: LDA.w $080E,X
#_03A26F: STA.b $22
#_03A271: BRA ROUTINE_02FB70_bounce

;===================================================================================================

ROUTINE_03A273:
#_03A273: LDA.w $0280,Y
#_03A276: STA.b $20

#_03A278: LDA.w $02C0,Y
#_03A27B: STA.b $22

#_03A27D: LDA.w $05E6
#_03A280: STA.b $24

#_03A282: LDA.w $05E8
#_03A285: STA.b $26
#_03A287: BRA ROUTINE_02FB70_bounce

;===================================================================================================

ROUTINE_03A289:
#_03A289: LDA.w $05E6
#_03A28C: STA.b $20

#_03A28E: LDA.w $05E8
#_03A291: STA.b $22
#_03A293: BRA ROUTINE_03A29F

;===================================================================================================

ROUTINE_03A295:
#_03A295: LDA.w $19EE
#_03A298: STA.b $20

#_03A29A: LDA.w $19F0
#_03A29D: STA.b $22

ROUTINE_03A29F:
#_03A29F: LDA.w $080C,X
#_03A2A2: STA.b $24

#_03A2A4: LDA.w $080E,X
#_03A2A7: STA.b $26

;===================================================================================================

ROUTINE_02FB70_bounce:
#_03A2A9: JSL ROUTINE_02FB70
#_03A2AD: RTS

;===================================================================================================

ROUTINE_03A2AE:
#_03A2AE: STA.b $20

#_03A2B0: LDA.w $0560
#_03A2B3: SBC.w #$1000
#_03A2B6: SBC.w $080C,X
#_03A2B9: EOR.w #$FFFF
#_03A2BC: INC A
#_03A2BD: CMP.w #$0C80
#_03A2C0: BCC CODE_03A2DE

#_03A2C2: CMP.w #$2380
#_03A2C5: BCS CODE_03A2DE

#_03A2C7: LDA.w $0562
#_03A2CA: SBC.w #$1000
#_03A2CD: SBC.w $080E,X
#_03A2D0: EOR.w #$FFFF
#_03A2D3: INC A
#_03A2D4: CMP.w #$0B80
#_03A2D7: BCC CODE_03A2DE

#_03A2D9: CMP.w #$2180
#_03A2DC: BCC CODE_03A2E6

CODE_03A2DE:
#_03A2DE: JSR .call_routine
#_03A2E1: BRA CODE_03A2E6

;---------------------------------------------------------------------------------------------------

.call_routine
#_03A2E3: JMP ($0020)

;---------------------------------------------------------------------------------------------------

CODE_03A2E6:
#_03A2E6: LDA.w $0800,X
#_03A2E9: RTS

;===================================================================================================

ROUTINE_03A2EA:
#_03A2EA: RTS

;===================================================================================================

ROUTINE_03A2EB:
#_03A2EB: LDA.w $0804,X
#_03A2EE: CLC
#_03A2EF: ADC.w $081A,X
#_03A2F2: TAY

#_03A2F3: LDA.w $0802,X
#_03A2F6: CLC
#_03A2F7: ADC.w $0818,X

#_03A2FA: PHX
#_03A2FB: JSR ROUTINE_038E3D
#_03A2FE: PLX

#_03A2FF: RTS

;===================================================================================================

ROUTINE_03A300:
#_03A300: PHB
#_03A301: PHK
#_03A302: PLB

#_03A303: LDX.w #$0000
#_03A306: TXY

.next_sprite
#_03A307: CPY.b $0E
#_03A309: BCS .skip_all_sprites

#_03A30B: PHY
#_03A30C: PHX

#_03A30D: LDX.w $0700,Y
#_03A310: LDA.w $0800,X
#_03A313: BPL .skip_sprite

#_03A315: PHX
#_03A316: TXY

#_03A317: LDX.w $0810,Y
#_03A31A: BPL .normal_id

#_03A31C: CPX.w #$8300
#_03A31F: BCC .not_very_high

#_03A321: JSL ExecuteVeryHighSprite
#_03A325: BRA .done_with_ai

.not_very_high
#_03A327: JSL ExecuteHighSprite
#_03A32B: BRA .done_with_ai

.normal_id
#_03A32D: JSR (SpriteAIPointers,X)

;---------------------------------------------------------------------------------------------------

.done_with_ai
#_03A330: PLX

.skip_sprite
#_03A331: PLY

#_03A332: LDA.w $0800,X
#_03A335: BPL .to_next_sprite

#_03A337: LDA.w $19AC
#_03A33A: BEQ CODE_03A349

#_03A33C: LDA.w $0810,X
#_03A33F: CMP.w #$8108
#_03A342: BCC .to_next_sprite

#_03A344: CMP.w #$810E
#_03A347: BCS .to_next_sprite

CODE_03A349:
#_03A349: TXA
#_03A34A: STA.w $0700,Y

#_03A34D: INY
#_03A34E: INY

.to_next_sprite
#_03A34F: TYX

#_03A350: PLY
#_03A351: INY
#_03A352: INY

#_03A353: BRA .next_sprite

;---------------------------------------------------------------------------------------------------

.skip_all_sprites
#_03A355: STX.b $0E

#_03A357: PLB
#_03A358: RTL

;===================================================================================================

SpriteAIPointers:
#_03A359: dw ROUTINE_038C7F                                          ; 0x0000
#_03A35B: dw ROUTINE_038C80                                          ; 0x0002
#_03A35D: dw ROUTINE_038C84                                          ; 0x0004
#_03A35F: dw ROUTINE_03D2D3                                          ; 0x0006
#_03A361: dw Sprite_PartnerSwapInit                                  ; 0x0008
#_03A363: dw ROUTINE_03BF3B                                          ; 0x000A
#_03A365: dw ROUTINE_03BF48                                          ; 0x000C
#_03A367: dw ROUTINE_03BFBC                                          ; 0x000E
#_03A369: dw ROUTINE_03D1AA                                          ; 0x0010
#_03A36B: dw ROUTINE_03BD15                                          ; 0x0012
#_03A36D: dw ROUTINE_03BD2A                                          ; 0x0014
#_03A36F: dw $0000                                                   ; 0x0016
#_03A371: dw ROUTINE_03CBFB                                          ; 0x0018
#_03A373: dw ROUTINE_03CC1E                                          ; 0x001A
#_03A375: dw ROUTINE_03CC73                                          ; 0x001C
#_03A377: dw ROUTINE_03CFA0                                          ; 0x001E
#_03A379: dw ROUTINE_03D9EB                                          ; 0x0020
#_03A37B: dw ROUTINE_03D9F2                                          ; 0x0022
#_03A37D: dw ROUTINE_03DA01                                          ; 0x0024
#_03A37F: dw ROUTINE_03D9B1                                          ; 0x0026
#_03A381: dw ROUTINE_03D9BC                                          ; 0x0028
#_03A383: dw ROUTINE_03D9CE                                          ; 0x002A
#_03A385: dw ROUTINE_03CEBC                                          ; 0x002C
#_03A387: dw ROUTINE_03CECC                                          ; 0x002E
#_03A389: dw ROUTINE_03CEDC                                          ; 0x0030
#_03A38B: dw ROUTINE_03CEDF                                          ; 0x0032
#_03A38D: dw ROUTINE_03CF25                                          ; 0x0034
#_03A38F: dw ROUTINE_03CF7B                                          ; 0x0036
#_03A391: dw ROUTINE_03CF7E                                          ; 0x0038
#_03A393: dw ROUTINE_03CF8B                                          ; 0x003A
#_03A395: dw ROUTINE_03CFA0                                          ; 0x003C
#_03A397: dw ROUTINE_03CFA6                                          ; 0x003E
#_03A399: dw ROUTINE_03CFBD                                          ; 0x0040
#_03A39B: dw ROUTINE_03CFDC                                          ; 0x0042
#_03A39D: dw ROUTINE_03D1DD                                          ; 0x0044
#_03A39F: dw ROUTINE_03D20B                                          ; 0x0046
#_03A3A1: dw ROUTINE_03D224                                          ; 0x0048
#_03A3A3: dw ROUTINE_03D27D                                          ; 0x004A
#_03A3A5: dw ROUTINE_03D290                                          ; 0x004C
#_03A3A7: dw ROUTINE_03D2D0                                          ; 0x004E
#_03A3A9: dw ROUTINE_03D2FC                                          ; 0x0050
#_03A3AB: dw ROUTINE_03D323                                          ; 0x0052
#_03A3AD: dw ROUTINE_03D33C                                          ; 0x0054
#_03A3AF: dw ROUTINE_03D118                                          ; 0x0056
#_03A3B1: dw ROUTINE_03CEAE                                          ; 0x0058
#_03A3B3: dw ROUTINE_038C7F                                          ; 0x005A
#_03A3B5: dw ROUTINE_03D5EC                                          ; 0x005C
#_03A3B7: dw ROUTINE_03D608                                          ; 0x005E
#_03A3B9: dw ROUTINE_03D61E                                          ; 0x0060
#_03A3BB: dw ROUTINE_03D79A                                          ; 0x0062
#_03A3BD: dw ROUTINE_03D7E5                                          ; 0x0064
#_03A3BF: dw ROUTINE_03D753                                          ; 0x0066
#_03A3C1: dw ROUTINE_03D68C                                          ; 0x0068
#_03A3C3: dw ROUTINE_03D696                                          ; 0x006A
#_03A3C5: dw ROUTINE_03D67C                                          ; 0x006C
#_03A3C7: dw ROUTINE_03D4AC                                          ; 0x006E
#_03A3C9: dw ROUTINE_03D4C2                                          ; 0x0070
#_03A3CB: dw ROUTINE_03D579                                          ; 0x0072
#_03A3CD: dw ROUTINE_03D41F                                          ; 0x0074
#_03A3CF: dw ROUTINE_03D435                                          ; 0x0076
#_03A3D1: dw ROUTINE_03D44E                                          ; 0x0078
#_03A3D3: dw ROUTINE_03D392                                          ; 0x007A
#_03A3D5: dw ROUTINE_03D3A8                                          ; 0x007C
#_03A3D7: dw ROUTINE_03D3BE                                          ; 0x007E
#_03A3D9: dw ROUTINE_03DA05                                          ; 0x0080
#_03A3DB: dw ROUTINE_03DA24                                          ; 0x0082
#_03A3DD: dw ROUTINE_03DA80                                          ; 0x0084
#_03A3DF: dw ROUTINE_03BD49                                          ; 0x0086
#_03A3E1: dw ROUTINE_03BD6B                                          ; 0x0088
#_03A3E3: dw ROUTINE_03BDA7                                          ; 0x008A
#_03A3E5: dw ROUTINE_03D9D2                                          ; 0x008C
#_03A3E7: dw ROUTINE_03D9D9                                          ; 0x008E
#_03A3E9: dw ROUTINE_03D954                                          ; 0x0090
#_03A3EB: dw ROUTINE_03D95C                                          ; 0x0092
#_03A3ED: dw ROUTINE_03D9B1                                          ; 0x0094
#_03A3EF: dw ROUTINE_03D126                                          ; 0x0096
#_03A3F1: dw ROUTINE_03D155                                          ; 0x0098
#_03A3F3: dw ROUTINE_03D1A2                                          ; 0x009A
#_03A3F5: dw ROUTINE_03D056                                          ; 0x009C
#_03A3F7: dw ROUTINE_03D067                                          ; 0x009E
#_03A3F9: dw ROUTINE_03D118                                          ; 0x00A0
#_03A3FB: dw ROUTINE_03D017                                          ; 0x00A2
#_03A3FD: dw ROUTINE_03D035                                          ; 0x00A4
#_03A3FF: dw ROUTINE_03D056                                          ; 0x00A6
#_03A401: dw ROUTINE_03D70E                                          ; 0x00A8
#_03A403: dw ROUTINE_03D71B                                          ; 0x00AA
#_03A405: dw $0000                                                   ; 0x00AC
#_03A407: dw ROUTINE_03CCCF                                          ; 0x00AE
#_03A409: dw ROUTINE_03CCF2                                          ; 0x00B0
#_03A40B: dw ROUTINE_03CE9C                                          ; 0x00B2
#_03A40D: dw ROUTINE_03D00F                                          ; 0x00B4
#_03A40F: dw ROUTINE_03C7FF                                          ; 0x00B6
#_03A411: dw ROUTINE_03C83F                                          ; 0x00B8
#_03A413: dw ROUTINE_03CBF8                                          ; 0x00BA
#_03A415: dw ROUTINE_03C603                                          ; 0x00BC
#_03A417: dw ROUTINE_03C63C                                          ; 0x00BE
#_03A419: dw ROUTINE_03C654                                          ; 0x00C0
#_03A41B: dw ROUTINE_03C6BF                                          ; 0x00C2
#_03A41D: dw ROUTINE_03C6CF                                          ; 0x00C4
#_03A41F: dw ROUTINE_03C6D4                                          ; 0x00C6
#_03A421: dw ROUTINE_03C704                                          ; 0x00C8
#_03A423: dw ROUTINE_03C726                                          ; 0x00CA
#_03A425: dw ROUTINE_03F6CE                                          ; 0x00CC
#_03A427: dw ROUTINE_03F537                                          ; 0x00CE
#_03A429: dw ROUTINE_03C569                                          ; 0x00D0
#_03A42B: dw ROUTINE_03C584                                          ; 0x00D2
#_03A42D: dw ROUTINE_03C600                                          ; 0x00D4
#_03A42F: dw ROUTINE_03DA91                                          ; 0x00D6
#_03A431: dw ROUTINE_03DAAA                                          ; 0x00D8
#_03A433: dw ROUTINE_03DB38                                          ; 0x00DA
#_03A435: dw ROUTINE_03DB69                                          ; 0x00DC
#_03A437: dw ROUTINE_03DB89                                          ; 0x00DE
#_03A439: dw ROUTINE_03DBC4                                          ; 0x00E0
#_03A43B: dw ROUTINE_03DBC7                                          ; 0x00E2
#_03A43D: dw ROUTINE_03DBD1                                          ; 0x00E4
#_03A43F: dw ROUTINE_03DBEA                                          ; 0x00E6
#_03A441: dw ROUTINE_03DB4A                                          ; 0x00E8
#_03A443: dw ROUTINE_03DB4D                                          ; 0x00EA
#_03A445: dw ROUTINE_03DB66                                          ; 0x00EC
#_03A447: dw ROUTINE_03DBED                                          ; 0x00EE
#_03A449: dw ROUTINE_03DBF7                                          ; 0x00F0
#_03A44B: dw ROUTINE_03DC5F                                          ; 0x00F2
#_03A44D: dw ROUTINE_03DC71                                          ; 0x00F4
#_03A44F: dw ROUTINE_03DC74                                          ; 0x00F6
#_03A451: dw ROUTINE_03DC84                                          ; 0x00F8
#_03A453: dw ROUTINE_03DC96                                          ; 0x00FA
#_03A455: dw ROUTINE_03DCA0                                          ; 0x00FC
#_03A457: dw ROUTINE_03DCD2                                          ; 0x00FE
#_03A459: dw ROUTINE_03DCE4                                          ; 0x0100
#_03A45B: dw ROUTINE_03DCF1                                          ; 0x0102
#_03A45D: dw ROUTINE_03DD01                                          ; 0x0104
#_03A45F: dw ROUTINE_03DD19                                          ; 0x0106
#_03A461: dw ROUTINE_03DD29                                          ; 0x0108
#_03A463: dw ROUTINE_03DD59                                          ; 0x010A
#_03A465: dw ROUTINE_03C2C3                                          ; 0x010C
#_03A467: dw ROUTINE_03C302                                          ; 0x010E
#_03A469: dw ROUTINE_03C353                                          ; 0x0110
#_03A46B: dw ROUTINE_03C370                                          ; 0x0112
#_03A46D: dw ROUTINE_03C3CF                                          ; 0x0114
#_03A46F: dw ROUTINE_03C4E0                                          ; 0x0116
#_03A471: dw ROUTINE_03C4F6                                          ; 0x0118
#_03A473: dw ROUTINE_03DD6B                                          ; 0x011A
#_03A475: dw ROUTINE_03DDC1                                          ; 0x011C
#_03A477: dw ROUTINE_03DF33                                          ; 0x011E
#_03A479: dw ROUTINE_03DF6D                                          ; 0x0120
#_03A47B: dw ROUTINE_03DF84                                          ; 0x0122
#_03A47D: dw UNREACH_03DFE3                                          ; 0x0124
#_03A47F: dw ROUTINE_03DFF5                                          ; 0x0126
#_03A481: dw ROUTINE_03E00E                                          ; 0x0128
#_03A483: dw ROUTINE_03E084                                          ; 0x012A
#_03A485: dw ROUTINE_03E0EA                                          ; 0x012C
#_03A487: dw ROUTINE_03E1FA                                          ; 0x012E
#_03A489: dw ROUTINE_03E236                                          ; 0x0130
#_03A48B: dw ROUTINE_03E24A                                          ; 0x0132
#_03A48D: dw ROUTINE_03E28C                                          ; 0x0134
#_03A48F: dw ROUTINE_03E2A1                                          ; 0x0136
#_03A491: dw ROUTINE_03E2AE                                          ; 0x0138
#_03A493: dw ROUTINE_03E354                                          ; 0x013A
#_03A495: dw ROUTINE_03E390                                          ; 0x013C
#_03A497: dw ROUTINE_03E3A8                                          ; 0x013E
#_03A499: dw ROUTINE_03E44E                                          ; 0x0140
#_03A49B: dw ROUTINE_03E477                                          ; 0x0142
#_03A49D: dw ROUTINE_03E47C                                          ; 0x0144
#_03A49F: dw ROUTINE_03E481                                          ; 0x0146
#_03A4A1: dw ROUTINE_03E3F8                                          ; 0x0148
#_03A4A3: dw ROUTINE_03E41E                                          ; 0x014A
#_03A4A5: dw ROUTINE_03E43F                                          ; 0x014C
#_03A4A7: dw ROUTINE_03E342                                          ; 0x014E
#_03A4A9: dw ROUTINE_03E4B7                                          ; 0x0150
#_03A4AB: dw ROUTINE_03E4F4                                          ; 0x0152
#_03A4AD: dw ROUTINE_03E581                                          ; 0x0154
#_03A4AF: dw ROUTINE_03E5B7                                          ; 0x0156
#_03A4B1: dw ROUTINE_03E5CD                                          ; 0x0158
#_03A4B3: dw ROUTINE_03E604                                          ; 0x015A
#_03A4B5: dw ROUTINE_03EC6A                                          ; 0x015C
#_03A4B7: dw ROUTINE_03EC81                                          ; 0x015E
#_03A4B9: dw ROUTINE_03ED15                                          ; 0x0160
#_03A4BB: dw ROUTINE_03ED17                                          ; 0x0162
#_03A4BD: dw ROUTINE_03ED57                                          ; 0x0164
#_03A4BF: dw ROUTINE_03ED6B                                          ; 0x0166
#_03A4C1: dw ROUTINE_03EDA2                                          ; 0x0168
#_03A4C3: dw ROUTINE_03EE1D                                          ; 0x016A
#_03A4C5: dw ROUTINE_03EE65                                          ; 0x016C
#_03A4C7: dw ROUTINE_03EEAF                                          ; 0x016E
#_03A4C9: dw ROUTINE_03EEE1                                          ; 0x0170
#_03A4CB: dw ROUTINE_03EEE4                                          ; 0x0172
#_03A4CD: dw ROUTINE_03EEE4                                          ; 0x0174
#_03A4CF: dw ROUTINE_03EF5A                                          ; 0x0176
#_03A4D1: dw ROUTINE_03EFAF                                          ; 0x0178
#_03A4D3: dw ROUTINE_03F000                                          ; 0x017A
#_03A4D5: dw ROUTINE_03FD71                                          ; 0x017C
#_03A4D7: dw ROUTINE_03FDA0                                          ; 0x017E
#_03A4D9: dw ROUTINE_03FDA3                                          ; 0x0180
#_03A4DB: dw ROUTINE_03FDCE                                          ; 0x0182
#_03A4DD: dw ROUTINE_03FDFF                                          ; 0x0184
#_03A4DF: dw ROUTINE_03F055                                          ; 0x0186
#_03A4E1: dw ROUTINE_03F09A                                          ; 0x0188
#_03A4E3: dw ROUTINE_03F116                                          ; 0x018A
#_03A4E5: dw ROUTINE_03F119                                          ; 0x018C
#_03A4E7: dw ROUTINE_03F11C                                          ; 0x018E
#_03A4E9: dw ROUTINE_03F130                                          ; 0x0190
#_03A4EB: dw ROUTINE_03F162                                          ; 0x0192
#_03A4ED: dw ROUTINE_03F1AC                                          ; 0x0194
#_03A4EF: dw ROUTINE_03F1DC                                          ; 0x0196
#_03A4F1: dw ROUTINE_03F290                                          ; 0x0198
#_03A4F3: dw ROUTINE_03F3AA                                          ; 0x019A
#_03A4F5: dw ROUTINE_03F4C4                                          ; 0x019C
#_03A4F7: dw ROUTINE_03F4FB                                          ; 0x019E
#_03A4F9: dw ROUTINE_03F756                                          ; 0x01A0
#_03A4FB: dw ROUTINE_03F771                                          ; 0x01A2
#_03A4FD: dw ROUTINE_03F756                                          ; 0x01A4
#_03A4FF: dw ROUTINE_03F817                                          ; 0x01A6
#_03A501: dw ROUTINE_03F756                                          ; 0x01A8
#_03A503: dw ROUTINE_03F83F                                          ; 0x01AA
#_03A505: dw ROUTINE_03F756                                          ; 0x01AC
#_03A507: dw ROUTINE_03F86E                                          ; 0x01AE
#_03A509: dw ROUTINE_03F89D                                          ; 0x01B0
#_03A50B: dw ROUTINE_03F8AA                                          ; 0x01B2
#_03A50D: dw ROUTINE_03F911                                          ; 0x01B4
#_03A50F: dw ROUTINE_03F91E                                          ; 0x01B6
#_03A511: dw ROUTINE_03F96A                                          ; 0x01B8
#_03A513: dw ROUTINE_03F977                                          ; 0x01BA
#_03A515: dw ROUTINE_03F9C5                                          ; 0x01BC
#_03A517: dw ROUTINE_03F9D2                                          ; 0x01BE
#_03A519: dw ROUTINE_03FA1E                                          ; 0x01C0
#_03A51B: dw ROUTINE_03FA2E                                          ; 0x01C2
#_03A51D: dw ROUTINE_03FA72                                          ; 0x01C4
#_03A51F: dw ROUTINE_03FA82                                          ; 0x01C6
#_03A521: dw ROUTINE_03FAA6                                          ; 0x01C8
#_03A523: dw ROUTINE_03FAB6                                          ; 0x01CA
#_03A525: dw ROUTINE_03FADA                                          ; 0x01CC
#_03A527: dw ROUTINE_03FAEA                                          ; 0x01CE
#_03A529: dw ROUTINE_03FB29                                          ; 0x01D0
#_03A52B: dw ROUTINE_03FB36                                          ; 0x01D2
#_03A52D: dw ROUTINE_03FB5A                                          ; 0x01D4
#_03A52F: dw ROUTINE_03FB64                                          ; 0x01D6
#_03A531: dw ROUTINE_03FB70                                          ; 0x01D8
#_03A533: dw ROUTINE_03FB91                                          ; 0x01DA
#_03A535: dw ROUTINE_03FB65                                          ; 0x01DC
#_03A537: dw ROUTINE_03FB6F                                          ; 0x01DE
#_03A539: dw ROUTINE_03FB92                                          ; 0x01E0
#_03A53B: dw ROUTINE_03FBAD                                          ; 0x01E2
#_03A53D: dw ROUTINE_03FC9E                                          ; 0x01E4
#_03A53F: dw ROUTINE_03FCF0                                          ; 0x01E6
#_03A541: dw ROUTINE_03FCBE                                          ; 0x01E8
#_03A543: dw ROUTINE_03FCF0                                          ; 0x01EA
#_03A545: dw ROUTINE_03FCEA                                          ; 0x01EC
#_03A547: dw ROUTINE_03FCF0                                          ; 0x01EE
#_03A549: dw ROUTINE_03FD2E                                          ; 0x01F0
#_03A54B: dw ROUTINE_03FD36                                          ; 0x01F2
#_03A54D: dw ROUTINE_03FD53                                          ; 0x01F4
#_03A54F: dw ROUTINE_03FE6A                                          ; 0x01F6
#_03A551: dw ROUTINE_03FED8                                          ; 0x01F8
#_03A553: dw ROUTINE_03BDCC                                          ; 0x01FA
#_03A555: dw ROUTINE_03BE49                                          ; 0x01FC
#_03A557: dw ROUTINE_03BEA7                                          ; 0x01FE
#_03A559: dw ROUTINE_03A601                                          ; 0x0200
#_03A55B: dw ROUTINE_03A60E                                          ; 0x0202
#_03A55D: dw ROUTINE_03A6E4                                          ; 0x0204
#_03A55F: dw ROUTINE_03A7CC                                          ; 0x0206
#_03A561: dw ROUTINE_03A8A8                                          ; 0x0208
#_03A563: dw ROUTINE_03A928                                          ; 0x020A
#_03A565: dw ROUTINE_03A935                                          ; 0x020C
#_03A567: dw ROUTINE_03A956                                          ; 0x020E
#_03A569: dw ROUTINE_03AA17                                          ; 0x0210
#_03A56B: dw ROUTINE_03AA41                                          ; 0x0212
#_03A56D: dw ROUTINE_03AB24                                          ; 0x0214
#_03A56F: dw ROUTINE_03AB70                                          ; 0x0216
#_03A571: dw ROUTINE_03AC27                                          ; 0x0218
#_03A573: dw ROUTINE_03AC7F                                          ; 0x021A
#_03A575: dw ROUTINE_03ACDE                                          ; 0x021C
#_03A577: dw ROUTINE_03ACDE                                          ; 0x021E
#_03A579: dw ROUTINE_03AD2F                                          ; 0x0220
#_03A57B: dw ROUTINE_03AD6A                                          ; 0x0222
#_03A57D: dw ROUTINE_03AE0C                                          ; 0x0224
#_03A57F: dw ROUTINE_03B68A                                          ; 0x0226
#_03A581: dw ROUTINE_03B6A5                                          ; 0x0228
#_03A583: dw ROUTINE_03B6F5                                          ; 0x022A
#_03A585: dw GetDifficultyIndex_bank03                               ; 0x022C
#_03A587: dw GetDifficultyIndex_bank03                               ; 0x022E
#_03A589: dw ROUTINE_03A745                                          ; 0x0230
#_03A58B: dw ROUTINE_03AEA0                                          ; 0x0232
#_03A58D: dw ROUTINE_03AF4B                                          ; 0x0234
#_03A58F: dw ROUTINE_03B21A                                          ; 0x0236
#_03A591: dw ROUTINE_03B256                                          ; 0x0238
#_03A593: dw ROUTINE_03B234                                          ; 0x023A
#_03A595: dw ROUTINE_03B27E                                          ; 0x023C
#_03A597: dw ROUTINE_03B2A8                                          ; 0x023E
#_03A599: dw ROUTINE_03B2D2                                          ; 0x0240
#_03A59B: dw ROUTINE_03B31D                                          ; 0x0242
#_03A59D: dw ROUTINE_03B38F                                          ; 0x0244
#_03A59F: dw ROUTINE_03B3CB                                          ; 0x0246
#_03A5A1: dw ROUTINE_03AF4B                                          ; 0x0248
#_03A5A3: dw ROUTINE_03AFDD                                          ; 0x024A
#_03A5A5: dw ROUTINE_03AFF8                                          ; 0x024C
#_03A5A7: dw ROUTINE_03B04A                                          ; 0x024E
#_03A5A9: dw ROUTINE_03B090                                          ; 0x0250
#_03A5AB: dw GetDifficultyIndex_bank03                               ; 0x0252
#_03A5AD: dw GetDifficultyIndex_bank03                               ; 0x0254
#_03A5AF: dw ROUTINE_03B755                                          ; 0x0256
#_03A5B1: dw ROUTINE_03B508                                          ; 0x0258
#_03A5B3: dw ROUTINE_03B51C                                          ; 0x025A
#_03A5B5: dw ROUTINE_03B5B6                                          ; 0x025C
#_03A5B7: dw ROUTINE_03B5E7                                          ; 0x025E
#_03A5B9: dw ROUTINE_03B62A                                          ; 0x0260
#_03A5BB: dw ROUTINE_03B73B                                          ; 0x0262
#_03A5BD: dw ROUTINE_03B777                                          ; 0x0264
#_03A5BF: dw ROUTINE_03B777                                          ; 0x0266
#_03A5C1: dw ROUTINE_03B7BD                                          ; 0x0268
#_03A5C3: dw ROUTINE_03B820                                          ; 0x026A
#_03A5C5: dw ROUTINE_03B8A9                                          ; 0x026C
#_03A5C7: dw ROUTINE_03B8FC                                          ; 0x026E
#_03A5C9: dw ROUTINE_03B91F                                          ; 0x0270
#_03A5CB: dw ROUTINE_03AEBF                                          ; 0x0272
#_03A5CD: dw ROUTINE_03AEDE                                          ; 0x0274
#_03A5CF: dw ROUTINE_03AEFD                                          ; 0x0276
#_03A5D1: dw ROUTINE_03AF2C                                          ; 0x0278
#_03A5D3: dw GetDifficultyIndex_bank03                               ; 0x027A
#_03A5D5: dw ROUTINE_03B92E                                          ; 0x027C
#_03A5D7: dw ROUTINE_03B955                                          ; 0x027E
#_03A5D9: dw ROUTINE_03B971                                          ; 0x0280
#_03A5DB: dw ROUTINE_03B98F                                          ; 0x0282
#_03A5DD: dw ROUTINE_03BA40                                          ; 0x0284
#_03A5DF: dw ROUTINE_03BA98                                          ; 0x0286
#_03A5E1: dw ROUTINE_03BB0F                                          ; 0x0288
#_03A5E3: dw GetDifficultyIndex_bank03                               ; 0x028A
#_03A5E5: dw GetDifficultyIndex_bank03                               ; 0x028C
#_03A5E7: dw GetDifficultyIndex_bank03                               ; 0x028E
#_03A5E9: dw ROUTINE_03BBC9                                          ; 0x0290
#_03A5EB: dw ROUTINE_03BBE0                                          ; 0x0292
#_03A5ED: dw ROUTINE_03BBE0                                          ; 0x0294
#_03A5EF: dw ROUTINE_03BBE8                                          ; 0x0296
#_03A5F1: dw ROUTINE_03BC01                                          ; 0x0298
#_03A5F3: dw ROUTINE_03BC3B                                          ; 0x029A
#_03A5F5: dw ROUTINE_03BC62                                          ; 0x029C
#_03A5F7: dw ROUTINE_03BCC5                                          ; 0x029E
#_03A5F9: dw ROUTINE_03BCD4                                          ; 0x02A0

;===================================================================================================

GetDifficultyIndex_bank03:
#_03A5FB: LDA.w $0556
#_03A5FE: ASL A
#_03A5FF: TAY

#_03A600: RTS

;===================================================================================================

ROUTINE_03A601:
#_03A601: TYX
#_03A602: STZ.w $081C,X

#_03A605: LDA.w #$0030
#_03A608: STA.w $081E,X
#_03A60B: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03A60E:
#_03A60E: TYX

#_03A60F: LDA.w $19EE
#_03A612: CMP.w #$7100
#_03A615: BCC CODE_03A62E

#_03A617: CMP.w #$8700
#_03A61A: BCC CODE_03A626

#_03A61C: CMP.w #$9900
#_03A61F: BCC CODE_03A62E

#_03A621: CMP.w #$A680
#_03A624: BCS CODE_03A62E

CODE_03A626:
#_03A626: LDA.w $081C,X
#_03A629: CMP.w #$0005
#_03A62C: BCC CODE_03A645

CODE_03A62E:
#_03A62E: LDA.w $081C,X
#_03A631: BEQ CODE_03A634

#_03A633: RTS

CODE_03A634:
#_03A634: LDA.w $19EE
#_03A637: CMP.w #$6000
#_03A63A: BCC CODE_03A642

#_03A63C: CMP.w #$C800
#_03A63F: BCS CODE_03A642

#_03A641: RTS

CODE_03A642:
#_03A642: JMP ROUTINE_038C85

CODE_03A645:
#_03A645: DEC.w $081E,X
#_03A648: BNE .exit

#_03A64A: INC.w $081C,X
#_03A64D: JSR Random
#_03A650: STA.b $20
#_03A652: AND.w #$003F
#_03A655: CLC
#_03A656: ADC.w #$0030
#_03A659: STA.w $081E,X

#_03A65C: LDA.b $20
#_03A65E: AND.w #$000E
#_03A661: TAX

#_03A662: LDA.w $0560
#_03A665: CLC
#_03A666: ADC.w UNREACH_03A690,X
#_03A669: STA.b $20

#_03A66B: LDA.w #$8C80
#_03A66E: STA.b $22

#_03A670: LDA.w #$000E
#_03A673: STA.b $24

#_03A675: LDA.w #$0204
#_03A678: STA.b $26

#_03A67A: LDA.w #$0D41
#_03A67D: STA.b $28
#_03A67F: TYA
#_03A680: STA.b $30
#_03A682: JSR PrepEnemySpawn

#_03A685: LDA.b $30
#_03A687: STA.w $0816,Y
#_03A68A: TYX
#_03A68B: JSR Reset_0818_through_081F
#_03A68E: TXY

.exit
#_03A68F: RTS

UNREACH_03A690:
#_03A690: db $00,$01,$00,$02,$20,$02,$00,$0D
#_03A698: db $80,$0D,$00,$0E,$00,$0F,$D8,$0F
#_03A6A0: db $20,$03,$00,$00,$E5,$02,$2B,$01
#_03A6A8: db $3F,$02,$2B,$02,$45,$01,$DA,$02
#_03A6B0: db $1B,$00,$1F,$03,$EF,$FE,$EF,$02
#_03A6B8: db $E9,$FD,$52,$02,$31,$FD,$5E,$01
#_03A6C0: db $E2,$FC,$37,$00,$08,$FD,$09,$FF
#_03A6C8: db $9C,$FD,$FE,$FD,$89,$FE,$3E,$FD
#_03A6D0: db $AD,$FF,$E5,$FC,$DC,$00,$FF,$FC
#_03A6D8: db $EC,$01,$8A,$FD,$B4,$02,$70,$FE
#_03A6E0: db $18,$03,$91,$FF

;===================================================================================================

ROUTINE_03A6E4:
#_03A6E4: TYX

#_03A6E5: LDA.w #$FFCE
#_03A6E8: STA.w $080A,X
#_03A6EB: INC.w $0818,X

#_03A6EE: LDA.w $0818,X
#_03A6F1: CMP.w #$0004
#_03A6F4: BCC CODE_03A732

#_03A6F6: LDA.w #$0D42
#_03A6F9: STA.w $0806,X

#_03A6FC: LDA.w $0818,X
#_03A6FF: CMP.w #$000A
#_03A702: BCC CODE_03A732

#_03A704: LDA.w #$004C
#_03A707: STA.l $0004AA

#_03A70B: LDA.w $080C,X
#_03A70E: STA.b $20

#_03A710: LDA.w $080E,X
#_03A713: STA.b $22

#_03A715: LDA.w #$000E
#_03A718: STA.b $24

#_03A71A: LDA.w #$0206
#_03A71D: STA.b $26

#_03A71F: LDA.w #$0D3E
#_03A722: STA.b $28

#_03A724: LDA.w $0816,X
#_03A727: STA.b $30
#_03A729: JSR PrepEnemySpawn

#_03A72C: LDA.w #$020C
#_03A72F: STA.w $0810,X

CODE_03A732:
#_03A732: LDA.w #$031E
#_03A735: STA.w $0808,X
#_03A738: JMP ROUTINE_038860


#data03A73B:
#_03A73B: db $01
#_03A73C: db $00,$00,$00,$00,$00,$06,$02,$01
#_03A744: db $00

;===================================================================================================

ROUTINE_03A745:
#_03A745: TYX
#_03A746: JSR ROUTINE_03A9ED

#_03A749: LDA.w $081E,X
#_03A74C: BEQ CODE_03A751

#_03A74E: JMP CODE_03A7BD

CODE_03A751:
#_03A751: CLC

#_03A752: LDA.w $080A,X
#_03A755: ADC.w $0818,X
#_03A758: CMP.w #$0060
#_03A75B: BPL CODE_03A78C

#_03A75D: STA.w $080A,X

#_03A760: LDA.w $0802,X
#_03A763: CMP.w #$1200
#_03A766: BCS CODE_03A77A

#_03A768: CMP.w #$0000
#_03A76B: BMI CODE_03A77A

#_03A76D: LDA.w $0804,X
#_03A770: CMP.w #$0800
#_03A773: BCC CODE_03A780

#_03A775: CMP.w #$0000
#_03A778: BCS CODE_03A780

CODE_03A77A:
#_03A77A: LDA.w #$020A
#_03A77D: STA.w $0810,X

CODE_03A780:
#_03A780: LDA.w $0818,X
#_03A783: CLC
#_03A784: ADC.w #$0009
#_03A787: STA.w $0818,X
#_03A78A: BRA CODE_03A797

CODE_03A78C:
#_03A78C: LDA.w #$0208
#_03A78F: STA.w $0810,X
#_03A792: JSR ROUTINE_03A990
#_03A795: BRA CODE_03A7C0

CODE_03A797:
#_03A797: JSR ROUTINE_03A9CA
#_03A79A: CMP.w #$8000
#_03A79D: BCC CODE_03A7A6

#_03A79F: CMP.w #$9280
#_03A7A2: BCS CODE_03A7AF

#_03A7A4: BRA CODE_03A7B8

CODE_03A7A6:
#_03A7A6: LDA.w #$8000
#_03A7A9: STA.w $080E,X
#_03A7AC: JMP CODE_03A7B5

CODE_03A7AF:
#_03A7AF: LDA.w #$927F
#_03A7B2: STA.w $080E,X

CODE_03A7B5:
#_03A7B5: JSR ROUTINE_03A96C

CODE_03A7B8:
#_03A7B8: JSR ROUTINE_03A97B
#_03A7BB: BRA CODE_03A7C0

CODE_03A7BD:
#_03A7BD: DEC.w $081E,X

CODE_03A7C0:
#_03A7C0: LDA.w #$FF00

#_03A7C3: LDY.w #$201C
#_03A7C6: JSR ROUTINE_038CAA
#_03A7C9: JMP ROUTINE_0388B8

;===================================================================================================

ROUTINE_03A7CC:
#_03A7CC: TYX

#_03A7CD: LDA.w $080A,X
#_03A7D0: STA.w $0816,X

#_03A7D3: LDA.w #$FFCE
#_03A7D6: STA.w $080A,X

#_03A7D9: LDY.w #$0040
#_03A7DC: JSR ROUTINE_038002

#_03A7DF: LDA.w #$0230
#_03A7E2: STA.w $0810,X

#_03A7E5: LDA.w #$0001
#_03A7E8: STA.w $0812,X
#_03A7EB: STZ.w $0814,X

#_03A7EE: LDA.w #$0D3E
#_03A7F1: STA.w $0806,X
#_03A7F4: STZ.w $081E,X
#_03A7F7: JSR Random
#_03A7FA: AND.w #$000E
#_03A7FD: TAY

#_03A7FE: LDA.w UNREACH_03A82B,Y
#_03A801: STA.w $081A,X

#_03A804: LDA.w UNREACH_03A82D,Y
#_03A807: STA.w $081C,X

#_03A80A: LDA.w $1982
#_03A80D: AND.w #$000E
#_03A810: TAY

#_03A811: LDA.w UNREACH_03A81B,Y
#_03A814: STA.w $0818,X
#_03A817: JSR ROUTINE_03A87B
#_03A81A: RTS

UNREACH_03A81B:
#_03A81B: db $90,$FF,$9C,$FF,$9F,$FF,$80,$FF
#_03A823: db $A7,$FF,$9B,$FF,$90,$FF,$A0,$FF

UNREACH_03A82B:
#_03A82B: db $00,$00

UNREACH_03A82D:
#_03A82D: db $21,$00,$00,$00,$1F,$00,$0C,$00
#_03A835: db $1F,$00,$0C,$00,$21,$00,$11,$00
#_03A83D: db $1F,$00,$06,$00,$20,$00,$0C,$00
#_03A845: db $24,$00,$0C,$00,$22,$00

UNREACH_03A84B:
#_03A84B: db $06,$00

UNREACH_03A84D:
#_03A84D: db $FC,$FF,$F9,$FF,$FE,$FF,$02,$00
#_03A855: db $07,$00,$04,$00,$FA,$FF,$F9,$FF
#_03A85D: db $00,$00,$04,$00,$06,$00,$02,$00
#_03A865: db $F9,$FF,$F9,$FF,$02,$00

UNREACH_03A86B:
#_03A86B: db $BC,$FF,$D8,$FF,$B8,$FF,$A8,$FF
#_03A873: db $E1,$FF,$F9,$FF,$CC,$FF,$DB,$FF

;===================================================================================================

ROUTINE_03A87B:
#_03A87B: LDA.w #$0001
#_03A87E: STA.l $7FE802,X

#_03A882: LDA.w #$0000
#_03A885: STA.l $7FE804,X
#_03A889: RTS

;===================================================================================================

ROUTINE_03A88A:
#_03A88A: LDA.l $7FE81C,X
#_03A88E: TAY
#_03A88F: STX.b $20
#_03A891: TYX

#_03A892: LDA.l $7FE802,X
#_03A896: LDX.b $20
#_03A898: STA.l $7FE802,X
#_03A89C: TYX

#_03A89D: LDA.l $7FE804,X
#_03A8A1: LDX.b $20
#_03A8A3: STA.l $7FE804,X
#_03A8A7: RTS

;===================================================================================================

ROUTINE_03A8A8:
#_03A8A8: TYX
#_03A8A9: JSR ROUTINE_03A9ED

#_03A8AC: LDA.w $081E,X
#_03A8AF: BEQ CODE_03A8B4

#_03A8B1: JMP CODE_03A922

CODE_03A8B4:
#_03A8B4: CLC

#_03A8B5: LDA.w $080A,X
#_03A8B8: ADC.w $0818,X
#_03A8BB: CMP.w #$0060
#_03A8BE: BPL CODE_03A8F0

#_03A8C0: STA.w $080A,X

#_03A8C3: LDA.w $0802,X
#_03A8C6: CMP.w #$1200
#_03A8C9: BCS CODE_03A8DD

#_03A8CB: CMP.w #$0000
#_03A8CE: BMI CODE_03A8DD

#_03A8D0: LDA.w $0804,X
#_03A8D3: CMP.w #$0800
#_03A8D6: BCC CODE_03A8E4

#_03A8D8: CMP.w #$0000
#_03A8DB: BCS CODE_03A8E4

CODE_03A8DD:
#_03A8DD: LDA.w #$020A
#_03A8E0: STA.w $0810,X
#_03A8E3: RTS

CODE_03A8E4:
#_03A8E4: LDA.w $0818,X
#_03A8E7: CLC
#_03A8E8: ADC.w #$0009
#_03A8EB: STA.w $0818,X
#_03A8EE: BRA CODE_03A8FC

CODE_03A8F0:
#_03A8F0: JSR ROUTINE_03A990

#_03A8F3: LDA.w #$0043
#_03A8F6: STA.l $0004AA
#_03A8FA: BRA CODE_03A925

CODE_03A8FC:
#_03A8FC: JSR ROUTINE_03A9CA
#_03A8FF: CMP.w #$8E00
#_03A902: BCC CODE_03A90B

#_03A904: CMP.w #$9280
#_03A907: BCS CODE_03A914

#_03A909: BRA CODE_03A91D

CODE_03A90B:
#_03A90B: LDA.w #$8E00
#_03A90E: STA.w $080E,X
#_03A911: JMP CODE_03A91A

CODE_03A914:
#_03A914: LDA.w #$927F
#_03A917: STA.w $080E,X

CODE_03A91A:
#_03A91A: JSR ROUTINE_03A96C

CODE_03A91D:
#_03A91D: JSR ROUTINE_03A97B
#_03A920: BRA CODE_03A925

CODE_03A922:
#_03A922: DEC.w $081E,X

CODE_03A925:
#_03A925: JMP CODE_03A7C0

;===================================================================================================

ROUTINE_03A928:
#_03A928: TYX

#_03A929: LDA.w $0816,X
#_03A92C: TXY
#_03A92D: TAX
#_03A92E: DEC.w $081C,X
#_03A931: TYX
#_03A932: JMP ROUTINE_038C85

;===================================================================================================

ROUTINE_03A935:
#_03A935: TYX
#_03A936: INC.w $0818,X

#_03A939: LDA.w $0818,X
#_03A93C: CMP.w #$0010
#_03A93F: BCC CODE_03A947

#_03A941: LDA.w #$020E
#_03A944: STA.w $0810,X

CODE_03A947:
#_03A947: LDA.w #$201E
#_03A94A: STA.w $0808,X

#_03A94D: LDA.w #$0D40
#_03A950: STA.w $0806,X
#_03A953: JMP ROUTINE_038860

;===================================================================================================

ROUTINE_03A956:
#_03A956: TYX
#_03A957: JMP ROUTINE_038C85

;===================================================================================================

ROUTINE_03A95A:
#_03A95A: LDA.w $081A,X
#_03A95D: EOR.w #$FFFF
#_03A960: INC A
#_03A961: STA.w $081A,X
#_03A964: CLC
#_03A965: ADC.w $080C,X
#_03A968: STA.w $080C,X
#_03A96B: RTS

;===================================================================================================

ROUTINE_03A96C:
#_03A96C: LDA.w $081C,X
#_03A96F: EOR.w #$FFFF
#_03A972: INC A
#_03A973: STA.w $081C,X
#_03A976: CLC
#_03A977: ADC.w $080E,X
#_03A97A: RTS

;===================================================================================================

ROUTINE_03A97B:
#_03A97B: LDA.w $081A,X
#_03A97E: CLC
#_03A97F: ADC.w $080C,X
#_03A982: STA.w $080C,X

#_03A985: LDA.w $081C,X
#_03A988: CLC
#_03A989: ADC.w $080E,X
#_03A98C: STA.w $080E,X
#_03A98F: RTS

;===================================================================================================

ROUTINE_03A990:
#_03A990: LDA.w $081A,X
#_03A993: BMI CODE_03A99A

#_03A995: LDA.w #$0D3E
#_03A998: BRA CODE_03A99D

CODE_03A99A:
#_03A99A: LDA.w #$0D3F

CODE_03A99D:
#_03A99D: STA.w $0806,X
#_03A9A0: JSR Random
#_03A9A3: AND.w #$001C
#_03A9A6: TAY

#_03A9A7: LDA.w UNREACH_03A84B,Y
#_03A9AA: STA.w $081A,X

#_03A9AD: LDA.w UNREACH_03A84D,Y
#_03A9B0: STA.w $081C,X
#_03A9B3: JSR Random
#_03A9B6: AND.w #$000E
#_03A9B9: TAY

#_03A9BA: LDA.w UNREACH_03A86B,Y
#_03A9BD: STA.w $0818,X
#_03A9C0: JSR Random
#_03A9C3: AND.w #$001E
#_03A9C6: STA.w $081E,X
#_03A9C9: RTS

;===================================================================================================

ROUTINE_03A9CA:
#_03A9CA: LDA.w $0802,X
#_03A9CD: BMI CODE_03A9D6

#_03A9CF: CMP.w #$0FC0
#_03A9D2: BCS CODE_03A9D6

#_03A9D4: BRA CODE_03A9D9

CODE_03A9D6:
#_03A9D6: JSR ROUTINE_03A95A

CODE_03A9D9:
#_03A9D9: LDA.w $081A,X
#_03A9DC: BMI CODE_03A9E3

#_03A9DE: LDA.w #$0D3C
#_03A9E1: BRA CODE_03A9E6

CODE_03A9E3:
#_03A9E3: LDA.w #$0D3D

CODE_03A9E6:
#_03A9E6: STA.w $0806,X

#_03A9E9: LDA.w $080E,X
#_03A9EC: RTS

;===================================================================================================

ROUTINE_03A9ED:
#_03A9ED: LDY.w #$0040
#_03A9F0: JSR ROUTINE_0392EE
#_03A9F3: BEQ CODE_03AA04

#_03A9F5: JSR ROUTINE_039385
#_03A9F8: BNE CODE_03AA04

#_03A9FA: JSR ROUTINE_038A25_0020

#_03A9FD: LDA.w #$020A
#_03AA00: STA.w $0810,X
#_03AA03: RTS

CODE_03AA04:
#_03AA04: LDY.w #$0040

#_03AA07: LDA.w #$0020
#_03AA0A: JSR ROUTINE_039664

#_03AA0D: LDY.w #$0040
#_03AA10: LDA.w #$0020
#_03AA13: JSR ROUTINE_039C2D
#_03AA16: RTS

;===================================================================================================

ROUTINE_03AA17:
#_03AA17: TYX
#_03AA18: JSR ROUTINE_03AA1E
#_03AA1B: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03AA1E:
#_03AA1E: JSR Reset_0818_through_081F

#_03AA21: LDA.w #$0D32
#_03AA24: STA.w $0806,X

#_03AA27: LDA.w #$0004
#_03AA2A: STA.w $0812,X
#_03AA2D: STZ.w $0814,X

#_03AA30: LDA.w $080A,X
#_03AA33: STA.l $7FE81C,X

#_03AA37: LDA.w #$FFEA
#_03AA3A: STA.w $080A,X
#_03AA3D: JSR ROUTINE_03A88A
#_03AA40: RTS

;===================================================================================================

ROUTINE_03AA41:
#_03AA41: TYX

#_03AA42: LDA.w $0800,X
#_03AA45: ORA.w #$FF01
#_03AA48: STA.w $0800,X

#_03AA4B: LDY.w #$0040
#_03AA4E: JSR ROUTINE_0392EE
#_03AA51: BEQ CODE_03AA56

#_03AA53: JSR ROUTINE_039385

CODE_03AA56:
#_03AA56: LDA.w $04F4
#_03AA59: BEQ CODE_03AA61

#_03AA5B: JSR ROUTINE_038A25_0020
#_03AA5E: JMP ROUTINE_03B43C

CODE_03AA61:
#_03AA61: LDA.w #ROUTINE_03B43C
#_03AA64: JSR ROUTINE_038983
#_03AA67: BNE CODE_03AA6A

#_03AA69: RTS

CODE_03AA6A:
#_03AA6A: LDA.l $7FE81C,X
#_03AA6E: TAY

#_03AA6F: LDA.w $080C,Y
#_03AA72: SEC
#_03AA73: SBC.w $080C,X
#_03AA76: BPL CODE_03AA7C

#_03AA78: EOR.w #$FFFF
#_03AA7B: INC A

CODE_03AA7C:
#_03AA7C: CMP.w #$4000
#_03AA7F: BCC CODE_03AA84

#_03AA81: JMP CODE_03AB0A

CODE_03AA84:
#_03AA84: LDA.w $080E,Y
#_03AA87: SEC
#_03AA88: SBC.w $080E,X
#_03AA8B: BPL CODE_03AA91

#_03AA8D: EOR.w #$FFFF
#_03AA90: INC A

CODE_03AA91:
#_03AA91: CMP.w #$4000
#_03AA94: BCC CODE_03AA99

#_03AA96: JMP CODE_03AB0A

CODE_03AA99:
#_03AA99: LDA.w $19EE
#_03AA9C: SEC
#_03AA9D: SBC.w $080C,X
#_03AAA0: STA.b $20
#_03AAA2: BPL CODE_03AAA8

#_03AAA4: EOR.w #$FFFF
#_03AAA7: INC A

CODE_03AAA8:
#_03AAA8: CMP.w #$0600
#_03AAAB: BCC CODE_03AAB0

#_03AAAD: JMP CODE_03AB0A

CODE_03AAB0:
#_03AAB0: LDA.w $19F0
#_03AAB3: SEC
#_03AAB4: SBC.w $080E,X
#_03AAB7: STA.b $22
#_03AAB9: BPL CODE_03AABF

#_03AABB: EOR.w #$FFFF
#_03AABE: INC A

CODE_03AABF:
#_03AABF: CMP.w #$0700
#_03AAC2: BCS CODE_03AB0A

#_03AAC4: LDA.b $20
#_03AAC6: BPL CODE_03AAD5

#_03AAC8: EOR.w #$FFFF
#_03AACB: INC A
#_03AACC: JSR ROUTINE_03AB13
#_03AACF: EOR.w #$FFFF
#_03AAD2: INC A
#_03AAD3: BRA CODE_03AAD8

CODE_03AAD5:
#_03AAD5: JSR ROUTINE_03AB13

CODE_03AAD8:
#_03AAD8: STA.l $7FE814,X

#_03AADC: LDA.b $22
#_03AADE: BPL CODE_03AAED

#_03AAE0: EOR.w #$FFFF
#_03AAE3: INC A
#_03AAE4: JSR ROUTINE_03AB13
#_03AAE7: EOR.w #$FFFF
#_03AAEA: INC A
#_03AAEB: BRA CODE_03AAF0

CODE_03AAED:
#_03AAED: JSR ROUTINE_03AB13

CODE_03AAF0:
#_03AAF0: STA.l $7FE816,X

#_03AAF4: LDA.w #$0214
#_03AAF7: STA.w $0810,X
#_03AAFA: JSR Random
#_03AAFD: AND.w #$000F
#_03AB00: CLC
#_03AB01: ADC.w #$0018
#_03AB04: STA.l $7FE818,X
#_03AB08: BRA CODE_03AB10

CODE_03AB0A:
#_03AB0A: LDA.w #$0D32
#_03AB0D: STA.w $0806,X

CODE_03AB10:
#_03AB10: JMP CODE_03AB67

;===================================================================================================

ROUTINE_03AB13:
#_03AB13: ASL A
#_03AB14: ASL A
#_03AB15: ASL A
#_03AB16: ASL A
#_03AB17: SEP #$20
#_03AB19: XBA
#_03AB1A: REP #$20
#_03AB1C: AND.w #$00FF
#_03AB1F: LSR A
#_03AB20: LSR A
#_03AB21: LSR A
#_03AB22: LSR A
#_03AB23: RTS

;===================================================================================================

ROUTINE_03AB24:
#_03AB24: TYX

#_03AB25: LDA.w #$8001
#_03AB28: STA.w $0800,X

#_03AB2B: LDY.w #$0048
#_03AB2E: JSR ROUTINE_0392EE
#_03AB31: BEQ CODE_03AB3E

#_03AB33: JSR ROUTINE_039385
#_03AB36: BNE CODE_03AB3E

#_03AB38: JSR ROUTINE_038A25_0020
#_03AB3B: JMP CODE_03B40F

CODE_03AB3E:
#_03AB3E: LDA.l $7FE818,X
#_03AB42: DEC A
#_03AB43: STA.l $7FE818,X
#_03AB47: BNE CODE_03AB5C

#_03AB49: JSR Random
#_03AB4C: AND.w #$001F
#_03AB4F: ADC.w #$0070
#_03AB52: STA.l $7FE818,X

#_03AB56: LDA.w #$0216
#_03AB59: STA.w $0810,X

CODE_03AB5C:
#_03AB5C: LDA.w $04F4
#_03AB5F: BEQ CODE_03AB67

#_03AB61: JSR ROUTINE_038A25_0020
#_03AB64: JMP ROUTINE_03B43C

CODE_03AB67:
#_03AB67: LDA.w #$201E
#_03AB6A: STA.w $0808,X
#_03AB6D: JMP ROUTINE_038874

;===================================================================================================

ROUTINE_03AB70:
#_03AB70: TYX

#_03AB71: LDA.l $7FE814,X
#_03AB75: ASL A

#_03AB76: LDA.w #$0100
#_03AB79: BCC CODE_03AB7E

#_03AB7B: LDA.w #$FF00

CODE_03AB7E:
#_03AB7E: STA.b $3C
#_03AB80: CLC
#_03AB81: ADC.w $0802,X

#_03AB84: LDY.w $0804,X
#_03AB87: JSR ROUTINE_038E3D

#_03AB8A: LDA.b $34
#_03AB8C: BEQ CODE_03AB9A

#_03AB8E: LDA.l $7FE814,X
#_03AB92: EOR.w #$FFFF
#_03AB95: INC A
#_03AB96: STA.l $7FE814,X

CODE_03AB9A:
#_03AB9A: LDA.w #$8001
#_03AB9D: STA.w $0800,X

#_03ABA0: LDA.w $080C,X
#_03ABA3: CLC
#_03ABA4: ADC.l $7FE814,X
#_03ABA8: STA.w $080C,X

#_03ABAB: LDA.w $080E,X
#_03ABAE: CLC
#_03ABAF: ADC.l $7FE816,X
#_03ABB3: STA.w $080E,X

#_03ABB6: LDA.w $080C,X
#_03ABB9: AND.w #$FF80
#_03ABBC: STA.b $20

#_03ABBE: LDA.w $19EE
#_03ABC1: AND.w #$FF80
#_03ABC4: CMP.b $20
#_03ABC6: BNE CODE_03ABD0

#_03ABC8: LDA.w $080E,X
#_03ABCB: CMP.w $19F0
#_03ABCE: BCC CODE_03ABDB

CODE_03ABD0:
#_03ABD0: LDA.l $7FE818,X
#_03ABD4: DEC A
#_03ABD5: STA.l $7FE818,X
#_03ABD9: BNE CODE_03ABEE

CODE_03ABDB:
#_03ABDB: LDA.w #$0218
#_03ABDE: STA.w $0810,X

#_03ABE1: LDA.w #$0D34
#_03ABE4: STA.w $0806,X

#_03ABE7: LDA.w #$0030
#_03ABEA: STA.l $7FE818,X

CODE_03ABEE:
#_03ABEE: LDA.w $04F4
#_03ABF1: BEQ CODE_03ABF9

#_03ABF3: JSR ROUTINE_038A25_0020
#_03ABF6: JMP ROUTINE_03B43C

CODE_03ABF9:
#_03ABF9: LDY.w #$0048
#_03ABFC: JSR ROUTINE_0392EE
#_03ABFF: BEQ CODE_03AC0C

#_03AC01: JSR ROUTINE_039385
#_03AC04: BNE CODE_03AC0C

#_03AC06: JSR ROUTINE_038A25_0020
#_03AC09: JMP CODE_03B40F

CODE_03AC0C:
#_03AC0C: LDY.w #$0048

#_03AC0F: LDA.w #$0020
#_03AC12: JSR ROUTINE_039664

#_03AC15: LDY.w #$0048
#_03AC18: LDA.w #$0020
#_03AC1B: JSR ROUTINE_039C2D

#_03AC1E: LDA.w #$0603
#_03AC21: JSR ROUTINE_038D39
#_03AC24: JMP ROUTINE_0388B2

;===================================================================================================

ROUTINE_03AC27:
#_03AC27: TYX

#_03AC28: LDA.l $7FE818,X
#_03AC2C: DEC A
#_03AC2D: STA.l $7FE818,X
#_03AC31: BNE CODE_03AC46

#_03AC33: LDA.w #$021E
#_03AC36: STA.w $0810,X

#_03AC39: LDA.w #$0040
#_03AC3C: STA.l $7FE818,X

#_03AC40: LDA.w #$0D36
#_03AC43: STA.w $0806,X

CODE_03AC46:
#_03AC46: LDA.w #$8001
#_03AC49: STA.w $0800,X

#_03AC4C: LDA.w $04F4
#_03AC4F: BEQ CODE_03AC57

#_03AC51: JSR ROUTINE_038A25_0020
#_03AC54: JMP ROUTINE_03B43C

CODE_03AC57:
#_03AC57: LDY.w #$0048
#_03AC5A: JSR ROUTINE_0392EE
#_03AC5D: BEQ CODE_03AC6A

#_03AC5F: JSR ROUTINE_039385
#_03AC62: BNE CODE_03AC6A

#_03AC64: JSR ROUTINE_038A25_0020
#_03AC67: JMP CODE_03B40F

CODE_03AC6A:
#_03AC6A: LDY.w #$0048

#_03AC6D: LDA.w #$0020
#_03AC70: JSR ROUTINE_039664

#_03AC73: LDY.w #$0048
#_03AC76: LDA.w #$0020
#_03AC79: JSR ROUTINE_039C2D
#_03AC7C: JMP ROUTINE_0388B2

;===================================================================================================

ROUTINE_03AC7F:
#_03AC7F: TYX
#_03AC80: SEC

#_03AC81: LDA.l $7FE818,X
#_03AC85: SBC.w #$0001
#_03AC88: STA.l $7FE818,X
#_03AC8C: BNE CODE_03ACB3

#_03AC8E: LDA.w #$0224
#_03AC91: STA.w $0810,X

#_03AC94: LDA.w #$0010
#_03AC97: STA.l $7FE818,X

#_03AC9B: LDA.w #$0D36
#_03AC9E: STA.w $0806,X
#_03ACA1: JSR Random
#_03ACA4: AND.w #$0007
#_03ACA7: INC A
#_03ACA8: STA.l $7FE81A,X

#_03ACAC: LDA.w #$0000
#_03ACAF: STA.l $7FE81E,X

CODE_03ACB3:
#_03ACB3: JMP CODE_03AE5D

;===================================================================================================

ROUTINE_03ACB6:
#_03ACB6: LDY.w #$0050
#_03ACB9: JSR ROUTINE_0392EE
#_03ACBC: BEQ CODE_03ACC9

#_03ACBE: JSR ROUTINE_039385
#_03ACC1: BNE CODE_03ACC9

#_03ACC3: JSR ROUTINE_038A25_0020
#_03ACC6: JMP CODE_03B40F

CODE_03ACC9:
#_03ACC9: LDY.w #$0048

#_03ACCC: LDA.w #$0020
#_03ACCF: JSR ROUTINE_039664

#_03ACD2: LDY.w #$0048
#_03ACD5: LDA.w #$0020
#_03ACD8: JSR ROUTINE_039C2D
#_03ACDB: JMP ROUTINE_0388B2

;===================================================================================================

ROUTINE_03ACDE:
#_03ACDE: TYX

#_03ACDF: LDA.w #$004A
#_03ACE2: STA.l $0004AA

#_03ACE6: LDA.w $080C,X
#_03ACE9: STA.b $20

#_03ACEB: LDA.w $080E,X
#_03ACEE: CLC
#_03ACEF: ADC.w #$0032
#_03ACF2: STA.b $22

#_03ACF4: LDA.w #$000E
#_03ACF7: STA.b $24

#_03ACF9: LDA.w #$0220
#_03ACFC: STA.b $26

#_03ACFE: LDA.w #$0D3A
#_03AD01: STA.b $28

#_03AD03: LDA.w #$FFEA
#_03AD06: STA.b $30
#_03AD08: STZ.b $2C
#_03AD0A: PHY
#_03AD0B: JSL PrepEnemySpawn_long
#_03AD0F: PLY

#_03AD10: LDA.w #$021A
#_03AD13: STA.w $0810,X

#_03AD16: LDA.w #$0020
#_03AD19: STA.l $7FE818,X

#_03AD1D: LDA.w #$0D36
#_03AD20: STA.w $0806,X
#_03AD23: JMP CODE_03AE5D

;===================================================================================================

ROUTINE_03AD26:
#_03AD26: LDA.w #$201E
#_03AD29: STA.w $0808,X
#_03AD2C: JMP ROUTINE_038860

;===================================================================================================

ROUTINE_03AD2F:
#_03AD2F: TYX

#_03AD30: LDA.w #$0222
#_03AD33: STA.w $0810,X

#_03AD36: LDA.w #$FE00
#_03AD39: STA.w $0800,X

#_03AD3C: LDA.w #$FFFF
#_03AD3F: STA.w $0812,X
#_03AD42: STZ.w $0814,X
#_03AD45: STZ.w $0818,X

#_03AD48: LDA.w #$0D3A
#_03AD4B: STA.w $0806,X
#_03AD4E: CLC

#_03AD4F: LDA.w $080E,X
#_03AD52: ADC.w #$0080
#_03AD55: STA.w $080E,X

#_03AD58: LDA.w #$0070
#_03AD5B: STA.w $0816,X

#_03AD5E: LDA.w #$2000
#_03AD61: ORA.w #$001E
#_03AD64: STA.w $0808,X
#_03AD67: JMP ROUTINE_038860

;===================================================================================================

ROUTINE_03AD6A:
#_03AD6A: TYX
#_03AD6B: DEC.w $0816,X

#_03AD6E: LDA.w $0816,X
#_03AD71: STA.b $20
#_03AD73: AND.w #$F000
#_03AD76: BNE CODE_03AD7F

#_03AD78: LDA.b $20
#_03AD7A: AND.w #$0FFF
#_03AD7D: BNE CODE_03ADA6

CODE_03AD7F:
#_03AD7F: LDA.b $20
#_03AD81: AND.w #$F000
#_03AD84: BEQ CODE_03AD8E

#_03AD86: CMP.w #$1000
#_03AD89: BEQ CODE_03AD96

#_03AD8B: JMP ROUTINE_038C85

CODE_03AD8E:
#_03AD8E: LDA.w #$1040
#_03AD91: STA.w $0816,X
#_03AD94: BRA CODE_03ADA6

CODE_03AD96:
#_03AD96: LDA.b $20
#_03AD98: AND.w #$0FFF
#_03AD9B: BNE CODE_03ADA0

#_03AD9D: JMP ROUTINE_038C85

CODE_03ADA0:
#_03ADA0: LDA.w #$0001
#_03ADA3: STA.w $0818,X

CODE_03ADA6:
#_03ADA6: LDY.w #$0048
#_03ADA9: JSR ROUTINE_0392EE
#_03ADAC: BEQ CODE_03ADB9

#_03ADAE: JSR ROUTINE_039385
#_03ADB1: BNE CODE_03ADB9

#_03ADB3: JSR ROUTINE_038A25_0020
#_03ADB6: JMP CODE_03B40F

CODE_03ADB9:
#_03ADB9: LDY.w #$0038

#_03ADBC: LDA.w #$0022
#_03ADBF: JSR ROUTINE_039664

#_03ADC2: LDY.w #$0038
#_03ADC5: LDA.w #$0022
#_03ADC8: JSR ROUTINE_039C2D

#_03ADCB: LDA.w $080E,X
#_03ADCE: CLC
#_03ADCF: ADC.w #$0010
#_03ADD2: STA.w $080E,X

#_03ADD5: LDA.w $080C,X
#_03ADD8: EOR.w #$0010
#_03ADDB: STA.w $080C,X

#_03ADDE: LDA.w #$201E
#_03ADE1: STA.w $0808,X

#_03ADE4: LDA.b $00
#_03ADE6: AND.w #$0004
#_03ADE9: BEQ CODE_03ADF0

#_03ADEB: LDA.w #$0D3B
#_03ADEE: BRA CODE_03ADF3

CODE_03ADF0:
#_03ADF0: LDA.w #$0D3A

CODE_03ADF3:
#_03ADF3: STA.w $0806,X

#_03ADF6: LDA.w #$201E
#_03ADF9: STA.w $0808,X

#_03ADFC: LDA.w $0818,X
#_03ADFF: BEQ CODE_03AE08

#_03AE01: LDA.b $00
#_03AE03: AND.w #$0007
#_03AE06: BEQ .exit

CODE_03AE08:
#_03AE08: JMP ROUTINE_038860

.exit
#_03AE0B: RTS

;===================================================================================================

ROUTINE_03AE0C:
#_03AE0C: TYX

#_03AE0D: LDA.l $7FE818,X
#_03AE11: DEC A
#_03AE12: STA.l $7FE818,X
#_03AE16: BNE CODE_03AE5A

#_03AE18: LDA.l $7FE81E,X
#_03AE1C: EOR.w #$0001
#_03AE1F: STA.l $7FE81E,X
#_03AE23: BEQ CODE_03AE2D

#_03AE25: LDA.w #$0D34
#_03AE28: STA.w $0806,X
#_03AE2B: BRA CODE_03AE33

CODE_03AE2D:
#_03AE2D: LDA.w #$0D32
#_03AE30: STA.w $0806,X

CODE_03AE33:
#_03AE33: LDA.w #$0010
#_03AE36: STA.l $7FE818,X

#_03AE3A: LDA.l $7FE81A,X
#_03AE3E: DEC A
#_03AE3F: STA.l $7FE81A,X
#_03AE43: BEQ CODE_03AE47

#_03AE45: BRA CODE_03AE5A

CODE_03AE47:
#_03AE47: LDA.w #$0212
#_03AE4A: STA.w $0810,X

#_03AE4D: LDA.w #$000F
#_03AE50: STA.l $7FE818,X

#_03AE54: LDA.w #$0D36
#_03AE57: STA.w $0806,X

CODE_03AE5A:
#_03AE5A: JMP CODE_03AE5D

CODE_03AE5D:
#_03AE5D: LDA.w $04F4
#_03AE60: BEQ CODE_03AE68

#_03AE62: JSR ROUTINE_038A25_0020
#_03AE65: JMP ROUTINE_03B43C

CODE_03AE68:
#_03AE68: LDY.w #$0048
#_03AE6B: JSR ROUTINE_0392EE
#_03AE6E: BEQ CODE_03AE7B

#_03AE70: JSR ROUTINE_039385
#_03AE73: BNE CODE_03AE7B

#_03AE75: JSR ROUTINE_038A25_0020
#_03AE78: JMP CODE_03B40F

CODE_03AE7B:
#_03AE7B: LDY.w #$0040

#_03AE7E: LDA.w #$0020
#_03AE81: JSR ROUTINE_039664

#_03AE84: LDY.w #$0040
#_03AE87: LDA.w #$0020
#_03AE8A: JSR ROUTINE_039C2D

#_03AE8D: LDA.w #ROUTINE_03B43C
#_03AE90: JSR ROUTINE_038983
#_03AE93: BNE CODE_03AE96

#_03AE95: RTS

CODE_03AE96:
#_03AE96: JMP ROUTINE_0388B2

;===================================================================================================

ROUTINE_03AE99:
#_03AE99: TYX
#_03AE9A: STZ.w $080A,X
#_03AE9D: JMP CODE_03BD07

;===================================================================================================

ROUTINE_03AEA0:
#_03AEA0: TYX
#_03AEA1: JSR ROUTINE_03AE99

#_03AEA4: LDA.w #data03AEAD
#_03AEA7: LDY.w #$0003
#_03AEAA: JMP ROUTINE_0390D7

#data03AEAD:
#_03AEAD: db $02,$00,$00,$00,$00,$00,$48,$02
#_03AEB5: db $01,$00,$00,$00,$00,$02,$48,$02
#_03AEBD: db $01,$00

;===================================================================================================

ROUTINE_03AEBF:
#_03AEBF: TYX
#_03AEC0: JSR ROUTINE_03AE99

#_03AEC3: LDA.w #data03AECC
#_03AEC6: LDY.w #$0003
#_03AEC9: JMP ROUTINE_0390D7

#data03AECC:
#_03AECC: db $02,$00,$40,$FE,$00,$00,$48,$02
#_03AED4: db $01,$00,$C0,$01,$00,$00,$48,$02
#_03AEDC: db $01,$00

;===================================================================================================

ROUTINE_03AEDE:
#_03AEDE: TYX
#_03AEDF: JSR ROUTINE_03AE99

#_03AEE2: LDA.w #data03AEEB
#_03AEE5: LDY.w #$0003
#_03AEE8: JMP ROUTINE_0390D7

#data03AEEB:
#_03AEEB: db $02,$00,$00,$00,$40,$FE,$48,$02
#_03AEF3: db $01,$00,$00,$00,$C0,$01,$48,$02
#_03AEFB: db $01,$00

;===================================================================================================

ROUTINE_03AEFD:
#_03AEFD: TYX
#_03AEFE: JSR ROUTINE_03AE99

#_03AF01: LDA.w #data03AF0A
#_03AF04: LDY.w #$0003
#_03AF07: JMP CODE_0390D7

#data03AF0A:
#_03AF0A: db $02,$00,$80,$FF,$80,$FF,$48,$02
#_03AF12: db $01,$00,$80,$FF,$80,$00,$48,$02
#_03AF1A: db $01,$00,$80,$00,$80,$FF,$48,$02
#_03AF22: db $01,$00,$80,$00,$80,$00,$48,$02
#_03AF2A: db $01,$00

;===================================================================================================

ROUTINE_03AF2C:
#_03AF2C: TYX
#_03AF2D: JSR ROUTINE_03AE99

#_03AF30: LDA.w #$AF39
#_03AF33: LDY.w #$0003
#_03AF36: JMP CODE_0390D7

;===================================================================================================

ROUTINE_03AF4B:
#_03AF4B: TYX
#_03AF4C: JSR ROUTINE_03AF52
#_03AF4F: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03AF52:
#_03AF52: JSL ROUTINE_09B010
#_03AF56: JSR ROUTINE_03AF9D

#_03AF59: LDA.w UNREACH_03AF91,Y
#_03AF5C: STA.w $0806,X

#_03AF5F: LDA.w #$0020
#_03AF62: STA.w $080A,X
#_03AF65: JSR GetDifficultyIndex_bank03

#_03AF68: LDA.w UNREACH_03AF8B,Y
#_03AF6B: STA.l $7FE812,X

#_03AF6F: LDA.w #$00C0
#_03AF72: JSL ROUTINE_09AC87

#_03AF76: LDA.w #$003C
#_03AF79: STA.w $0816,X

#_03AF7C: LDA.w #$FFF0
#_03AF7F: STA.l $7FE814,X

#_03AF83: LDA.w #$270F
#_03AF86: STA.l $7FE81E,X
#_03AF8A: RTS

UNREACH_03AF8B:
#_03AF8B: db $05,$00,$06,$00,$04,$00

UNREACH_03AF91:
#_03AF91: db $F6,$0D,$F7,$0D,$F2,$0D,$F3,$0D

;===================================================================================================

ROUTINE_03AF99:
#_03AF99: JSR ROUTINE_03AF9D
#_03AF9C: RTL

;===================================================================================================

ROUTINE_03AF9D:
#_03AF9D: LDA.w $19EE
#_03AFA0: SEC
#_03AFA1: SBC.w $080C,X
#_03AFA4: STA.b $24
#_03AFA6: BMI CODE_03AFAF

#_03AFA8: STA.b $20

#_03AFAA: LDA.w #$0001
#_03AFAD: BRA CODE_03AFB8

CODE_03AFAF:
#_03AFAF: EOR.w #$FFFF
#_03AFB2: INC A
#_03AFB3: STA.b $20

#_03AFB5: LDA.w #$0000

CODE_03AFB8:
#_03AFB8: STA.b $28

#_03AFBA: LDA.w $19F0
#_03AFBD: SEC
#_03AFBE: SBC.w $080E,X
#_03AFC1: STA.b $26
#_03AFC3: BMI CODE_03AFCC

#_03AFC5: STA.b $22

#_03AFC7: LDA.w #$0002
#_03AFCA: BRA CODE_03AFD5

CODE_03AFCC:
#_03AFCC: EOR.w #$FFFF
#_03AFCF: INC A
#_03AFD0: STA.b $22

#_03AFD2: LDA.w #$0000

CODE_03AFD5:
#_03AFD5: STA.b $2A
#_03AFD7: CLC
#_03AFD8: ADC.b $28
#_03AFDA: ASL A
#_03AFDB: TAY
#_03AFDC: RTS

;===================================================================================================

ROUTINE_03AFDD:
#_03AFDD: TYX

#_03AFDE: LDA.b $00
#_03AFE0: AND.w #$003F
#_03AFE3: BNE CODE_03AFEC

#_03AFE5: LDA.w #$005F
#_03AFE8: STA.l $0004AA

CODE_03AFEC:
#_03AFEC: JSR ROUTINE_03B129
#_03AFEF: TXY
#_03AFF0: STZ.b $20
#_03AFF2: JSR ROUTINE_03B180
#_03AFF5: JMP CODE_03B1CA

;===================================================================================================

ROUTINE_03AFF8:
#_03AFF8: TYX
#_03AFF9: DEC.w $081C,X
#_03AFFC: BNE CODE_03B039

#_03AFFE: JSR AdvanceAIModeDown

#_03B001: LDA.l $7FE812,X
#_03B005: DEC A
#_03B006: STA.l $7FE812,X
#_03B00A: BPL CODE_03B032

#_03B00C: LDA.w #$005F
#_03B00F: STA.l $0004AA
#_03B013: JSR ROUTINE_03AF9D

#_03B016: LDA.w UNREACH_03B042,Y
#_03B019: STA.w $0806,X
#_03B01C: TYA
#_03B01D: STA.l $7FE816,X
#_03B021: JSR GetDifficultyIndex_bank03

#_03B024: LDA.w UNREACH_03B03C,Y
#_03B027: STA.w $081C,X

#_03B02A: LDA.w #$024E
#_03B02D: STA.w $0810,X
#_03B030: BRA CODE_03B039

CODE_03B032:
#_03B032: LDA.w #$0043
#_03B035: STA.l $0004AA

CODE_03B039:
#_03B039: JMP CODE_03B1CA

UNREACH_03B03C:
#_03B03C: db $07,$00,$0F,$00,$03,$00

UNREACH_03B042:
#_03B042: db $F6,$0D,$F2,$0D,$F3,$0D,$F7,$0D

;===================================================================================================

ROUTINE_03B04A:
#_03B04A: TYX

#_03B04B: LDA.b $00
#_03B04D: AND.w $081C,X
#_03B050: BNE CODE_03B08D

#_03B052: LDA.w #$005E
#_03B055: STA.l $0004AA

#_03B059: LDA.l $7FE816,X
#_03B05D: CLC
#_03B05E: ADC.w #$0002
#_03B061: AND.w #$0006
#_03B064: STA.l $7FE816,X
#_03B068: TAY
#_03B069: BNE CODE_03B087

#_03B06B: LSR.w $081C,X
#_03B06E: BNE CODE_03B087

#_03B070: LDA.w #$0000
#_03B073: STA.l $7FE814,X

#_03B077: LDA.w #$FFB1
#_03B07A: STA.w $080A,X

#_03B07D: LDA.w #$0004
#_03B080: STA.l $7FE81E,X
#_03B084: JSR AdvanceAIModeUp

CODE_03B087:
#_03B087: LDA.w UNREACH_03B042,Y
#_03B08A: STA.w $0806,X

CODE_03B08D:
#_03B08D: JMP CODE_03B1CA

;===================================================================================================

ROUTINE_03B090:
#_03B090: TYX

#_03B091: LDA.b $00
#_03B093: AND.w #$0004
#_03B096: BNE CODE_03B0A4

#_03B098: LDA.w #$005E
#_03B09B: STA.l $0004AA

#_03B09F: LDA.w #$0DFA
#_03B0A2: BRA CODE_03B0A7

CODE_03B0A4:
#_03B0A4: LDA.w #$0DFC

CODE_03B0A7:
#_03B0A7: STA.w $0806,X

#_03B0AA: LDA.w #$0001
#_03B0AD: STA.b $20
#_03B0AF: JSR ROUTINE_03B180
#_03B0B2: JMP CODE_03B1CA

;===================================================================================================

ROUTINE_03B0B5:
#_03B0B5: PHX

#_03B0B6: LDA.w $0804,X
#_03B0B9: CLC
#_03B0BA: ADC.w $080A,X
#_03B0BD: ADC.w #$00C0
#_03B0C0: TAY

#_03B0C1: LDA.w $0802,X
#_03B0C4: JSR ROUTINE_038E3D
#_03B0C7: CMP.w #$0018
#_03B0CA: BEQ CODE_03B0D3

#_03B0CC: CMP.w #$001A
#_03B0CF: BEQ CODE_03B0D3

#_03B0D1: BRA CODE_03B124

CODE_03B0D3:
#_03B0D3: LDA.w $0804,X
#_03B0D6: CLC
#_03B0D7: ADC.w $080A,X
#_03B0DA: TAY

#_03B0DB: LDA.w $0802,X
#_03B0DE: JSR ROUTINE_038E3D
#_03B0E1: CMP.w #$0018
#_03B0E4: BEQ CODE_03B0ED

#_03B0E6: CMP.w #$001A
#_03B0E9: BEQ CODE_03B0ED

#_03B0EB: BRA CODE_03B124

CODE_03B0ED:
#_03B0ED: LDA.w $080A,X
#_03B0F0: CMP.w #$FFD0
#_03B0F3: BMI CODE_03B124

#_03B0F5: LDA.w $0808,X
#_03B0F8: AND.w #$FE00
#_03B0FB: STA.b $24
#_03B0FD: CLC

#_03B0FE: LDA.w $0804,X
#_03B101: ADC.w $080A,X
#_03B104: STA.b $22

#_03B106: LDA.w $0802,X
#_03B109: STA.b $20

#_03B10B: LDA.w $05A0
#_03B10E: AND.w #$0010
#_03B111: BNE CODE_03B118

#_03B113: LDA.w #$0FF0
#_03B116: BRA CODE_03B11B

CODE_03B118:
#_03B118: LDA.w #$0FF2

CODE_03B11B:
#_03B11B: JSL ROUTINE_028220

#_03B11F: LDA.w #$0001
#_03B122: BRA CODE_03B127

CODE_03B124:
#_03B124: LDA.w #$0000

CODE_03B127:
#_03B127: PLX
#_03B128: RTS

;===================================================================================================

ROUTINE_03B129:
#_03B129: LDA.l $7FE814,X
#_03B12D: CLC
#_03B12E: ADC.w #$0003
#_03B131: STA.l $7FE814,X
#_03B135: CMP.w #$0018
#_03B138: BPL CODE_03B13D

#_03B13A: JMP CODE_03B15A

CODE_03B13D:
#_03B13D: LDA.w #$FFE8
#_03B140: STA.l $7FE814,X

#_03B144: LDA.w #$0020
#_03B147: STA.w $080A,X
#_03B14A: JSR ROUTINE_03B164
#_03B14D: JSR GetDifficultyIndex_bank03

#_03B150: LDA.w UNREACH_03B15E,Y
#_03B153: STA.w $081C,X
#_03B156: TXY
#_03B157: JMP AdvanceAIModeUp

CODE_03B15A:
#_03B15A: JSR ROUTINE_03B16E
#_03B15D: RTS

UNREACH_03B15E:
#_03B15E: db $0C,$00,$1C,$00,$06,$00

;===================================================================================================

ROUTINE_03B164:
#_03B164: JSR ROUTINE_03AF9D

#_03B167: LDA.w UNREACH_03AF91,Y
#_03B16A: STA.w $0806,X
#_03B16D: RTS

;===================================================================================================

ROUTINE_03B16E:
#_03B16E: JSR ROUTINE_03AF9D

#_03B171: LDA.w UNREACH_03B178,Y
#_03B174: STA.w $0806,X
#_03B177: RTS

UNREACH_03B178:
#_03B178: db $F8,$0D,$F9,$0D,$F4,$0D,$F5,$0D

;===================================================================================================

ROUTINE_03B180:
#_03B180: PHX
#_03B181: TXY
#_03B182: DEC.w $0816,X
#_03B185: BNE CODE_03B1B4

#_03B187: LDA.w #$003C
#_03B18A: STA.w $0816,X

#_03B18D: LDA.l $7FE81E,X
#_03B191: BEQ CODE_03B1B4

#_03B193: DEC A
#_03B194: STA.l $7FE81E,X
#_03B198: PHX
#_03B199: JSR ROUTINE_03A295
#_03B19C: PLX
#_03B19D: JSR GetDifficultyIndex_bank03

#_03B1A0: LDA.w UNREACH_03B1C4,Y
#_03B1A3: STA.b $20

#_03B1A5: LDA.b $2C
#_03B1A7: JSR ROUTINE_03A07D

#_03B1AA: LDA.b $20
#_03B1AC: STA.w $0818,X

#_03B1AF: LDA.b $22
#_03B1B1: STA.w $081A,X

CODE_03B1B4:
#_03B1B4: PLX
#_03B1B5: JSR ROUTINE_03B636

#_03B1B8: LDA.w $080A,X
#_03B1BB: CLC
#_03B1BC: ADC.l $7FE814,X
#_03B1C0: STA.w $080A,X
#_03B1C3: RTS

UNREACH_03B1C4:
#_03B1C4: db $A0,$01,$80,$01,$00,$02

CODE_03B1CA:
#_03B1CA: LDY.w #$0048
#_03B1CD: JSR ROUTINE_0392EE
#_03B1D0: BEQ CODE_03B1DD

#_03B1D2: JSR ROUTINE_039385
#_03B1D5: BNE CODE_03B1DD

#_03B1D7: JSR ROUTINE_038A25_0020
#_03B1DA: JMP CODE_03B40F

CODE_03B1DD:
#_03B1DD: LDY.w #$0040

#_03B1E0: LDA.w #$0020
#_03B1E3: JSR ROUTINE_039664

#_03B1E6: LDY.w #$0040
#_03B1E9: LDA.w #$0020
#_03B1EC: JSR ROUTINE_039C2D

#_03B1EF: LDA.w #ROUTINE_03B43C
#_03B1F2: JSR ROUTINE_03A2AE
#_03B1F5: BNE CODE_03B1F8

#_03B1F7: RTS

CODE_03B1F8:
#_03B1F8: LDA.w $0810,X
#_03B1FB: CMP.w #$0250
#_03B1FE: BEQ CODE_03B217

#_03B200: JSR ROUTINE_03B0B5
#_03B203: CMP.w #$0001
#_03B206: BNE CODE_03B20B

#_03B208: JMP ROUTINE_0388B2

CODE_03B20B:
#_03B20B: LDA.w #$FF00

#_03B20E: LDY.w #$201C
#_03B211: JSR ROUTINE_038CAA
#_03B214: JMP ROUTINE_0388B8

CODE_03B217:
#_03B217: JMP ROUTINE_0388B2

;===================================================================================================

ROUTINE_03B21A:
#_03B21A: TYX
#_03B21B: STZ.w $080A,X

#_03B21E: LDA.w #data03B22A
#_03B221: LDY.w #$0003
#_03B224: JSR ROUTINE_0390D7
#_03B227: JMP CODE_03BD07

#data03B22A:
#_03B22A: db $01,$00,$00,$00,$00,$00,$10,$02
#_03B232: db $00,$00

;===================================================================================================

ROUTINE_03B234:
#_03B234: TYX
#_03B235: STZ.w $080A,X

#_03B238: LDA.w #data03B244
#_03B23B: LDY.w #$0003
#_03B23E: JSR ROUTINE_0390D7
#_03B241: JMP CODE_03BD07

#data03B244:
#_03B244: db $02,$00,$00,$FF,$00,$00,$10,$02
#_03B24C: db $00,$00,$00,$01,$00,$00,$10,$02
#_03B254: db $00,$00

;===================================================================================================

ROUTINE_03B256:
#_03B256: TYX

#_03B257: LDA.w $081E,X
#_03B25A: BNE CODE_03B269

#_03B25C: LDA.l $7FE816,X
#_03B260: AND.w #$00FF
#_03B263: JSR PrepEnemySpawnMyCoordinates
#_03B266: JMP ROUTINE_038C85

CODE_03B269:
#_03B269: LDA.w $0816,X
#_03B26C: BNE .exit

#_03B26E: CLC

#_03B26F: LDA.l $7FE800,X
#_03B273: ADC.w #$0100
#_03B276: STA.l $7FE800,X
#_03B27A: JMP ROUTINE_038C85

.exit
#_03B27D: RTS

;===================================================================================================

ROUTINE_03B27E:
#_03B27E: TYX
#_03B27F: STZ.w $080A,X

#_03B282: LDA.w #data03B28E
#_03B285: LDY.w #$0003
#_03B288: JSR ROUTINE_0390D7
#_03B28B: JMP CODE_03BD07

#data03B28E:
#_03B28E: db $03,$00,$00,$00,$00,$00,$10,$02
#_03B296: db $00,$00,$C0,$FE,$00,$00,$10,$02
#_03B29E: db $00,$00,$40,$01,$00,$00,$10,$02
#_03B2A6: db $00,$00

;===================================================================================================

ROUTINE_03B2A8:
#_03B2A8: TYX
#_03B2A9: STZ.w $080A,X

#_03B2AC: LDA.w #data03B2B8
#_03B2AF: LDY.w #$0003
#_03B2B2: JSR ROUTINE_0390D7
#_03B2B5: JMP CODE_03BD07

#data03B2B8:
#_03B2B8: db $03,$00,$00,$00,$60,$FE,$10,$02
#_03B2C0: db $00,$00,$00,$00,$00,$00,$10,$02
#_03B2C8: db $00,$00,$00,$00,$A0,$01,$10,$02
#_03B2D0: db $00,$00

;===================================================================================================

ROUTINE_03B2D2:
#_03B2D2: TYX
#_03B2D3: STZ.w $080A,X

#_03B2D6: LDA.w #$0062
#_03B2D9: STA.l $7FE816,X

#_03B2DD: LDA.w #$0001
#_03B2E0: STA.w $0812,X
#_03B2E3: STA.w $0814,X

#_03B2E6: LDA.w #$0000
#_03B2E9: STA.w $0818,X

#_03B2EC: LDA.w #$0242
#_03B2EF: STA.w $0810,X
#_03B2F2: RTS

;---------------------------------------------------------------------------------------------------

data03B2F3:
#_03B2F3: db $05,$00,$00,$00,$00,$00,$42,$02
#_03B2FB: db $00,$00,$C0,$FE,$00,$00,$42,$02
#_03B303: db $00,$00,$80,$FD,$00,$00,$42,$02
#_03B30B: db $00,$00,$40,$FC,$00,$00,$42,$02
#_03B313: db $00,$00,$00,$FB,$00,$00,$42,$02
#_03B31B: db $00,$00

;===================================================================================================

ROUTINE_03B31D:
#_03B31D: TYX

#_03B31E: LDA.w $19F0
#_03B321: CMP.w $080E,X
#_03B324: BCS CODE_03B338

#_03B326: LDA.w #$0100
#_03B329: STA.w $081E,X
#_03B32C: STA.w $0816,X

#_03B32F: LDA.w $05BC
#_03B332: BNE .exit

#_03B334: JMP ROUTINE_038C85

.exit
#_03B337: RTS

CODE_03B338:
#_03B338: LDA.w $0812,X
#_03B33B: DEC A
#_03B33C: STA.w $0812,X
#_03B33F: BEQ CODE_03B344

#_03B341: JMP CODE_03B37B

CODE_03B344:
#_03B344: INC A
#_03B345: STA.w $0812,X
#_03B348: DEC.w $0814,X
#_03B34B: BEQ CODE_03B350

#_03B34D: JMP CODE_03B37B

CODE_03B350:
#_03B350: LDA.w #$0040
#_03B353: STA.w $0814,X

#_03B356: LDA.w $0818,X
#_03B359: CMP.w #$0005
#_03B35C: BEQ CODE_03B372

#_03B35E: LDA.w #data00B385
#_03B361: LDY.w #$0003
#_03B364: JSR ROUTINE_0390D7
#_03B367: INC.w $0818,X

#_03B36A: LDA.w #$0006
#_03B36D: CMP.w $0818,X
#_03B370: BNE CODE_03B37B

CODE_03B372:
#_03B372: STZ.w $0818,X

#_03B375: LDA.w #$7FFF
#_03B378: STA.w $0812,X

CODE_03B37B:
#_03B37B: LDA.w #$0100
#_03B37E: STA.w $081E,X
#_03B381: STA.w $0816,X
#_03B384: RTS

;---------------------------------------------------------------------------------------------------

data03B385:
#_03B385: db $01,$00,$00,$00,$00,$00,$44,$02
#_03B38D: db $00,$00

;===================================================================================================

ROUTINE_03B38F:
#_03B38F: TYX
#_03B390: JSR ROUTINE_03AA1E

#_03B393: LDA.l $7FE81C,X
#_03B397: TAY

#_03B398: LDA.w $0818,Y
#_03B39B: STA.b $20
#_03B39D: TXY

#_03B39E: LDA.w #$000B
#_03B3A1: STA.l $7FE814,X

#_03B3A5: LDA.w #$0000
#_03B3A8: STA.l $7FE816,X

#_03B3AC: LDA.b $20
#_03B3AE: ASL A
#_03B3AF: TAX

#_03B3B0: LDA.w UNREACH_03B3BF,X
#_03B3B3: TYX
#_03B3B4: STA.l $7FE818,X

#_03B3B8: LDA.w #$0246
#_03B3BB: STA.w $0810,X
#_03B3BE: RTS

UNREACH_03B3BF:
#_03B3BF: db $30,$00,$C0,$00,$90,$00,$70,$00
#_03B3C7: db $50,$00,$30,$00

;===================================================================================================

ROUTINE_03B3CB:
#_03B3CB: TYX

#_03B3CC: LDA.w #$8001
#_03B3CF: STA.w $0800,X

#_03B3D2: LDA.w $080C,X
#_03B3D5: CLC
#_03B3D6: ADC.l $7FE814,X
#_03B3DA: STA.w $080C,X

#_03B3DD: LDA.w $080E,X
#_03B3E0: CLC
#_03B3E1: ADC.l $7FE816,X
#_03B3E5: STA.w $080E,X

#_03B3E8: LDA.w #$0603
#_03B3EB: JSR ROUTINE_038D39

#_03B3EE: LDA.l $7FE818,X
#_03B3F2: DEC A
#_03B3F3: STA.l $7FE818,X
#_03B3F7: BNE CODE_03B40C

#_03B3F9: LDA.w #$0218
#_03B3FC: STA.w $0810,X

#_03B3FF: LDA.w #$0D34
#_03B402: STA.w $0806,X

#_03B405: LDA.w #$0030
#_03B408: STA.l $7FE818,X

CODE_03B40C:
#_03B40C: JMP CODE_03AE5D

CODE_03B40F:
#_03B40F: LDA.l $7FE81C,X
#_03B413: TAY

#_03B414: LDA.w $081E,Y
#_03B417: DEC A
#_03B418: STA.w $081E,Y

#_03B41B: LDA.l $7FE81C,X
#_03B41F: TAY

#_03B420: LDA.w $0816,Y
#_03B423: DEC A
#_03B424: STA.w $0816,Y
#_03B427: BNE CODE_03B435

#_03B429: LDA.w $080C,X
#_03B42C: STA.w $080C,Y

#_03B42F: LDA.w $080E,X
#_03B432: STA.w $080E,Y

CODE_03B435:
#_03B435: JSR ROUTINE_038C85

#_03B438: LDA.w $0800,X
#_03B43B: RTS

;===================================================================================================

ROUTINE_03B43C:
#_03B43C: LDA.l $7FE81C,X
#_03B440: TAY

#_03B441: LDA.w $0816,Y
#_03B444: DEC A
#_03B445: STA.w $0816,Y
#_03B448: BNE CODE_03B456

#_03B44A: LDA.w $080C,X
#_03B44D: STA.w $080C,Y

#_03B450: LDA.w $080E,X
#_03B453: STA.w $080E,Y

CODE_03B456:
#_03B456: JSR ROUTINE_038C85

#_03B459: LDA.w $0800,X
#_03B45C: RTS

;===================================================================================================

ROUTINE_03B45D:
#_03B45D: STZ.b $3E

CODE_03B45F:
#_03B45F: LDA.l $7FE816,X
#_03B463: ASL A

#_03B464: LDA.w #$0100
#_03B467: BCC CODE_03B46C

#_03B469: LDA.w #$FF00

CODE_03B46C:
#_03B46C: STA.b $3C
#_03B46E: CLC
#_03B46F: ADC.w $0804,X
#_03B472: TAY

#_03B473: LDA.w $0802,X
#_03B476: JSR ROUTINE_038E3D

#_03B479: LDA.b $34
#_03B47B: BEQ CODE_03B4AA

#_03B47D: LDA.w #$0000
#_03B480: STA.l $7FE816,X

#_03B484: LDA.l $7FE814,X
#_03B488: BNE CODE_03B4AA

#_03B48A: LDA.b $3E
#_03B48C: BEQ CODE_03B4A0

#_03B48E: LDA.l $7FE81A,X
#_03B492: EOR.w #$FFFF
#_03B495: INC A
#_03B496: STA.l $7FE81A,X
#_03B49A: STA.l $7FE816,X
#_03B49E: BRA CODE_03B4F1

CODE_03B4A0:
#_03B4A0: INC.b $3E

#_03B4A2: LDA.l $7FE818,X
#_03B4A6: STA.l $7FE814,X

CODE_03B4AA:
#_03B4AA: LDA.l $7FE814,X
#_03B4AE: ASL A

#_03B4AF: LDA.w #$0100
#_03B4B2: BCC CODE_03B4B7

#_03B4B4: LDA.w #$FF00

CODE_03B4B7:
#_03B4B7: CLC
#_03B4B8: ADC.w $0802,X

#_03B4BB: LDY.w $0804,X
#_03B4BE: JSR ROUTINE_038E3D

#_03B4C1: LDA.b $34
#_03B4C3: BEQ CODE_03B4F1

#_03B4C5: LDA.w #$0000
#_03B4C8: STA.l $7FE814,X

#_03B4CC: LDA.l $7FE816,X
#_03B4D0: BNE CODE_03B4F1

#_03B4D2: LDA.b $3E
#_03B4D4: BEQ CODE_03B4E4

#_03B4D6: LDA.l $7FE818,X
#_03B4DA: EOR.w #$FFFF
#_03B4DD: INC A
#_03B4DE: STA.l $7FE818,X
#_03B4E2: BRA CODE_03B4F1

CODE_03B4E4:
#_03B4E4: INC.b $3E

#_03B4E6: LDA.l $7FE81A,X
#_03B4EA: STA.l $7FE816,X
#_03B4EE: JMP CODE_03B45F

CODE_03B4F1:
#_03B4F1: CLC

#_03B4F2: LDA.w $080E,X
#_03B4F5: ADC.l $7FE816,X
#_03B4F9: STA.w $080E,X
#_03B4FC: CLC

#_03B4FD: LDA.w $080C,X
#_03B500: ADC.l $7FE814,X
#_03B504: STA.w $080C,X
#_03B507: RTS

;===================================================================================================

ROUTINE_03B508:
#_03B508: TYX

#_03B509: LDA.w #$0078
#_03B50C: STA.w $0818,X

#_03B50F: LDA.w #$0000
#_03B512: STA.l $7FE814,X

#_03B516: LDA.w $080C,X
#_03B519: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03B51C:
#_03B51C: TYX

#_03B51D: LDA.l $7FE814,X
#_03B521: ASL A
#_03B522: TAX
#_03B523: JMP (PTR16_03B526,X)

PTR16_03B526:
#_03B526: dw ROUTINE_03B52E
#_03B528: dw ROUTINE_03B56A
#_03B52A: dw ROUTINE_03B585
#_03B52C: dw ROUTINE_03B5A6

;===================================================================================================

ROUTINE_03B52E:
#_03B52E: TYX
#_03B52F: JSR ROUTINE_03B546
#_03B532: BEQ .exit

#_03B534: LDA.w #$008C
#_03B537: STA.w $0818,X

#_03B53A: LDA.w #$0001
#_03B53D: STA.l $7FE814,X

.exit
#_03B541: RTS

;===================================================================================================

ROUTINE_03B546_long:
#_03B542: JSR ROUTINE_03B546
#_03B545: RTL

;===================================================================================================

ROUTINE_03B546:
#_03B546: JSR ROUTINE_0392C0
#_03B549: STZ.b $20

#_03B54B: LDA.w $0802,X
#_03B54E: CMP.w #$0010
#_03B551: BCC CODE_03B567

#_03B553: CMP.w #$0F00
#_03B556: BCS CODE_03B567

#_03B558: LDA.w $0804,X
#_03B55B: CMP.w #$0010
#_03B55E: BCC CODE_03B567

#_03B560: CMP.w #$0C80
#_03B563: BCS CODE_03B567

#_03B565: INC.b $20

CODE_03B567:
#_03B567: LDA.b $20
#_03B569: RTS

;===================================================================================================

ROUTINE_03B56A:
#_03B56A: TYX
#_03B56B: JSR ROUTINE_03B546
#_03B56E: BNE CODE_03B578

#_03B570: LDA.w #$0001
#_03B573: STA.l $7FE814,X
#_03B577: RTS

CODE_03B578:
#_03B578: DEC.w $0818,X
#_03B57B: BNE .exit

#_03B57D: LDA.w #$0002
#_03B580: STA.l $7FE814,X

.exit
#_03B584: RTS

;===================================================================================================

ROUTINE_03B585:
#_03B585: TYX
#_03B586: STZ.b $28

#_03B588: LDA.w #DATA_03B59C
#_03B58B: LDY.w #$0003
#_03B58E: JSR ROUTINE_0390D7

#_03B591: LDA.w #$0003
#_03B594: STA.l $7FE814,X
#_03B598: STA.w $0816,X
#_03B59B: RTS

DATA_03B59C:
#_03B59C: db $01,$00,$00,$00,$00,$00,$26,$02
#_03B5A4: db $01,$00

;===================================================================================================

ROUTINE_03B5A6:
#_03B5A6: TYX

#_03B5A7: LDA.w $0816,X
#_03B5AA: BNE .exit

#_03B5AC: LDA.w #$0008
#_03B5AF: STA.w $0818,X
#_03B5B2: JMP AdvanceAIModeUp

.exit
#_03B5B5: RTS

;===================================================================================================

ROUTINE_03B5B6:
#_03B5B6: TYX

#_03B5B7: LDA.b $00
#_03B5B9: AND.w #$000F
#_03B5BC: BNE .exit

#_03B5BE: DEC.w $0818,X
#_03B5C1: BNE CODE_03B5D3

#_03B5C3: LDA.w #$0104
#_03B5C6: STA.w $0818,X

#_03B5C9: LDA.w #$0000
#_03B5CC: STA.l $7FE814,X
#_03B5D0: JMP AdvanceAIModeDown

CODE_03B5D3:
#_03B5D3: LDA.w #DATA_03B5DD

#_03B5D6: LDY.w #$0003
#_03B5D9: JSR ROUTINE_0390D7

.exit
#_03B5DC: RTS

DATA_03B5DD:
#_03B5DD: db $01,$00,$00,$00,$00,$00,$5E,$02
#_03B5E5: db $01,$00

;===================================================================================================

ROUTINE_03B5E7:
#_03B5E7: TYX

#_03B5E8: LDA.w #$0D6E
#_03B5EB: STA.w $0806,X

#_03B5EE: LDA.w #$0001
#_03B5F1: STA.w $0812,X

#_03B5F4: LDA.w #$022B
#_03B5F7: STA.w $0814,X
#_03B5FA: STZ.w $080A,X

#_03B5FD: LDA.w #$0000
#_03B600: STA.l $7FE816,X
#_03B604: PHX
#_03B605: JSR ROUTINE_03A295
#_03B608: PLX

#_03B609: LDA.w #$0240
#_03B60C: STA.b $20

#_03B60E: LDA.b $2C
#_03B610: JSR ROUTINE_03A07D

#_03B613: LDA.b $20
#_03B615: STA.w $0818,X

#_03B618: LDA.b $22
#_03B61A: STA.w $081A,X
#_03B61D: JSR ROUTINE_03A87B

#_03B620: LDA.w #$004E
#_03B623: STA.l $0004AA
#_03B627: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03B62A:
#_03B62A: TYX
#_03B62B: JSR ROUTINE_03B636
#_03B62E: JMP ROUTINE_03B64F

;===================================================================================================

ROUTINE_03B631:
#_03B631: RTS

;===================================================================================================

ROUTINE_03B632:
#_03B632: JSR ROUTINE_03B636
#_03B635: RTL

;===================================================================================================

ROUTINE_03B636:
#_03B636: CLC

#_03B637: LDA.w $080C,X
#_03B63A: ADC.w $0818,X
#_03B63D: STA.w $080C,X
#_03B640: CLC

#_03B641: LDA.w $080E,X
#_03B644: ADC.w $081A,X
#_03B647: STA.w $080E,X
#_03B64A: RTS

;===================================================================================================

ROUTINE_03B64B:
#_03B64B: JSR ROUTINE_03B64F
#_03B64E: RTL

;===================================================================================================

ROUTINE_03B64F:
#_03B64F: LDY.w #$0040
#_03B652: JSR ROUTINE_0392EE
#_03B655: BEQ CODE_03B666

#_03B657: JSR ROUTINE_039385
#_03B65A: BNE CODE_03B666

#_03B65C: JSR ROUTINE_038A25_0020
#_03B65F: JSR ROUTINE_038C85

#_03B662: LDA.w $0800,X
#_03B665: RTS

CODE_03B666:
#_03B666: LDY.w #$0030

#_03B669: LDA.w #$0020
#_03B66C: JSR ROUTINE_039664

#_03B66F: LDY.w #$0030
#_03B672: LDA.w #$0020
#_03B675: JSR ROUTINE_039C2D
#_03B678: JSR ROUTINE_03894A
#_03B67B: BNE CODE_03B67E

#_03B67D: RTS

CODE_03B67E:
#_03B67E: LDA.w #$FF00

#_03B681: LDY.w #$301C
#_03B684: JSR ROUTINE_038CAA
#_03B687: JMP ROUTINE_0388B8

;===================================================================================================

ROUTINE_03B68A:
#_03B68A: TYX
#_03B68B: JSL ROUTINE_09B010
#_03B68F: STA.l $7FE818,X

#_03B693: LDA.w #$0D70
#_03B696: STA.w $0806,X

#_03B699: LDA.w #$0078
#_03B69C: STA.w $0818,X
#_03B69F: STZ.w $081C,X
#_03B6A2: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03B6A5:
#_03B6A5: TYX

#_03B6A6: LDA.w $081C,X
#_03B6A9: CMP.w #$0004
#_03B6AC: BCS CODE_03B6B3

#_03B6AE: LDA.w #$0D70
#_03B6B1: BRA CODE_03B6B6

CODE_03B6B3:
#_03B6B3: LDA.w #$0D72

CODE_03B6B6:
#_03B6B6: STA.w $0806,X

#_03B6B9: LDA.w $081C,X
#_03B6BC: CMP.w #$0006
#_03B6BF: BCC CODE_03B6E3

#_03B6C1: STZ.w $081C,X

#_03B6C4: LDA.l $7FE818,X
#_03B6C8: INC A
#_03B6C9: STA.l $7FE818,X
#_03B6CD: CMP.w #$0003
#_03B6D0: BCC CODE_03B6E3

#_03B6D2: LDA.l $7FE81C,X
#_03B6D6: TAY

#_03B6D7: LDA.w #$0000
#_03B6DA: STA.w $0816,Y
#_03B6DD: INC.w $0810,X
#_03B6E0: INC.w $0810,X

CODE_03B6E3:
#_03B6E3: INC.w $081C,X
#_03B6E6: JSR ROUTINE_0392C0

#_03B6E9: LDA.w #$2000
#_03B6EC: ORA.w #$001E
#_03B6EF: STA.w $0808,X
#_03B6F2: JMP ROUTINE_0386A8

;===================================================================================================

ROUTINE_03B6F5:
#_03B6F5: TYX
#_03B6F6: JMP ROUTINE_038C84

;===================================================================================================

ROUTINE_03B6F9:
#_03B6F9: LDY.w #$0040
#_03B6FC: JSR ROUTINE_0392EE
#_03B6FF: BEQ CODE_03B70C

#_03B701: JSR ROUTINE_039385
#_03B704: BNE CODE_03B70C

#_03B706: JSR ROUTINE_038A25_0020
#_03B709: JMP CODE_03B40F

CODE_03B70C:
#_03B70C: LDY.w #$0030

#_03B70F: LDA.w #$0020
#_03B712: JSR ROUTINE_039664

#_03B715: LDY.w #$0030
#_03B718: LDA.w #$0020
#_03B71B: JSR ROUTINE_039C2D

#_03B71E: LDA.w #ROUTINE_03B43C
#_03B721: JSR ROUTINE_03A2AE
#_03B724: BNE CODE_03B727

#_03B726: RTS

CODE_03B727:
#_03B727: JSR ROUTINE_03B0B5
#_03B72A: CMP.w #$0001
#_03B72D: BEQ CODE_03B738

#_03B72F: LDA.w #$FF00
#_03B732: LDY.w #$201C
#_03B735: JSR ROUTINE_038CAA

CODE_03B738:
#_03B738: JMP ROUTINE_0388B8

;===================================================================================================

ROUTINE_03B73B:
#_03B73B: TYX
#_03B73C: STZ.w $080A,X

#_03B73F: LDA.w #DATA_03B74B
#_03B742: LDY.w #$0003
#_03B745: JSR ROUTINE_0390D7
#_03B748: JMP CODE_03BD07

DATA_03B74B:
#_03B74B: db $01,$00,$00,$00,$00,$00,$66,$02
#_03B753: db $01,$00

;===================================================================================================

ROUTINE_03B755:
#_03B755: TYX
#_03B756: STZ.w $080A,X

#_03B759: LDA.w #DATA_03B765
#_03B75C: LDY.w #$0003
#_03B75F: JSR ROUTINE_0390D7
#_03B762: JMP CODE_03BD07

DATA_03B765:
#_03B765: db $02,$00,$00,$FE,$00,$00,$66,$02
#_03B76D: db $01,$00,$00,$02,$00,$00,$66,$02
#_03B775: db $01,$00

;===================================================================================================

ROUTINE_03B777:
#_03B777: TYX
#_03B778: JSL ROUTINE_09B010

#_03B77C: LDA.w $0800,X
#_03B77F: ORA.w #$FF01
#_03B782: STA.w $0800,X

#_03B785: LDA.w #$0034
#_03B788: STA.w $080A,X

#_03B78B: LDA.b $00
#_03B78D: AND.w #$0001
#_03B790: ADC.w #$0DE4
#_03B793: STA.w $0806,X

#_03B796: LDA.w #$0004
#_03B799: STA.l $7FE818,X
#_03B79D: STA.l $7FE81A,X

#_03B7A1: LDA.w #$0008
#_03B7A4: STA.w $0816,X
#_03B7A7: JSR GetDifficultyIndex_bank03

#_03B7AA: LDA.w UNREACH_03B7B7,Y
#_03B7AD: CLC
#_03B7AE: ADC.w $0812,X
#_03B7B1: STA.w $0812,X
#_03B7B4: JMP AdvanceAIModeUp

UNREACH_03B7B7:
#_03B7B7: db $00,$00,$00,$00,$02,$00

;===================================================================================================

ROUTINE_03B7BD:
#_03B7BD: TYX

#_03B7BE: LDA.w $080C,X
#_03B7C1: SEC
#_03B7C2: SBC.w $19EE
#_03B7C5: BPL CODE_03B7CB

#_03B7C7: EOR.w #$FFFF
#_03B7CA: INC A

CODE_03B7CB:
#_03B7CB: STA.b $20

#_03B7CD: LDA.w $080E,X
#_03B7D0: SEC
#_03B7D1: SBC.w $19F0
#_03B7D4: BPL CODE_03B7DA

#_03B7D6: EOR.w #$FFFF
#_03B7D9: INC A

CODE_03B7DA:
#_03B7DA: STA.b $22

#_03B7DC: LDA.b $20
#_03B7DE: CMP.w #$0400
#_03B7E1: BCS CODE_03B7EA

#_03B7E3: LDA.b $22
#_03B7E5: CMP.w #$0300
#_03B7E8: BCC CODE_03B7FB

CODE_03B7EA:
#_03B7EA: LDA.b $20
#_03B7EC: CMP.w #$0300
#_03B7EF: BCS CODE_03B7F8

#_03B7F1: LDA.b $22
#_03B7F3: CMP.w #$0400
#_03B7F6: BCC CODE_03B7FB

CODE_03B7F8:
#_03B7F8: JMP CODE_03B1CA

CODE_03B7FB:
#_03B7FB: LDA.w #$8001
#_03B7FE: STA.w $0800,X
#_03B801: JSR ROUTINE_03AF9D

#_03B804: LDA.w UNREACH_03B818,Y
#_03B807: STA.w $0806,X
#_03B80A: TYA
#_03B80B: STA.l $7FE812,X
#_03B80F: INC.w $0810,X
#_03B812: INC.w $0810,X
#_03B815: JMP CODE_03B1CA

UNREACH_03B818:
#_03B818: db $E6,$0D,$E7,$0D,$E6,$0D,$E7,$0D

;===================================================================================================

ROUTINE_03B820:
#_03B820: TYX
#_03B821: DEC.w $0816,X
#_03B824: BNE CODE_03B82C

#_03B826: LDA.w #$0002
#_03B829: STA.w $0816,X

CODE_03B82C:
#_03B82C: JSR ROUTINE_03AF9D

#_03B82F: LDA.w UNREACH_03B818,Y
#_03B832: STA.w $0806,X

#_03B835: LDA.b $20
#_03B837: CMP.b $22
#_03B839: BCC CODE_03B852

#_03B83B: LDA.b $24
#_03B83D: BMI CODE_03B844

#_03B83F: LDA.w #$0008
#_03B842: BRA CODE_03B847

CODE_03B844:
#_03B844: LDA.w #$FFF8

CODE_03B847:
#_03B847: STA.w $0818,X

#_03B84A: LDA.w #$0000
#_03B84D: STA.w $081A,X
#_03B850: BRA CODE_03B867

CODE_03B852:
#_03B852: LDA.w #$0000
#_03B855: STA.w $0818,X

#_03B858: LDA.b $26
#_03B85A: BMI CODE_03B861

#_03B85C: LDA.w #$0008
#_03B85F: BRA CODE_03B864

CODE_03B861:
#_03B861: LDA.w #$FFF8

CODE_03B864:
#_03B864: STA.w $081A,X

CODE_03B867:
#_03B867: LDA.w $0816,X
#_03B86A: CMP.w #$0001
#_03B86D: BNE CODE_03B883

#_03B86F: LDA.w $0818,X
#_03B872: EOR.w #$FFFF
#_03B875: INC A
#_03B876: STA.w $0818,X

#_03B879: LDA.w $081A,X
#_03B87C: EOR.w #$FFFF
#_03B87F: INC A
#_03B880: STA.w $081A,X

CODE_03B883:
#_03B883: JSR Random
#_03B886: AND.w #$0006
#_03B889: TAY

#_03B88A: LDA.w UNREACH_03B899,Y
#_03B88D: STA.w $081E,X
#_03B890: STZ.w $081C,X
#_03B893: JSR AdvanceAIModeUp
#_03B896: JMP CODE_03B1CA

UNREACH_03B899:
#_03B899: db $14,$00,$28,$00,$3C,$00,$50,$00
#_03B8A1: db $06,$00,$04,$00,$02,$00,$00,$00

;===================================================================================================

ROUTINE_03B8A9:
#_03B8A9: TYX
#_03B8AA: INC.w $081C,X
#_03B8AD: DEC.w $081E,X
#_03B8B0: BNE CODE_03B8BB

#_03B8B2: LDA.w #$0028
#_03B8B5: STA.w $081E,X
#_03B8B8: JSR AdvanceAIModeUp

CODE_03B8BB:
#_03B8BB: LDA.w $081C,X
#_03B8BE: CMP.w #$000A
#_03B8C1: BNE CODE_03B8D8

#_03B8C3: LDA.w $0806,X
#_03B8C6: CMP.w #$0DE6
#_03B8C9: BNE CODE_03B8D0

#_03B8CB: LDA.w #$0DE8
#_03B8CE: BRA CODE_03B8D3

CODE_03B8D0:
#_03B8D0: LDA.w #$0DE9

CODE_03B8D3:
#_03B8D3: STA.w $0806,X
#_03B8D6: BRA CODE_03B8F3

CODE_03B8D8:
#_03B8D8: CMP.w #$0014
#_03B8DB: BNE CODE_03B8F3

#_03B8DD: LDA.w $0806,X
#_03B8E0: CMP.w #$0DE8
#_03B8E3: BNE CODE_03B8EA

#_03B8E5: LDA.w #$0DE6
#_03B8E8: BRA CODE_03B8ED

CODE_03B8EA:
#_03B8EA: LDA.w #$0DE7

CODE_03B8ED:
#_03B8ED: STA.w $0806,X
#_03B8F0: STZ.w $081C,X

CODE_03B8F3:
#_03B8F3: JSR ROUTINE_03F310
#_03B8F6: JSR ROUTINE_03B636
#_03B8F9: JMP CODE_03B1CA

;===================================================================================================

ROUTINE_03B8FC:
#_03B8FC: TYX
#_03B8FD: DEC.w $081E,X
#_03B900: BNE CODE_03B914

#_03B902: JSR ROUTINE_03AF9D

#_03B905: LDA.w UNREACH_03B917,Y
#_03B908: STA.w $0806,X

#_03B90B: LDA.w #$000C
#_03B90E: STA.w $081E,X
#_03B911: JSR AdvanceAIModeUp

CODE_03B914:
#_03B914: JMP CODE_03B1CA

UNREACH_03B917:
#_03B917: db $EA,$0D,$EB,$0D,$EA,$0D,$EB,$0D

;===================================================================================================

ROUTINE_03B91F:
#_03B91F: TYX
#_03B920: DEC.w $081E,X
#_03B923: BNE CODE_03B92B

#_03B925: LDA.w #$026A
#_03B928: STA.w $0810,X

CODE_03B92B:
#_03B92B: JMP CODE_03B1CA

;===================================================================================================

ROUTINE_03B92E:
#_03B92E: TYX

#_03B92F: LDA.w #DATA_03B93B
#_03B932: LDY.w #$0003

CODE_03B935:
#_03B935: JSR ROUTINE_0390D7
#_03B938: JMP CODE_03BD07

DATA_03B93B:
#_03B93B: db $03,$00,$00,$FE,$00,$00,$80,$02
#_03B943: db $01,$00,$00,$00,$00,$00,$80,$02
#_03B94B: db $01,$00,$00,$02,$00,$00,$80,$02
#_03B953: db $01,$00

;===================================================================================================

ROUTINE_03B955:
#_03B955: TYX

#_03B956: LDA.w #DATA_03B95F
#_03B959: LDY.w #$0003
#_03B95C: JMP CODE_03B935

DATA_03B95F:
#_03B95F: db $02,$00,$00,$FF,$00,$00,$80,$02
#_03B967: db $01,$00,$00,$01,$00,$00,$80,$02
#_03B96F: db $01,$00

;===================================================================================================

ROUTINE_03B971:
#_03B971: TYX
#_03B972: JSL ROUTINE_09B010

#_03B976: LDA.w $080C,X
#_03B979: CMP.w $19EE
#_03B97C: BCC CODE_03B983

#_03B97E: LDA.w #$FFFC
#_03B981: BRA CODE_03B986

CODE_03B983:
#_03B983: LDA.w #$0004

CODE_03B986:
#_03B986: STA.w $0818,X
#_03B989: STZ.w $081A,X
#_03B98C: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03B98F:
#_03B98F: TYX
#_03B990: JSR ROUTINE_03BB23

#_03B993: LDA.w $081A,X
#_03B996: BEQ CODE_03B99B

#_03B998: JMP CODE_03B9DE

CODE_03B99B:
#_03B99B: LDA.w #$0000
#_03B99E: JSL ROUTINE_09A603_long
#_03B9A2: CMP.w #$0000
#_03B9A5: BEQ CODE_03B9C6

#_03B9A7: LDA.w $0818,X
#_03B9AA: STA.l $7FE818,X
#_03B9AE: STZ.w $0818,X

#_03B9B1: LDA.w $19F0
#_03B9B4: CMP.w $080E,X
#_03B9B7: BCS CODE_03B9BE

#_03B9B9: LDA.w #$FFFC
#_03B9BC: BRA CODE_03B9C1

CODE_03B9BE:
#_03B9BE: LDA.w #$0004

CODE_03B9C1:
#_03B9C1: STA.w $081A,X
#_03B9C4: BRA CODE_03BA04

CODE_03B9C6:
#_03B9C6: STZ.w $081A,X

#_03B9C9: LDA.w $19EE
#_03B9CC: CMP.w $080C,X
#_03B9CF: BCS CODE_03B9D6

#_03B9D1: LDA.w #$FFFC
#_03B9D4: BRA CODE_03B9D9

CODE_03B9D6:
#_03B9D6: LDA.w #$0004

CODE_03B9D9:
#_03B9D9: STA.w $0818,X
#_03B9DC: BRA CODE_03BA04

CODE_03B9DE:
#_03B9DE: LDA.w #$0000
#_03B9E1: JSL ROUTINE_09A603_long
#_03B9E5: CMP.w #$0000
#_03B9E8: BEQ CODE_03B9C6

#_03B9EA: LDA.w #$0000
#_03B9ED: JSL ROUTINE_09A67F_long
#_03B9F1: CMP.w #$0000
#_03B9F4: BEQ CODE_03BA04

#_03B9F6: LDA.w $081A,X
#_03B9F9: STA.l $7FE81A,X
#_03B9FD: EOR.w #$FFFF
#_03BA00: INC A
#_03BA01: STA.w $081A,X

CODE_03BA04:
#_03BA04: JSR ROUTINE_03B636

#_03BA07: LDA.w $0560
#_03BA0A: CMP.w #$7800
#_03BA0D: BCS CODE_03BA21

#_03BA0F: LDA.w $080C,X
#_03BA12: AND.w #$FF00
#_03BA15: STA.b $20

#_03BA17: LDA.w $19EE
#_03BA1A: AND.w #$FF00
#_03BA1D: CMP.b $20
#_03BA1F: BNE CODE_03BA3D

CODE_03BA21:
#_03BA21: LDA.w $19F0
#_03BA24: STA.w $081C,X
#_03BA27: CMP.w $080E,X
#_03BA2A: BCS CODE_03BA31

#_03BA2C: LDA.w #$FFE4
#_03BA2F: BRA CODE_03BA34

CODE_03BA31:
#_03BA31: LDA.w #$001C

CODE_03BA34:
#_03BA34: STA.w $081A,X
#_03BA37: STZ.w $0818,X
#_03BA3A: JSR AdvanceAIModeUp

CODE_03BA3D:
#_03BA3D: JMP CODE_03BB5F

;===================================================================================================

ROUTINE_03BA40:
#_03BA40: TYX
#_03BA41: JSR ROUTINE_03BB23

#_03BA44: LDA.w #$0000
#_03BA47: JSL ROUTINE_09A67F_long
#_03BA4B: CMP.w #$0000
#_03BA4E: BEQ CODE_03BA5F

#_03BA50: LDA.w #$0004
#_03BA53: STA.w $081A,X

#_03BA56: LDA.w #$0282
#_03BA59: STA.w $0810,X
#_03BA5C: JMP CODE_03BA95

CODE_03BA5F:
#_03BA5F: JSR ROUTINE_03B636

#_03BA62: LDA.b $00
#_03BA64: AND.w #$000F
#_03BA67: BNE CODE_03BA7D

#_03BA69: LDA.w $081E,X
#_03BA6C: CMP.w #$0020
#_03BA6F: BEQ CODE_03BA76

#_03BA71: LDA.w #$0040
#_03BA74: BRA CODE_03BA79

CODE_03BA76:
#_03BA76: LDA.w #$0042

CODE_03BA79:
#_03BA79: STA.l $0004AA

CODE_03BA7D:
#_03BA7D: LDA.w $081C,X
#_03BA80: AND.w #$FF80
#_03BA83: STA.b $20

#_03BA85: LDA.w $080E,X
#_03BA88: AND.w #$FF80
#_03BA8B: CMP.b $20
#_03BA8D: BNE CODE_03BA95

#_03BA8F: STZ.w $081C,X
#_03BA92: JSR AdvanceAIModeUp

CODE_03BA95:
#_03BA95: JMP CODE_03BB5F

;===================================================================================================

ROUTINE_03BA98:
#_03BA98: TYX

#_03BA99: LDA.w $0804,X
#_03BA9C: CLC
#_03BA9D: ADC.w #$0120
#_03BAA0: TAY

#_03BAA1: LDA.w $0802,X
#_03BAA4: PHX
#_03BAA5: JSR ROUTINE_038E3D
#_03BAA8: PLX
#_03BAA9: CMP.w #$0020
#_03BAAC: BEQ CODE_03BABD

#_03BAAE: LDY.w $081C,X
#_03BAB1: LDA.w UNREACH_03BB01,Y
#_03BAB4: AND.w #$00FF
#_03BAB7: CLC
#_03BAB8: ADC.w #$0F40
#_03BABB: BRA CODE_03BACA

CODE_03BABD:
#_03BABD: LDY.w $081C,X

#_03BAC0: LDA.w UNREACH_03BB08,Y
#_03BAC3: AND.w #$00FF
#_03BAC6: CLC
#_03BAC7: ADC.w #$0F40

CODE_03BACA:
#_03BACA: STA.w $0806,X

#_03BACD: LDA.b $00
#_03BACF: AND.w #$0007
#_03BAD2: BNE CODE_03BAF3

#_03BAD4: INY
#_03BAD5: TYA
#_03BAD6: STA.w $081C,X
#_03BAD9: CMP.w #$0003
#_03BADC: BNE CODE_03BAE5

#_03BADE: LDA.w #$0044
#_03BAE1: STA.l $0004AA

CODE_03BAE5:
#_03BAE5: CPY.w #$0007
#_03BAE8: BCC CODE_03BAF3

#_03BAEA: LDA.w #$001E
#_03BAED: STA.w $081C,X
#_03BAF0: JSR AdvanceAIModeUp

CODE_03BAF3:
#_03BAF3: LDA.w $081C,X
#_03BAF6: CMP.w #$0003
#_03BAF9: BCS CODE_03BAFE

#_03BAFB: JMP CODE_03BB78

CODE_03BAFE:
#_03BAFE: JMP CODE_03BBA3

UNREACH_03BB01:
#_03BB01: db $00,$04,$06,$08,$0A,$08,$0A

UNREACH_03BB08:
#_03BB08: db $0C,$10,$12,$14,$16,$14,$16

;===================================================================================================

ROUTINE_03BB0F:
#_03BB0F: TYX
#_03BB10: DEC.w $081C,X
#_03BB13: BNE CODE_03BB18

#_03BB15: JMP CODE_03B40F

CODE_03BB18:
#_03BB18: LDA.b $00
#_03BB1A: AND.w #$0001
#_03BB1D: BEQ .exit

#_03BB1F: JMP CODE_03BBA3

.exit
#_03BB22: RTS

;===================================================================================================

ROUTINE_03BB23:
#_03BB23: LDA.w $0804,X
#_03BB26: CLC
#_03BB27: ADC.w #$00D0
#_03BB2A: TAY

#_03BB2B: LDA.w $0802,X
#_03BB2E: PHX
#_03BB2F: JSR ROUTINE_038E3D
#_03BB32: PLX
#_03BB33: STA.w $081E,X
#_03BB36: CMP.w #$0020
#_03BB39: BEQ CODE_03BB4C

#_03BB3B: LDA.b $00
#_03BB3D: AND.w #$0008
#_03BB40: BEQ CODE_03BB47

#_03BB42: LDA.w #$0F40
#_03BB45: BRA CODE_03BB4A

CODE_03BB47:
#_03BB47: LDA.w #$0F42

CODE_03BB4A:
#_03BB4A: BRA CODE_03BB5B

CODE_03BB4C:
#_03BB4C: LDA.b $00
#_03BB4E: AND.w #$0008
#_03BB51: BEQ CODE_03BB58

#_03BB53: LDA.w #$0F4C
#_03BB56: BRA CODE_03BB5B

CODE_03BB58:
#_03BB58: LDA.w #$0F4E

CODE_03BB5B:
#_03BB5B: STA.w $0806,X
#_03BB5E: RTS

CODE_03BB5F:
#_03BB5F: LDY.w #$0050
#_03BB62: JSR ROUTINE_0392EE
#_03BB65: BEQ CODE_03BB8F

#_03BB67: JSR ROUTINE_039385
#_03BB6A: BNE CODE_03BB8F

#_03BB6C: STZ.w $081C,X

#_03BB6F: LDA.w #$0286
#_03BB72: STA.w $0810,X
#_03BB75: STA.w $0814,X

CODE_03BB78:
#_03BB78: JSR ROUTINE_0392C0

#_03BB7B: LDY.w #$0160
#_03BB7E: LDA.w #$0020
#_03BB81: JSR ROUTINE_039664

#_03BB84: LDY.w #$0160
#_03BB87: LDA.w #$0020
#_03BB8A: JSR ROUTINE_039C2D
#_03BB8D: BRA CODE_03BBBD

CODE_03BB8F:
#_03BB8F: LDY.w #$0050

#_03BB92: LDA.w #$0020
#_03BB95: JSR ROUTINE_039664

#_03BB98: LDY.w #$0050
#_03BB9B: LDA.w #$0020
#_03BB9E: JSR ROUTINE_039C2D
#_03BBA1: BRA CODE_03BBBD

CODE_03BBA3:
#_03BBA3: LDA.w #$FFFF
#_03BBA6: STA.w $0814,X

#_03BBA9: LDA.w $080C,X
#_03BBAC: SEC
#_03BBAD: SBC.w $0560
#_03BBB0: STA.w $0802,X

#_03BBB3: LDA.w $080E,X
#_03BBB6: SEC
#_03BBB7: SBC.w $0562
#_03BBBA: STA.w $0804,X

CODE_03BBBD:
#_03BBBD: LDA.w #ROUTINE_03B43C
#_03BBC0: JSR ROUTINE_03A2AE
#_03BBC3: BNE CODE_03BBC6

#_03BBC5: RTS

CODE_03BBC6:
#_03BBC6: JMP ROUTINE_0388B2

;===================================================================================================

ROUTINE_03BBC9:
#_03BBC9: TYX

#_03BBCA: LDA.w #data03BBD6
#_03BBCD: LDY.w #$0003
#_03BBD0: JSR ROUTINE_0390D7
#_03BBD3: JMP CODE_03BD07

#data03BBD6:
#_03BBD6: db $01,$00,$00,$00,$00,$00,$94,$02
#_03BBDE: db $01,$00

;===================================================================================================

ROUTINE_03BBE0:
#_03BBE0: TYX
#_03BBE1: JSL ROUTINE_09B010
#_03BBE5: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03BBE8:
#_03BBE8: TYX
#_03BBE9: JSR ROUTINE_03AF9D

#_03BBEC: LDA.b $20
#_03BBEE: CMP.w #$09E0
#_03BBF1: BCS .exit

#_03BBF3: LDA.b $22
#_03BBF5: CMP.w #$0920
#_03BBF8: BCS .exit

#_03BBFA: STZ.w $081C,X
#_03BBFD: JMP AdvanceAIModeUp

.exit
#_03BC00: RTS

;===================================================================================================

ROUTINE_03BC01:
#_03BC01: TYX
#_03BC02: INC.w $081C,X

#_03BC05: LDA.w $081C,X
#_03BC08: CMP.w #$0032
#_03BC0B: BCS CODE_03BC0E

#_03BC0D: RTS

CODE_03BC0E:
#_03BC0E: CMP.w #$0038
#_03BC11: BCS CODE_03BC18

#_03BC13: LDA.w #$0FA6
#_03BC16: BRA CODE_03BC35

CODE_03BC18:
#_03BC18: CMP.w #$003E
#_03BC1B: BCS CODE_03BC22

#_03BC1D: LDA.w #$0FA8
#_03BC20: BRA CODE_03BC35

CODE_03BC22:
#_03BC22: LDA.w #$004C
#_03BC25: STA.l $0004AA
#_03BC29: JSR AdvanceAIModeUp

#_03BC2C: LDA.w #$003C
#_03BC2F: STA.w $081C,X

#_03BC32: LDA.w #$0F9A

CODE_03BC35:
#_03BC35: STA.w $0806,X
#_03BC38: JMP CODE_03B1CA

;===================================================================================================

ROUTINE_03BC3B:
#_03BC3B: TYX
#_03BC3C: JSR ROUTINE_03AF9D
#_03BC3F: AND.w #$0002
#_03BC42: BEQ CODE_03BC4D

#_03BC44: STA.l $7FE812,X

#_03BC48: LDA.w #$0F9B
#_03BC4B: BRA CODE_03BC54

CODE_03BC4D:
#_03BC4D: STA.l $7FE812,X

#_03BC51: LDA.w #$0F9A

CODE_03BC54:
#_03BC54: STA.w $0806,X
#_03BC57: DEC.w $081C,X
#_03BC5A: BNE CODE_03BC5F

#_03BC5C: JSR AdvanceAIModeUp

CODE_03BC5F:
#_03BC5F: JMP CODE_03B1CA

;===================================================================================================

ROUTINE_03BC62:
#_03BC62: TYX
#_03BC63: INC.w $081C,X

#_03BC66: LDA.w $081C,X
#_03BC69: CMP.w #$0014
#_03BC6C: BNE CODE_03BC81

#_03BC6E: LDA.w #$004B
#_03BC71: STA.l $0004AA

#_03BC75: LDA.w #$BCBB
#_03BC78: LDY.w #$0003
#_03BC7B: JSR ROUTINE_0390D7

#_03BC7E: LDA.w $081C,X

CODE_03BC81:
#_03BC81: LDY.w #$0000

CODE_03BC84:
#_03BC84: CMP.w UNREACH_03BCAB,Y
#_03BC87: BCC CODE_03BC9C

#_03BC89: INY
#_03BC8A: INY
#_03BC8B: CPY.w #$0008
#_03BC8E: BCC CODE_03BC84

#_03BC90: LDA.w #$0028
#_03BC93: STA.w $081C,X
#_03BC96: JSR AdvanceAIModeUp

#_03BC99: LDY.w #$0000

CODE_03BC9C:
#_03BC9C: LDA.l $7FE812,X
#_03BCA0: LSR A
#_03BCA1: CLC
#_03BCA2: ADC.w UNREACH_03BCB3,Y
#_03BCA5: STA.w $0806,X
#_03BCA8: JMP CODE_03B1CA

UNREACH_03BCAB:
#_03BCAB: db $0D,$00,$12,$00,$1A,$00,$30,$00

UNREACH_03BCB3:
#_03BCB3: db $9A,$0F,$9C,$0F,$9E,$0F,$A0,$0F
#_03BCBB: db $01,$00,$00,$00,$00,$00,$E8,$83
#_03BCC3: db $01,$00

;===================================================================================================

ROUTINE_03BCC5:
#_03BCC5: TYX

#_03BCC6: DEC.w $081C,X
#_03BCC9: BNE CODE_03BCD1

#_03BCCB: STZ.w $081C,X

#_03BCCE: JSR AdvanceAIModeUp

CODE_03BCD1:
#_03BCD1: JMP CODE_03B1CA

;===================================================================================================

ROUTINE_03BCD4:
#_03BCD4: TYX
#_03BCD5: INC.w $081C,X

#_03BCD8: LDA.w $081C,X
#_03BCDB: CMP.w #$0006
#_03BCDE: BCS CODE_03BCE5

#_03BCE0: LDA.w #$0FA8
#_03BCE3: BRA CODE_03BD01

CODE_03BCE5:
#_03BCE5: CMP.w #$000C
#_03BCE8: BCS CODE_03BCEF

#_03BCEA: LDA.w #$0FA6
#_03BCED: BRA CODE_03BD01

CODE_03BCEF:
#_03BCEF: LDA.w #$004C
#_03BCF2: STA.l $0004AA
#_03BCF6: STZ.w $081C,X

#_03BCF9: LDA.w #$0298
#_03BCFC: STA.w $0810,X
#_03BCFF: BRA CODE_03BD04

CODE_03BD01:
#_03BD01: STA.w $0806,X

CODE_03BD04:
#_03BD04: JMP CODE_03B1CA

CODE_03BD07:
#_03BD07: LDA.w #$0062
#_03BD0A: STA.l $7FE816,X

#_03BD0E: LDA.w #$0238
#_03BD11: STA.w $0810,X
#_03BD14: RTS

;===================================================================================================

ROUTINE_03BD15:
#_03BD15: TYX

#_03BD16: LDA.w #$0180
#_03BD19: STA.b $20

#_03BD1B: LDA.w $081C,X
#_03BD1E: JSR ROUTINE_03A04D
#_03BD21: STZ.w $080A,X
#_03BD24: STZ.w $0816,X
#_03BD27: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03BD2A:
#_03BD2A: TYX
#_03BD2B: JSR ROUTINE_0385CA
#_03BD2E: BNE CODE_03BD42

#_03BD30: JSR CacheMyCoordinatesIn20
#_03BD33: STZ.b $30

#_03BD35: LDA.w #$8248
#_03BD38: STA.b $26

#_03BD3A: LDA.w #$000C
#_03BD3D: STA.b $24
#_03BD3F: JSR PrepEnemySpawn

CODE_03BD42:
#_03BD42: JSR ROUTINE_038B69
#_03BD45: BCS .exit

#_03BD47: RTS

.exit
#_03BD48: RTS

;===================================================================================================

ROUTINE_03BD49:
#_03BD49: TYX
#_03BD4A: JSR ROUTINE_038A7D
#_03BD4D: JSR ROUTINE_03A295

#_03BD50: LDA.w #$001E
#_03BD53: JSL ROUTINE_02FE0D
#_03BD57: ASL A
#_03BD58: ASL A
#_03BD59: ASL A
#_03BD5A: ASL A
#_03BD5B: STA.b $20

#_03BD5D: LDA.b $2C
#_03BD5F: JSR ROUTINE_03A04D

#_03BD62: LDA.w #$0CEE
#_03BD65: STA.w $0806,X
#_03BD68: JMP ROUTINE_038173

;===================================================================================================

ROUTINE_03BD6B:
#_03BD6B: TYX

#_03BD6C: LDA.w $04F4
#_03BD6F: BEQ CODE_03BD76

#_03BD71: JSR ROUTINE_038A25_0020
#_03BD74: BRA CODE_03BD9B

CODE_03BD76:
#_03BD76: LDY.w #$0008

#_03BD79: LDA.w #$0022
#_03BD7C: JSR ROUTINE_039664

#_03BD7F: LDY.w #$0008
#_03BD82: LDA.w #$0022
#_03BD85: JSR ROUTINE_039C2D

#_03BD88: LDY.w #$0048
#_03BD8B: JSR ROUTINE_0392EE
#_03BD8E: BEQ CODE_03BD9F

#_03BD90: JSR ROUTINE_039385
#_03BD93: BNE CODE_03BD9F

#_03BD95: LDA.w #$0026
#_03BD98: JSR ROUTINE_038A25

CODE_03BD9B:
#_03BD9B: JMP ROUTINE_038C85

.exit
#_03BD9E: RTS

CODE_03BD9F:
#_03BD9F: JSR ROUTINE_038B69
#_03BDA2: BCS .exit

#_03BDA4: JMP ROUTINE_038DC5

;===================================================================================================

ROUTINE_03BDA7:
#_03BDA7: JSR ROUTINE_038090
#_03BDAA: SEC
#_03BDAB: SBC.w #$0044
#_03BDAE: BCC CODE_03BDCA

#_03BDB0: CMP.w #$0008
#_03BDB3: BCS CODE_03BDCA

#_03BDB5: TAY

#_03BDB6: LDA.w UNREACH_03BE41,Y
#_03BDB9: AND.w #$00FF
#_03BDBC: TAY

#_03BDBD: LDA.w $19A0,Y
#_03BDC0: AND.w #$00FF
#_03BDC3: CMP.w #$00FF
#_03BDC6: BEQ CODE_03BDCA

#_03BDC8: SEC
#_03BDC9: RTS

CODE_03BDCA:
#_03BDCA: CLC
#_03BDCB: RTS

;===================================================================================================

ROUTINE_03BDCC:
#_03BDCC: TYX
#_03BDCD: JSR ROUTINE_03BDA7
#_03BDD0: BCC CODE_03BDD5

#_03BDD2: JMP ROUTINE_038C85

CODE_03BDD5:
#_03BDD5: JSR ROUTINE_03805B

#_03BDD8: LDA.w #$01C2
#_03BDDB: STA.w $0806,X
#_03BDDE: STZ.w $081E,X
#_03BDE1: STZ.w $080A,X

#_03BDE4: LDA.w #$2000
#_03BDE7: STA.w $0808,X

#_03BDEA: LDA.l $7E7A26
#_03BDEE: BNE CODE_03BE38

#_03BDF0: LDY.w #$0078
#_03BDF3: LDA.w #$0008
#_03BDF6: JSR ROUTINE_039664

#_03BDF9: LDA.w $081E,X
#_03BDFC: BEQ CODE_03BE38

#_03BDFE: JSR ROUTINE_038088
#_03BE01: STA.w $081E,X
#_03BE04: BEQ CODE_03BE29

#_03BE06: CMP.w #$00FF
#_03BE09: BNE CODE_03BE15

#_03BE0B: LDA.w #$01FE
#_03BE0E: JSR Reset_0816_AndSetAIMode
#_03BE11: JSR Set_18E2_to_FFFF
#_03BE14: RTS

CODE_03BE15:
#_03BE15: LDA.w $05B2
#_03BE18: BEQ CODE_03BE38

#_03BE1A: LDA.w $05B2
#_03BE1D: SED
#_03BE1E: SEC
#_03BE1F: SBC.w #$0001
#_03BE22: STA.w $05B2
#_03BE25: CLD
#_03BE26: JSR ROUTINE_03992B

CODE_03BE29:
#_03BE29: JSR Set_18E2_to_FFFF
#_03BE2C: STA.w $1F70

#_03BE2F: LDA.w #$0014
#_03BE32: STA.w $0816,X
#_03BE35: JMP AdvanceAIModeUp

CODE_03BE38:
#_03BE38: JSR ROUTINE_038088
#_03BE3B: BEQ .exit

#_03BE3D: JMP ROUTINE_038860

.exit
#_03BE40: RTS

UNREACH_03BE41:
#_03BE41: db $05,$00,$03,$00,$04,$00,$06,$00

;===================================================================================================

ROUTINE_03BE49:
#_03BE49: TYX
#_03BE4A: JSR ROUTINE_03BDA7
#_03BE4D: BCC CODE_03BE52

#_03BE4F: JMP ROUTINE_038C85

CODE_03BE52:
#_03BE52: JSR ROUTINE_03805B

#_03BE55: LDA.w $19CE
#_03BE58: CMP.w #$0026
#_03BE5B: BCS CODE_03BEA4

#_03BE5D: LDA.l $7E7A26
#_03BE61: BNE CODE_03BEA4

#_03BE63: JSR ROUTINE_03C5EE
#_03BE66: BEQ CODE_03BEA4

#_03BE68: LDA.w $18E4
#_03BE6B: CMP.w #$0004
#_03BE6E: BEQ CODE_03BE87

#_03BE70: CMP.w #$0010
#_03BE73: BEQ CODE_03BE87

#_03BE75: LDA.w $081E,X
#_03BE78: BNE CODE_03BEA4

#_03BE7A: PHA

#_03BE7B: LDA.w #$0022
#_03BE7E: STA.w $04A2
#_03BE81: PLA
#_03BE82: JSR ROUTINE_03E684
#_03BE85: BNE CODE_03BEA4

CODE_03BE87:
#_03BE87: JSR ROUTINE_03C5DA
#_03BE8A: CLC

#_03BE8B: LDA.w $19CE
#_03BE8E: ADC.w #$0028
#_03BE91: STA.w $19CE

#_03BE94: LDA.w #$0010
#_03BE97: STA.w $19DE
#_03BE9A: JSR ROUTINE_038090
#_03BE9D: STA.l $7E7B28
#_03BEA1: JMP ROUTINE_038C85

CODE_03BEA4:
#_03BEA4: JMP CODE_03BE38

;===================================================================================================

ROUTINE_03BEA7:
#_03BEA7: TYX
#_03BEA8: JSR ROUTINE_03BDA7
#_03BEAB: BCC CODE_03BEB0

#_03BEAD: JMP ROUTINE_038C85

CODE_03BEB0:
#_03BEB0: JSR ROUTINE_03805B

#_03BEB3: LDA.w $19CE
#_03BEB6: CMP.w #$0026
#_03BEB9: BCS .exit

#_03BEBB: LDA.l $7E7A26
#_03BEBF: BNE .exit

#_03BEC1: LDA.w $0816,X
#_03BEC4: BNE CODE_03BF0C

#_03BEC6: JSR ROUTINE_03C5EE
#_03BEC9: BEQ .exit

#_03BECB: JSR ROUTINE_03C5DA
#_03BECE: CLC

#_03BECF: LDA.w $19CE
#_03BED2: ADC.w #$0028
#_03BED5: STA.w $19CE

#_03BED8: LDA.w #$0010
#_03BEDB: STA.w $19DE
#_03BEDE: STA.w $04D6
#_03BEE1: JSR Set_18E2_to_FFFF
#_03BEE4: STA.w $1F70
#_03BEE7: JSR ROUTINE_038090
#_03BEEA: STA.l $7E7B28
#_03BEEE: CLC

#_03BEEF: LDA.l $7FE816,X
#_03BEF3: ADC.w #$0200
#_03BEF6: CMP.w #$4400
#_03BEF9: BCC CODE_03BF01

#_03BEFB: AND.w #$00FF
#_03BEFE: ORA.w #$2000

CODE_03BF01:
#_03BF01: STA.l $7FE816,X

#_03BF05: LDA.w #$FFFF
#_03BF08: STA.w $0816,X
#_03BF0B: RTS

CODE_03BF0C:
#_03BF0C: STZ.w $081E,X

#_03BF0F: LDY.w #$0078
#_03BF12: LDA.w #$0008
#_03BF15: JSR ROUTINE_039664

#_03BF18: LDA.w $081E,X
#_03BF1B: BNE .exit

#_03BF1D: LDA.w #$01FA
#_03BF20: STA.w $0810,X

.exit
#_03BF23: RTS

;===================================================================================================

Sprite_PartnerSwapInit:
#_03BF24: TYX
#_03BF25: JSR ROUTINE_03D79A

#_03BF28: LDA.w #$0004
#_03BF2B: STA.w $081A,X

#_03BF2E: LDA.w #$0084
#_03BF31: STA.w $0806,X

#_03BF34: LDA.w #$000A
#_03BF37: STA.w $0810,X
#_03BF3A: RTS

;===================================================================================================

ROUTINE_03BF3B:
#_03BF3B: TYX
#_03BF3C: INC.w $04CC
#_03BF3F: JSR ROUTINE_03D4DB
#_03BF42: BNE CODE_03BF45

#_03BF44: RTS

CODE_03BF45:
#_03BF45: JMP CODE_03D3AF

;===================================================================================================

ROUTINE_03BF48:
#_03BF48: TYX
#_03BF49: INC.w $04CC
#_03BF4C: JSR ROUTINE_03894A
#_03BF4F: BEQ .exit

#_03BF51: LDA.w $080A,X
#_03BF54: BPL CODE_03BF5B

#_03BF56: CMP.w #$FF00
#_03BF59: BCC CODE_03BFB8

CODE_03BF5B:
#_03BF5B: LDA.l $7E2530
#_03BF5F: BNE CODE_03BFB8

#_03BF61: LDA.w $04C0
#_03BF64: BEQ CODE_03BF7B

#_03BF66: JSR ROUTINE_038179

#_03BF69: LDY.w #$0040
#_03BF6C: LDA.w #$001C
#_03BF6F: JSR ROUTINE_0392EE
#_03BF72: BEQ CODE_03BF7B

#_03BF74: JSR ROUTINE_039390
#_03BF77: BNE CODE_03BF7B

#_03BF79: BRA CODE_03BF9A

CODE_03BF7B:
#_03BF7B: LDY.w $18CE
#_03BF7E: BEQ CODE_03BF8D

#_03BF80: LDY.w #$0048
#_03BF83: LDA.w #$001C
#_03BF86: JSR ROUTINE_039C2D

#_03BF89: LDA.b $22
#_03BF8B: BNE CODE_03BF9A

CODE_03BF8D:
#_03BF8D: LDY.w #$0040

#_03BF90: LDA.w #$001C
#_03BF93: JSR ROUTINE_039664

#_03BF96: LDA.b $22
#_03BF98: BEQ CODE_03BFB8

CODE_03BF9A:
#_03BF9A: LDA.w $0812,X
#_03BF9D: BNE CODE_03BFA2

#_03BF9F: JMP ROUTINE_038C85

CODE_03BFA2:
#_03BFA2: LDA.w #$FFFF
#_03BFA5: STA.l $7E7A26
#_03BFA9: STZ.w $0816,X

#_03BFAC: LDA.w #$001C
#_03BFAF: TSB.w $0536
#_03BFB2: JSR ROUTINE_0380C9
#_03BFB5: JMP AdvanceAIModeUp

CODE_03BFB8:
#_03BFB8: JMP CODE_03D43F

.exit
#_03BFBB: RTS

;===================================================================================================

ROUTINE_03BFBC:
#_03BFBC: PHY
#_03BFBD: JSL ROUTINE_018712_long
#_03BFC1: PLY

#_03BFC2: LDA.w $0816,Y
#_03BFC5: ASL A
#_03BFC6: TAX
#_03BFC7: JMP (PTR16_03BFCA,X)

PTR16_03BFCA:
#_03BFCA: dw ROUTINE_03BFD6
#_03BFCC: dw ROUTINE_03C005
#_03BFCE: dw ROUTINE_03C064
#_03BFD0: dw ROUTINE_03C13C
#_03BFD2: dw ROUTINE_03C185
#_03BFD4: dw ROUTINE_03C20C

;===================================================================================================

ROUTINE_03BFD6:
#_03BFD6: TYX
#_03BFD7: JSR ROUTINE_03C23F

#_03BFDA: LDA.w $080A,X
#_03BFDD: BPL CODE_03BFFB

#_03BFDF: CMP.w #$FE00
#_03BFE2: BCS CODE_03BFFB

#_03BFE4: PHX
#_03BFE5: JSL ROUTINE_019C5A_long
#_03BFE9: PLX

#_03BFEA: LDA.w #$0020
#_03BFED: STA.w $081C,X

#_03BFF0: LDA.w #$001A
#_03BFF3: STA.w $04AA
#_03BFF6: INC.w $0816,X
#_03BFF9: BRA CODE_03C002

CODE_03BFFB:
#_03BFFB: SEC
#_03BFFC: SBC.w #$0080
#_03BFFF: STA.w $080A,X

CODE_03C002:
#_03C002: JMP CODE_03D43F

;===================================================================================================

ROUTINE_03C005:
#_03C005: TYX

#_03C006: LDA.w $05A0
#_03C009: AND.w #$0007
#_03C00C: STA.b $20

#_03C00E: LDA.w $05A0
#_03C011: AND.w #$0008
#_03C014: BEQ CODE_03C01E

#_03C016: SEC

#_03C017: LDA.w #$000F
#_03C01A: SBC.b $20
#_03C01C: STA.b $20

CODE_03C01E:
#_03C01E: CLC

#_03C01F: LDA.b $20
#_03C021: ADC.w #$0004
#_03C024: STA.w $18EC
#_03C027: JSR ROUTINE_03C23F
#_03C02A: DEC.w $081C,X
#_03C02D: BNE CODE_03C060

#_03C02F: LDA.w #$0004
#_03C032: STA.w $18EC
#_03C035: JSR ROUTINE_03C0ED

#_03C038: LDA.b $2C
#_03C03A: EOR.w #$0200
#_03C03D: STA.l $7FE81A,X

#_03C041: LDA.w #$0020
#_03C044: STA.l $7FE81C,X

#_03C048: LDA.w #$0400
#_03C04B: STA.l $7FE81E,X

#_03C04F: LDA.w #$0020
#_03C052: STA.w $081C,X

#_03C055: LDA.w #$0100
#_03C058: STA.w $05EE
#_03C05B: INC.w $0816,X
#_03C05E: BRA .exit

CODE_03C060:
#_03C060: JMP CODE_03D43F

.exit
#_03C063: RTS

;===================================================================================================

ROUTINE_03C064:
#_03C064: TYX

#_03C065: LDA.w $05A0
#_03C068: AND.w #$000F
#_03C06B: BNE CODE_03C073

#_03C06D: LDA.w #$0027
#_03C070: STA.w $04AA

CODE_03C073:
#_03C073: LDA.w $081C,X
#_03C076: BEQ CODE_03C07D

#_03C078: DEC.w $081C,X
#_03C07B: BRA ROUTINE_03C0B9

CODE_03C07D:
#_03C07D: LDA.l $7FE81C,X
#_03C081: CMP.w #$0070
#_03C084: BCS CODE_03C08D

#_03C086: ADC.w #$0004
#_03C089: STA.l $7FE81C,X

CODE_03C08D:
#_03C08D: LDA.l $7FE81E,X
#_03C091: CMP.w #$0800
#_03C094: BCS CODE_03C09D

#_03C096: ADC.w #$0010
#_03C099: STA.l $7FE81E,X

CODE_03C09D:
#_03C09D: JSR ROUTINE_03C0D3
#_03C0A0: JSR ROUTINE_038686
#_03C0A3: CMP.w #$0080
#_03C0A6: BCS ROUTINE_03C0B9

#_03C0A8: LDA.w #$0020
#_03C0AB: STA.l $7FE81C,X

#_03C0AF: LDA.w #$0100
#_03C0B2: STA.l $7FE81E,X
#_03C0B6: INC.w $0816,X

;===================================================================================================

ROUTINE_03C0B9:
#_03C0B9: JSR CacheMyCoordinatesIn24
#_03C0BC: JSR ROUTINE_03C0F9
#_03C0BF: PHA

#_03C0C0: LDA.l $7FE81E,X
#_03C0C4: STA.b $20
#_03C0C6: PLA
#_03C0C7: JSR ROUTINE_03A04D
#_03C0CA: JSR ROUTINE_03C23F
#_03C0CD: JSR ROUTINE_03CB29
#_03C0D0: JMP ROUTINE_0392C0

;===================================================================================================

ROUTINE_03C0D3:
#_03C0D3: PHX
#_03C0D4: SEC

#_03C0D5: LDA.w $059E
#_03C0D8: SBC.w $05EE
#_03C0DB: AND.w #$0FFF
#_03C0DE: TAX

#_03C0DF: LDA.l $7FD000,X
#_03C0E3: STA.b $20

#_03C0E5: LDA.l $7FD002,X
#_03C0E9: STA.b $22
#_03C0EB: PLX
#_03C0EC: RTS

;===================================================================================================

ROUTINE_03C0ED:
#_03C0ED: JSR CacheMyCoordinatesIn24
#_03C0F0: JSR ROUTINE_03C0D3
#_03C0F3: PHX
#_03C0F4: JSR ROUTINE_02FB70_bounce
#_03C0F7: PLX
#_03C0F8: RTS

;===================================================================================================

ROUTINE_03C0F9:
#_03C0F9: JSR ROUTINE_03C0ED
#_03C0FC: SEC

#_03C0FD: LDA.l $7FE81A,X
#_03C101: SBC.b $2C
#_03C103: STA.b $20
#_03C105: AND.w #$03FF
#_03C108: BEQ CODE_03C137

#_03C10A: BPL CODE_03C110

#_03C10C: EOR.w #$FFFF
#_03C10F: INC A

CODE_03C110:
#_03C110: CMP.w #$0040
#_03C113: BCC CODE_03C137

#_03C115: LDA.b $20
#_03C117: CMP.w #$0200
#_03C11A: BCC CODE_03C122

#_03C11C: LDA.l $7FE81C,X
#_03C120: BNE CODE_03C12A

CODE_03C122:
#_03C122: LDA.l $7FE81C,X
#_03C126: EOR.w #$FFFF
#_03C129: INC A

CODE_03C12A:
#_03C12A: STA.b $20
#_03C12C: CLC

#_03C12D: LDA.l $7FE81A,X
#_03C131: ADC.b $20
#_03C133: STA.l $7FE81A,X

CODE_03C137:
#_03C137: LDA.l $7FE81A,X
#_03C13B: RTS

;===================================================================================================

ROUTINE_03C13C:
#_03C13C: TYX
#_03C13D: JSR ROUTINE_03C0B9
#_03C140: CLC

#_03C141: LDA.w $080A,X
#_03C144: ADC.w #$0080
#_03C147: STA.w $080A,X
#_03C14A: BMI CODE_03C158

#_03C14C: JSR ROUTINE_03C15E

#_03C14F: LDA.w #$0028
#_03C152: STA.w $04AA
#_03C155: INC.w $0816,X

CODE_03C158:
#_03C158: JSR ROUTINE_03C23F
#_03C15B: JMP ROUTINE_0392C0

;===================================================================================================

ROUTINE_03C15E:
#_03C15E: PHX
#_03C15F: SEC

#_03C160: LDA.w $059E
#_03C163: SBC.w $05EE
#_03C166: AND.w #$0FFF
#_03C169: TAX

#_03C16A: LDA.l $7FD000,X
#_03C16E: TAY

#_03C16F: LDA.l $7FD002,X
#_03C173: PLX
#_03C174: STA.w $080E,X
#_03C177: STA.w $05E8
#_03C17A: TYA
#_03C17B: STA.w $080C,X
#_03C17E: STA.w $05E6
#_03C181: JSR ROUTINE_0392C0
#_03C184: RTS

;===================================================================================================

ROUTINE_03C185:
#_03C185: TYX
#_03C186: JSL ROUTINE_01BA72_long
#_03C18A: JSR ROUTINE_03C22A
#_03C18D: CLC

#_03C18E: LDA.w $18EC
#_03C191: ADC.w #$0004
#_03C194: STA.w $18EC
#_03C197: CMP.w #$0020
#_03C19A: BCC .exit

#_03C19C: INC.w $0816,X

#_03C19F: LDA.w $04FE
#_03C1A2: TAY
#_03C1A3: PHY

#_03C1A4: LDA.w UNREACH_03C27D,Y
#_03C1A7: STA.w $05CE
#_03C1AA: JSR ROUTINE_038650

#_03C1AD: LDA.w #$0038
#_03C1B0: STA.w $05DC

#_03C1B3: LDA.w #$0020
#_03C1B6: STA.w $081C,X

#_03C1B9: LDA.w #$813A
#_03C1BC: STA.b $26
#_03C1BE: PLA
#_03C1BF: ASL A
#_03C1C0: TAY

#_03C1C1: LDA.w UNREACH_03C1EA,Y
#_03C1C4: STA.b $28

#_03C1C6: LDA.w UNREACH_03C1E8,Y
#_03C1C9: STA.b $2C

#_03C1CB: LDA.w $080C,X
#_03C1CE: STA.b $20
#_03C1D0: SEC

#_03C1D1: LDA.w $080E,X
#_03C1D4: SBC.w #$0200
#_03C1D7: STA.b $22

#_03C1D9: LDA.w #$0040
#_03C1DC: STA.b $30

#_03C1DE: LDA.w #$000E
#_03C1E1: STA.b $24
#_03C1E3: JSL PrepEnemySpawn_long

.exit
#_03C1E7: RTS

UNREACH_03C1E8:
#_03C1E8: db $4E,$E7

UNREACH_03C1EA:
#_03C1EA: db $5E,$E7,$2E,$E7,$3E,$E7,$6E,$E7
#_03C1F2: db $5E,$E7,$D6,$E7,$E6,$E7,$7E,$E7
#_03C1FA: db $8E,$E7,$9E,$E7,$5E,$E7,$F6,$E7
#_03C202: db $06,$E8,$F6,$E7,$06,$E8,$4E,$E7
#_03C20A: db $5E,$E7

;===================================================================================================

ROUTINE_03C20C:
#_03C20C: TYX
#_03C20D: JSL ROUTINE_01BA72_long
#_03C211: JSR ROUTINE_03C22A
#_03C214: DEC.w $18EC
#_03C217: BNE .exit

#_03C219: LDA.w #$0000
#_03C21C: STA.l $7E7A26
#_03C220: PHX
#_03C221: JSL ROUTINE_01CFD8_long
#_03C225: PLX
#_03C226: JMP ROUTINE_038C85

.exit
#_03C229: RTS

;===================================================================================================

ROUTINE_03C22A:
#_03C22A: JSL ROUTINE_01E415_long

#_03C22E: LDA.w $05C2
#_03C231: STA.b $20

#_03C233: LDA.w $05C4
#_03C236: STA.b $22

#_03C238: LDA.w $05CA
#_03C23B: STA.b $28
#_03C23D: BRA CODE_03C251

;===================================================================================================

ROUTINE_03C23F:
#_03C23F: JSR ROUTINE_0392C0

#_03C242: LDA.w $0802,X
#_03C245: STA.b $20

#_03C247: LDA.w $0804,X
#_03C24A: STA.b $22

#_03C24C: LDA.w $080A,X
#_03C24F: STA.b $28

CODE_03C251:
#_03C251: STZ.b $24

#_03C253: LDA.b $20
#_03C255: BPL CODE_03C25C

#_03C257: LDY.w #$F000
#_03C25A: STY.b $24

CODE_03C25C:
#_03C25C: LSR A
#_03C25D: LSR A
#_03C25E: LSR A
#_03C25F: LSR A
#_03C260: ORA.b $24
#_03C262: STA.w $18F0
#_03C265: STZ.b $26
#_03C267: CLC

#_03C268: LDA.b $22
#_03C26A: ADC.b $28
#_03C26C: BPL CODE_03C273

#_03C26E: LDY.w #$F000
#_03C271: STY.b $26

CODE_03C273:
#_03C273: LSR A
#_03C274: LSR A
#_03C275: LSR A
#_03C276: LSR A
#_03C277: ORA.b $26
#_03C279: STA.w $18F2
#_03C27C: RTS

UNREACH_03C27D:
#_03C27D: db $52,$01,$54,$01,$58,$01,$56,$01
#_03C285: db $5A,$01,$5C,$01,$5E,$01,$5E,$01
#_03C28D: db $52,$01

;===================================================================================================

ROUTINE_03C297_long:
#_03C28F: PHB
#_03C290: PHK
#_03C291: PLB
#_03C292: JSR ROUTINE_03C297
#_03C295: PLB
#_03C296: RTL

;===================================================================================================

ROUTINE_03C297:
#_03C297: STZ.b $24

#_03C299: LDA.b $20
#_03C29B: BPL CODE_03C2A2

#_03C29D: LDY.w #$F000
#_03C2A0: STY.b $24

CODE_03C2A2:
#_03C2A2: LSR A
#_03C2A3: LSR A
#_03C2A4: LSR A
#_03C2A5: LSR A
#_03C2A6: ORA.b $24
#_03C2A8: STA.w $18F0
#_03C2AB: STZ.b $26
#_03C2AD: CLC

#_03C2AE: LDA.b $22
#_03C2B0: ADC.b $28
#_03C2B2: BPL CODE_03C2B9

#_03C2B4: LDY.w #$F000
#_03C2B7: STY.b $26

CODE_03C2B9:
#_03C2B9: LSR A
#_03C2BA: LSR A
#_03C2BB: LSR A
#_03C2BC: LSR A
#_03C2BD: ORA.b $26
#_03C2BF: STA.w $18F2
#_03C2C2: RTS

;===================================================================================================

ROUTINE_03C2C3:
#_03C2C3: TYX
#_03C2C4: DEC.w $0806,X
#_03C2C7: BNE .exit

#_03C2C9: STZ.w $0808,X
#_03C2CC: JSR Random
#_03C2CF: AND.w #$000F
#_03C2D2: SBC.w #$0008
#_03C2D5: STA.w $0812,X
#_03C2D8: STA.w $0814,X
#_03C2DB: JSR Random
#_03C2DE: AND.w #$0007
#_03C2E1: ADC.w #$0002
#_03C2E4: STA.w $0816,X
#_03C2E7: JSR Random
#_03C2EA: AND.w #$0001
#_03C2ED: SEC
#_03C2EE: ADC.w #$0100
#_03C2F1: STA.l $7FE812,X
#_03C2F5: JSR ROUTINE_0392C0
#_03C2F8: STZ.w $080A,X
#_03C2FB: JSR Reset_0818_through_081F
#_03C2FE: JMP AdvanceAIModeUp

.exit
#_03C301: RTS

;===================================================================================================

ROUTINE_03C302:
#_03C302: TYX

#_03C303: LDA.l $7FE812,X
#_03C307: JSR ROUTINE_038D39
#_03C30A: JSR Random
#_03C30D: AND.w #$00FF
#_03C310: ADC.w #$0200
#_03C313: EOR.w #$FFFF
#_03C316: INC A
#_03C317: STA.b $20
#_03C319: CLC

#_03C31A: LDA.w $0816,X
#_03C31D: ADC.w #$0004
#_03C320: STA.w $0816,X
#_03C323: EOR.w #$FFFF
#_03C326: INC A
#_03C327: ADC.w $080A,X
#_03C32A: STA.w $080A,X
#_03C32D: CMP.b $20
#_03C32F: BCS CODE_03C334

#_03C331: JMP ROUTINE_038C85

CODE_03C334:
#_03C334: JSR ROUTINE_038AA3
#_03C337: JSR ROUTINE_0392D5
#_03C33A: PHX

#_03C33B: LDA.w #$3000
#_03C33E: STA.b $24

#_03C340: LDA.w $0804,X
#_03C343: STA.b $22

#_03C345: LDA.w $0802,X
#_03C348: STA.b $20

#_03C34A: LDA.w $0806,X
#_03C34D: JSL ROUTINE_028220
#_03C351: PLX
#_03C352: RTS

;===================================================================================================

ROUTINE_03C353:
#_03C353: TYX

#_03C354: LDA.w #$0030
#_03C357: STA.w $0806,X
#_03C35A: STZ.w $0808,X
#_03C35D: JSR ROUTINE_0392C0
#_03C360: STZ.w $081E,X

#_03C363: LDA.w #$F000
#_03C366: STA.w $080A,X
#_03C369: STA.l $7FE812,X
#_03C36D: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03C370:
#_03C370: TYX
#_03C371: CLC

#_03C372: LDA.w $080A,X
#_03C375: ADC.w #$0080
#_03C378: BMI CODE_03C380

#_03C37A: JSR AdvanceAIModeUp

#_03C37D: LDA.w #$0000

CODE_03C380:
#_03C380: STA.w $080A,X
#_03C383: JSR ROUTINE_0392D5

#_03C386: LDA.w #$0116
#_03C389: JSR ROUTINE_038CDF
#_03C38C: BEQ CODE_03C3AC

#_03C38E: LDY.w #$0000

CODE_03C391:
#_03C391: LDA.w UNREACH_03C3C5,Y
#_03C394: BMI CODE_03C3AC

#_03C396: CMP.w $081E,X
#_03C399: BEQ CODE_03C3A1

#_03C39B: INY
#_03C39C: INY
#_03C39D: INY
#_03C39E: INY
#_03C39F: BRA CODE_03C391

CODE_03C3A1:
#_03C3A1: LDA.w #$001E
#_03C3A4: STA.b $3E

#_03C3A6: LDA.w UNREACH_03C3C7,Y
#_03C3A9: JSR ROUTINE_03C416

CODE_03C3AC:
#_03C3AC: PHX

#_03C3AD: LDA.w #$3000
#_03C3B0: STA.b $24

#_03C3B2: LDA.w $0804,X
#_03C3B5: STA.b $22

#_03C3B7: LDA.w $0802,X
#_03C3BA: STA.b $20

#_03C3BC: LDA.w $0806,X
#_03C3BF: JSL ROUTINE_028220
#_03C3C3: PLX
#_03C3C4: RTS

UNREACH_03C3C5:
#_03C3C5: db $01,$00

UNREACH_03C3C7:
#_03C3C7: db $24,$00,$03,$00,$2A,$00,$FF,$FF

;===================================================================================================

ROUTINE_03C3CF:
#_03C3CF: TYX

#_03C3D0: LDA.w #$0115
#_03C3D3: JSR ROUTINE_038CDF
#_03C3D6: BNE CODE_03C3DB

#_03C3D8: JMP ROUTINE_038C85

CODE_03C3DB:
#_03C3DB: LDA.w $081E,X
#_03C3DE: CMP.w #$0014
#_03C3E1: BCS .exit

#_03C3E3: CMP.w #$0013
#_03C3E6: BNE CODE_03C3F1

#_03C3E8: INC.w $05DE

#_03C3EB: LDA.w #$0030
#_03C3EE: STA.w $05DC

CODE_03C3F1:
#_03C3F1: LDY.w #$0000

CODE_03C3F4:
#_03C3F4: LDA.w UNREACH_03C4B4,Y
#_03C3F7: BMI CODE_03C407

#_03C3F9: CMP.w $081E,X
#_03C3FC: BEQ CODE_03C404

#_03C3FE: INY
#_03C3FF: INY
#_03C400: INY
#_03C401: INY
#_03C402: BRA CODE_03C3F4

CODE_03C404:
#_03C404: JSR ROUTINE_03C40B

CODE_03C407:
#_03C407: JMP ROUTINE_0386A8

.exit
#_03C40A: RTS

;===================================================================================================

ROUTINE_03C40B:
#_03C40B: LDA.w #$001E
#_03C40E: STA.b $3E

#_03C410: LDA.w UNREACH_03C4B6,Y
#_03C413: BPL ROUTINE_03C416

#_03C415: RTS

;===================================================================================================

ROUTINE_03C416:
#_03C416: CMP.l $7FE812,X
#_03C41A: BEQ .exit

#_03C41C: STA.l $7FE812,X
#_03C420: TAY
#_03C421: PHX
#_03C422: PHY

#_03C423: LDA.w UNREACH_03C454,Y
#_03C426: STA.b $38

#_03C428: LDA.w UNREACH_03C456,Y
#_03C42B: STA.b $3A

#_03C42D: LDA.w UNREACH_03C458,Y
#_03C430: STA.b $3C
#_03C432: JSL ROUTINE_00DB57_long
#_03C436: PLY
#_03C437: CLC

#_03C438: LDA.w UNREACH_03C454,Y
#_03C43B: ADC.w #$0100
#_03C43E: STA.b $38

#_03C440: LDA.w UNREACH_03C456,Y
#_03C443: STA.b $3A
#_03C445: CLC

#_03C446: LDA.w UNREACH_03C458,Y
#_03C449: ADC.w #$0200
#_03C44C: STA.b $3C
#_03C44E: JSL ROUTINE_00DB57_long
#_03C452: PLX

.exit
#_03C453: RTS

UNREACH_03C454:
#_03C454: db $00,$62

UNREACH_03C456:
#_03C456: db $80,$81

UNREACH_03C458:
#_03C458: db $00,$EC,$00,$62,$80,$81,$00,$F0
#_03C460: db $00,$62,$C0,$81,$00,$F4,$00,$62
#_03C468: db $C0,$81,$00,$F8,$00,$62,$C0,$81
#_03C470: db $00,$FC,$20,$64,$00,$81,$00,$E4
#_03C478: db $00,$62,$40,$81,$00,$E8,$00,$62
#_03C480: db $40,$81,$C0,$E8,$80,$60,$40,$80
#_03C488: db $00,$91,$80,$60,$40,$80,$40,$91
#_03C490: db $80,$60,$80,$80,$80,$91,$80,$60
#_03C498: db $80,$80,$00,$94,$80,$60,$80,$80
#_03C4A0: db $80,$94,$80,$60,$80,$80,$00,$95
#_03C4A8: db $80,$60,$80,$80,$80,$95,$80,$60
#_03C4B0: db $80,$80,$00,$98

UNREACH_03C4B4:
#_03C4B4: db $01,$00

UNREACH_03C4B6:
#_03C4B6: db $00,$00,$03,$00,$06,$00,$05,$00
#_03C4BE: db $00,$00,$07,$00,$06,$00,$09,$00
#_03C4C6: db $00,$00,$0B,$00,$06,$00,$0D,$00
#_03C4CE: db $0C,$00,$0F,$00,$12,$00,$11,$00
#_03C4D6: db $18,$00,$13,$00,$1E,$00,$FF,$FF
#_03C4DE: db $FF,$FF

;===================================================================================================

ROUTINE_03C4E0:
#_03C4E0: TYX

#_03C4E1: LDA.w #$000B
#_03C4E4: STA.w $04A2
#_03C4E7: JSR Reset_0818_through_081F
#_03C4EA: STZ.w $0808,X
#_03C4ED: JSR ROUTINE_0392C0
#_03C4F0: STZ.w $080A,X
#_03C4F3: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03C4F6:
#_03C4F6: TYX

#_03C4F7: LDA.w #$0119
#_03C4FA: JSR ROUTINE_038CDF
#_03C4FD: BNE CODE_03C502

#_03C4FF: JMP ROUTINE_038C85

CODE_03C502:
#_03C502: LDA.w $081E,X
#_03C505: CMP.w #$0015
#_03C508: BCC CODE_03C510

#_03C50A: LDA.w #$0010
#_03C50D: STA.w $194E

CODE_03C510:
#_03C510: LDY.w #$0000

CODE_03C513:
#_03C513: LDA.w UNREACH_03C531,Y
#_03C516: BMI CODE_03C52E

#_03C518: CMP.w $081E,X
#_03C51B: BEQ CODE_03C523

#_03C51D: INY
#_03C51E: INY
#_03C51F: INY
#_03C520: INY
#_03C521: BRA CODE_03C513

CODE_03C523:
#_03C523: LDA.w #$0016
#_03C526: STA.b $3E

#_03C528: LDA.w UNREACH_03C533,Y
#_03C52B: JSR ROUTINE_03C416

CODE_03C52E:
#_03C52E: JMP ROUTINE_0386A8

UNREACH_03C531:
#_03C531: db $01,$00

UNREACH_03C533:
#_03C533: db $30,$00,$03,$00,$36,$00,$05,$00
#_03C53B: db $3C,$00,$07,$00,$42,$00,$09,$00
#_03C543: db $48,$00,$0B,$00,$42,$00,$0D,$00
#_03C54B: db $48,$00,$0F,$00,$42,$00,$11,$00
#_03C553: db $48,$00,$13,$00,$42,$00,$15,$00
#_03C55B: db $4E,$00,$17,$00,$54,$00,$19,$00
#_03C563: db $5A,$00,$FF,$FF,$FF,$FF

;===================================================================================================

ROUTINE_03C569:
#_03C569: TYX

#_03C56A: LDA.l $7FE816,X
#_03C56E: STA.l $7E7B28
#_03C572: STZ.w $0808,X
#_03C575: JSR ROUTINE_0392C0
#_03C578: STZ.w $081C,X
#_03C57B: STZ.w $081E,X
#_03C57E: STZ.w $081A,X
#_03C581: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03C584:
#_03C584: TYX

#_03C585: LDA.w $081E,X
#_03C588: STA.w $081C,X
#_03C58B: STZ.w $081E,X

#_03C58E: LDY.w #$0008
#_03C591: LDA.w #$0002
#_03C594: JSR ROUTINE_039664

#_03C597: LDA.w $081A,X
#_03C59A: BEQ CODE_03C5A9

#_03C59C: LDA.w $081C,X
#_03C59F: ORA.w $081E,X
#_03C5A2: BNE .exit

#_03C5A4: STZ.w $081A,X
#_03C5A7: BRA .exit

CODE_03C5A9:
#_03C5A9: LDA.w $081C,X
#_03C5AC: BNE .exit

#_03C5AE: LDA.w $081E,X
#_03C5B1: BEQ .exit

#_03C5B3: LDA.l $7E2530
#_03C5B7: BNE .exit

#_03C5B9: LDA.l $7E7A26
#_03C5BD: BNE .exit

#_03C5BF: JSR ROUTINE_03C5EE
#_03C5C2: BEQ .exit

#_03C5C4: LDA.w #$0001
#_03C5C7: STA.w $081A,X

#_03C5CA: LDA.w #$0032
#_03C5CD: STA.w $0806,X

#_03C5D0: LDA.w #$0020
#_03C5D3: STA.w $19DC
#_03C5D6: JSR ROUTINE_03C5DA

.exit
#_03C5D9: RTS

;===================================================================================================

ROUTINE_03C5DA:
#_03C5DA: LDA.l $7FE816,X
#_03C5DE: STA.l $7E7B28
#_03C5E2: JSR ROUTINE_03C5EE
#_03C5E5: ASL A
#_03C5E6: STA.w $19CE
#_03C5E9: STA.l $7E7B30
#_03C5ED: RTS

;===================================================================================================

ROUTINE_03C5EE:
#_03C5EE: PHX

#_03C5EF: LDA.w $19CE
#_03C5F2: LSR A
#_03C5F3: TAX

#_03C5F4: LDA.l UNREACH_04FF41,X
#_03C5F8: PLX
#_03C5F9: AND.w #$00FF
#_03C5FC: CMP.w #$00FF
#_03C5FF: RTS

;===================================================================================================

ROUTINE_03C600:
#_03C600: JMP ROUTINE_038C84

;===================================================================================================

ROUTINE_03C603:
#_03C603: TYX

#_03C604: LDY.w #$0004
#_03C607: TYA
#_03C608: STA.w $081E,X
#_03C60B: STA.w $0816,X

CODE_03C60E:
#_03C60E: PHY

#_03C60F: LDA.w #$00B6
#_03C612: STA.b $26

#_03C614: LDA.w $080C,X
#_03C617: STA.b $20

#_03C619: LDA.w $080E,X
#_03C61C: STA.b $22
#_03C61E: STY.b $2C
#_03C620: STX.b $30

#_03C622: LDA.w #$000E
#_03C625: STA.b $24
#_03C627: JSL PrepEnemySpawn_long
#_03C62B: CLC

#_03C62C: LDA.w $080E,X
#_03C62F: ADC.w #$FF00
#_03C632: STA.w $080E,X
#_03C635: PLY
#_03C636: DEY
#_03C637: BNE CODE_03C60E

#_03C639: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03C63C:
#_03C63C: TYX

#_03C63D: LDA.w $0816,X
#_03C640: BNE .exit

#_03C642: LDA.w $081E,X
#_03C645: BEQ CODE_03C64A

#_03C647: JMP ROUTINE_038C85

CODE_03C64A:
#_03C64A: JSR ROUTINE_038088
#_03C64D: JSR PrepEnemySpawnMyCoordinates
#_03C650: JMP ROUTINE_038C85

.exit
#_03C653: RTS

;===================================================================================================

ROUTINE_03C654:
#_03C654: TYX
#_03C655: STZ.w $080A,X

#_03C658: LDA.w $0560
#_03C65B: ADC.w #$1000
#_03C65E: STA.w $080C,X

#_03C661: LDA.w $0562
#_03C664: SBC.w #$0100
#_03C667: STA.w $080E,X

#_03C66A: LDA.w #$0006
#_03C66D: STA.w $081E,X
#_03C670: STA.w $0816,X

#_03C673: LDA.w #$0005
#_03C676: STA.b $2C

#_03C678: LDA.w #data03C681
#_03C67B: JSR ROUTINE_039099
#_03C67E: JMP AdvanceAIModeUp

#data03C681:
#_03C681: db $06,$00,$00,$00,$00,$00,$B6,$00
#_03C689: db $80,$FF,$00,$01,$B6,$00,$80,$00
#_03C691: db $00,$01,$B6,$00,$00,$FF,$00,$02
#_03C699: db $B6,$00,$00,$00,$00,$02,$B6,$00
#_03C6A1: db $00,$01,$00,$02,$B6,$00,$80,$FE
#_03C6A9: db $00,$03,$B6,$00,$80,$FF,$00,$03
#_03C6B1: db $B6,$00,$80,$00,$00,$03,$B6,$00
#_03C6B9: db $80,$01,$00,$03,$B6,$00

;===================================================================================================

ROUTINE_03C6BF:
#_03C6BF: TYX

#_03C6C0: LDA.w $0816,X
#_03C6C3: BNE .exit

#_03C6C5: JSR ROUTINE_038088
#_03C6C8: JSR PrepEnemySpawnMyCoordinates
#_03C6CB: JMP ROUTINE_038C85

.exit
#_03C6CE: RTS

;===================================================================================================

ROUTINE_03C6CF:
#_03C6CF: JSL ROUTINE_09FD80
#_03C6D3: RTS

;===================================================================================================

ROUTINE_03C6D4:
#_03C6D4: TYX

#_03C6D5: LDA.w $0816,X
#_03C6D8: BNE .exit

#_03C6DA: JSR ROUTINE_038088
#_03C6DD: JSR PrepEnemySpawnMyCoordinates
#_03C6E0: JMP ROUTINE_038C85

.exit
#_03C6E3: RTS

;===================================================================================================

ROUTINE_03C6E4:
#_03C6E4: LDA.w #$0000
#_03C6E7: STA.l $7FE812,X
#_03C6EB: STA.l $7FE814,X
#_03C6EF: STA.l $7FE816,X
#_03C6F3: STA.l $7FE818,X
#_03C6F7: STA.l $7FE81A,X
#_03C6FB: STA.l $7FE81C,X
#_03C6FF: STA.l $7FE81E,X
#_03C703: RTS

;===================================================================================================

ROUTINE_03C704:
#_03C704: TYX
#_03C705: STZ.w $0806,X
#_03C708: JSR ROUTINE_03C6E4
#_03C70B: STZ.w $081E,X

#_03C70E: LDA.w #$0001
#_03C711: STA.w $0812,X

#_03C714: LDA.w #$FFFF
#_03C717: STA.w $0814,X

#_03C71A: LDA.w $080A,X
#_03C71D: STA.w $0816,X
#_03C720: STZ.w $080A,X
#_03C723: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03C726:
#_03C726: TYX

#_03C727: LDA.w $081E,X
#_03C72A: ASL A
#_03C72B: TAX
#_03C72C: JMP (PTR16_03C72F,X)

PTR16_03C72F:
#_03C72F: dw ROUTINE_03C735
#_03C731: dw ROUTINE_03C762
#_03C733: dw ROUTINE_03C785

;===================================================================================================

ROUTINE_03C735:
#_03C735: TYX
#_03C736: JSR ROUTINE_03C7EB
#_03C739: BEQ .exit

#_03C73B: LDA.w #ROUTINE_03C797
#_03C73E: JSR ROUTINE_038983
#_03C741: BEQ .exit

#_03C743: CLC

#_03C744: LDA.l $7FE812,X
#_03C748: ADC.w #$0020
#_03C74B: STA.l $7FE812,X
#_03C74F: CMP.w #$0100
#_03C752: BCC CODE_03C75E

#_03C754: LDA.w #$0000
#_03C757: STA.l $7FE814,X
#_03C75B: INC.w $081E,X

CODE_03C75E:
#_03C75E: JMP CODE_03C79D

.exit
#_03C761: RTS

;===================================================================================================

ROUTINE_03C762:
#_03C762: TYX
#_03C763: JSR ROUTINE_03C7EB
#_03C766: BEQ .exit

#_03C768: LDA.w #ROUTINE_03C797
#_03C76B: JSR ROUTINE_038983
#_03C76E: BEQ .exit

#_03C770: LDA.l $7FE814,X
#_03C774: INC A
#_03C775: STA.l $7FE814,X
#_03C779: CMP.w #$0108
#_03C77C: BCC CODE_03C781

#_03C77E: INC.w $081E,X

CODE_03C781:
#_03C781: JMP CODE_03C79D

.exit
#_03C784: RTS

;===================================================================================================

ROUTINE_03C785:
#_03C785: TYX
#_03C786: JSR ROUTINE_03C7EB
#_03C789: BEQ .exit

#_03C78B: LDA.w #ROUTINE_03C797
#_03C78E: JSR ROUTINE_038983
#_03C791: BEQ .exit

#_03C793: JMP CODE_03C7AC

.exit
#_03C796: RTS

;===================================================================================================

ROUTINE_03C797:
#_03C797: JSR ROUTINE_03C6E4
#_03C79A: JMP CODE_03C9BA

CODE_03C79D:
#_03C79D: LDA.l $7FE812,X
#_03C7A1: STA.b $20

#_03C7A3: LDA.w #$0008
#_03C7A6: JSR ROUTINE_03A046
#_03C7A9: JMP CODE_03C7AC

CODE_03C7AC:
#_03C7AC: JSR ROUTINE_03CB29

#_03C7AF: LDA.w $0814,X
#_03C7B2: CMP.w #$0008
#_03C7B5: BCS CODE_03C7C7

#_03C7B7: LDA.b $00
#_03C7B9: AND.w #$0007
#_03C7BC: SEP #$20
#_03C7BE: XBA
#_03C7BF: REP #$20
#_03C7C1: ASL A
#_03C7C2: ORA.w #$2000
#_03C7C5: BRA CODE_03C7CA

CODE_03C7C7:
#_03C7C7: LDA.w #$2000

CODE_03C7CA:
#_03C7CA: ORA.w #$001E
#_03C7CD: STA.w $0808,X
#_03C7D0: JSR ROUTINE_038CBD
#_03C7D3: JSR ROUTINE_03CA74
#_03C7D6: JMP ROUTINE_038860

;===================================================================================================

ROUTINE_03C7D9:
#_03C7D9: LDY.w #$0008

#_03C7DC: LDA.w #$0020
#_03C7DF: JSR ROUTINE_039664

#_03C7E2: LDY.w #$0008
#_03C7E5: LDA.w #$0020
#_03C7E8: JSR ROUTINE_039C2D

;===================================================================================================

ROUTINE_03C7EB:
#_03C7EB: LDY.w #$0050
#_03C7EE: JSR ROUTINE_0392EE
#_03C7F1: BEQ CODE_03C7FB

#_03C7F3: JSR ROUTINE_039385
#_03C7F6: BNE CODE_03C7FB

#_03C7F8: JSR ROUTINE_03C9AB

CODE_03C7FB:
#_03C7FB: LDA.w $0800,X
#_03C7FE: RTS

;===================================================================================================

ROUTINE_03C7FF:
#_03C7FF: TYX

#_03C800: LDY.w $081C,X
#_03C803: SEP #$20

#_03C805: LDA.w UNREACH_03C839,Y
#_03C808: STA.w $081E,X
#_03C80B: STZ.w $081F,X
#_03C80E: REP #$20

#_03C810: LDA.w #$0100
#_03C813: STA.w $081C,X

#_03C816: LDA.w #$00B8
#_03C819: STA.w $0810,X

#_03C81C: LDA.w #$0001
#_03C81F: STA.w $0812,X

#_03C822: LDA.w #$FFFF
#_03C825: STA.w $0814,X

#_03C828: LDA.w #$0000
#_03C82B: STA.l $7FE81E,X

#_03C82F: LDA.w $080A,X
#_03C832: STA.w $0816,X
#_03C835: STZ.w $080A,X
#_03C838: RTS

UNREACH_03C839:
#_03C839: db $00,$00,$0C,$0F,$12,$15

;===================================================================================================

ROUTINE_03C83F:
#_03C83F: TYX

#_03C840: LDY.w $0816,X
#_03C843: LDA.w $0800,Y
#_03C846: BMI CODE_03C84B

#_03C848: JMP ROUTINE_038C85

CODE_03C84B:
#_03C84B: JSR ROUTINE_03C8AF
#_03C84E: BEQ .exit

#_03C850: LDA.w $04F4
#_03C853: BNE CODE_03C884

#_03C855: TXA
#_03C856: AND.w #$0020
#_03C859: CMP.w #$0020

#_03C85C: LDA.w $05A0
#_03C85F: ADC.w #$0000
#_03C862: ROR A
#_03C863: BCS CODE_03C877

#_03C865: LDY.w #$0008
#_03C868: LDA.w #$0020
#_03C86B: JSR ROUTINE_039664

#_03C86E: LDY.w #$0008
#_03C871: LDA.w #$0020
#_03C874: JSR ROUTINE_039C2D

CODE_03C877:
#_03C877: LDY.w #$0050
#_03C87A: JSR ROUTINE_0392EE
#_03C87D: BEQ CODE_03C888

#_03C87F: JSR ROUTINE_039385
#_03C882: BNE CODE_03C888

CODE_03C884:
#_03C884: JSR ROUTINE_03C9AB

.exit
#_03C887: RTS

CODE_03C888:
#_03C888: LDA.w $0814,X
#_03C88B: CMP.w #$0008
#_03C88E: BCS CODE_03C8A0

#_03C890: LDA.b $00
#_03C892: AND.w #$0007
#_03C895: SEP #$20
#_03C897: XBA
#_03C898: REP #$20
#_03C89A: ASL A
#_03C89B: ORA.w #$2000
#_03C89E: BRA CODE_03C8A3

CODE_03C8A0:
#_03C8A0: LDA.w #$2000

CODE_03C8A3:
#_03C8A3: ORA.w #$001E
#_03C8A6: STA.w $0808,X
#_03C8A9: JSR ROUTINE_038CBD
#_03C8AC: JMP ROUTINE_038860

;===================================================================================================

ROUTINE_03C8AF:
#_03C8AF: LDA.w $081E,X
#_03C8B2: AND.w #$00FF
#_03C8B5: ASL A
#_03C8B6: ASL A
#_03C8B7: TAY
#_03C8B8: SEP #$20

#_03C8BA: LDA.w $081F,X
#_03C8BD: BNE CODE_03C8C7

#_03C8BF: LDA.w UNREACH_03C8EB+2,Y
#_03C8C2: STA.w $081F,X
#_03C8C5: BRA CODE_03C8CA

CODE_03C8C7:
#_03C8C7: DEC.w $081F,X

CODE_03C8CA:
#_03C8CA: REP #$20
#_03C8CC: TXA
#_03C8CD: TYX
#_03C8CE: JSR (UNREACH_03C8EB,X)

#_03C8D1: LDA.w $0800,X
#_03C8D4: BPL .exit

#_03C8D6: LDA.w $081F,X
#_03C8D9: AND.w #$00FF
#_03C8DC: BNE .exit

#_03C8DE: SEP #$20
#_03C8E0: INC.w $081E,X
#_03C8E3: REP #$20
#_03C8E5: BRA ROUTINE_03C8AF

;===================================================================================================

#ROUTINE_03C8E7:
#_03C8E7: LDA.w #$0000

.exit
#_03C8EA: RTS

UNREACH_03C8EB:
#_03C8EB: dw ROUTINE_03CB54 : db $00,$00
#_03C8EF: dw ROUTINE_03CB12 : db $30,$00
#_03C8F3: dw ROUTINE_03C9F5 : db $07,$00
#_03C8F7: dw ROUTINE_03CA62 : db $01,$00
#_03C8FB: dw ROUTINE_03CB02 : db $02,$00
#_03C8FF: dw ROUTINE_03CAD7 : db $00,$03
#_03C903: dw ROUTINE_03CBDF : db $03,$00
#_03C907: dw ROUTINE_03CA57 : db $01,$00
#_03C90B: dw ROUTINE_03CB02 : db $02,$00
#_03C90F: dw ROUTINE_03CAD7 : db $00,$03
#_03C913: dw ROUTINE_03CBDF : db $07,$00
#_03C917: dw ROUTINE_03CBA1 : db $03,$02
#_03C91B: dw ROUTINE_03CB54 : db $00,$00
#_03C91F: dw ROUTINE_03CB12 : db $28,$00
#_03C923: dw ROUTINE_03CBDF : db $02,$00
#_03C927: dw ROUTINE_03CB54 : db $00,$00
#_03C92B: dw ROUTINE_03CB12 : db $20,$00
#_03C92F: dw ROUTINE_03CBDF : db $02,$00
#_03C933: dw ROUTINE_03CB54 : db $00,$00
#_03C937: dw ROUTINE_03CB12 : db $18,$00
#_03C93B: dw ROUTINE_03CBDF : db $02,$00
#_03C93F: dw ROUTINE_03CA1A : db $00,$00
#_03C943: dw ROUTINE_03CB12 : db $80,$00
#_03C947: dw ROUTINE_03CA57 : db $01,$00
#_03C94B: dw ROUTINE_03CAFB : db $01,$00
#_03C94F: dw ROUTINE_03CAD7 : db $A0,$03
#_03C953: dw ROUTINE_03CBDF : db $17,$00
#_03C957: dw ROUTINE_03CA3A : db $00,$00
#_03C95B: dw ROUTINE_03CAFB : db $10,$00
#_03C95F: dw ROUTINE_03CA62 : db $01,$00
#_03C963: dw ROUTINE_03CAFB : db $01,$00
#_03C967: dw ROUTINE_03CAD7 : db $80,$02
#_03C96B: dw ROUTINE_03CBDF : db $1D,$00
#_03C96F: dw ROUTINE_03CA62 : db $01,$00
#_03C973: dw ROUTINE_03CAFB : db $01,$00
#_03C977: dw ROUTINE_03CAD7 : db $80,$02
#_03C97B: dw ROUTINE_03CBDF : db $21,$00
#_03C97F: dw ROUTINE_03CA62 : db $01,$00
#_03C983: dw ROUTINE_03CAFB : db $01,$00
#_03C987: dw ROUTINE_03CAD7 : db $80,$02
#_03C98B: dw ROUTINE_03CBDF : db $25,$00
#_03C98F: dw ROUTINE_03CA3A : db $01,$00
#_03C993: dw ROUTINE_03CAFB : db $4E,$00
#_03C997: dw ROUTINE_03CA45 : db $01,$00
#_03C99B: dw ROUTINE_03CAFB : db $01,$00
#_03C99F: dw ROUTINE_03CAD7 : db $80,$03
#_03C9A3: dw ROUTINE_03CBDF : db $2B,$00
#_03C9A7: dw ROUTINE_03CB19 : db $FF,$7F

;===================================================================================================

ROUTINE_03C9AB:
#_03C9AB: JSR ROUTINE_038A25_0020

#_03C9AE: LDY.w $0816,X
#_03C9B1: LDA.w $081E,Y
#_03C9B4: BEQ CODE_03C9BA

#_03C9B6: DEC A
#_03C9B7: STA.w $081E,Y

CODE_03C9BA:
#_03C9BA: LDY.w $0816,X

#_03C9BD: LDA.w $0816,Y
#_03C9C0: BEQ CODE_03C9C8

#_03C9C2: DEC A
#_03C9C3: STA.w $0816,Y
#_03C9C6: BNE CODE_03C9D4

CODE_03C9C8:
#_03C9C8: LDA.w $080C,X
#_03C9CB: STA.w $080C,Y

#_03C9CE: LDA.w $080E,X
#_03C9D1: STA.w $080E,Y

CODE_03C9D4:
#_03C9D4: JSR ROUTINE_038C85

#_03C9D7: LDA.w #$0000
#_03C9DA: RTS

;===================================================================================================

ROUTINE_03C9DB:
#_03C9DB: LDA.w $0802,X
#_03C9DE: ADC.w #$0200
#_03C9E1: CMP.w #$1400
#_03C9E4: BCS CODE_03C9F1

#_03C9E6: LDA.w $0804,X
#_03C9E9: ADC.w #$0200
#_03C9EC: CMP.w #$0D00
#_03C9EF: BCC .exit

CODE_03C9F1:
#_03C9F1: JMP CODE_03C9BA

.exit
#_03C9F4: RTS

;===================================================================================================

ROUTINE_03C9F5:
#_03C9F5: TAX

#_03C9F6: LDA.w $080C,X
#_03C9F9: SBC.w $0560
#_03C9FC: CMP.w #$0800
#_03C9FF: BCS CODE_03CA12

#_03CA01: LDA.w $081E,X
#_03CA04: AND.w #$00FF
#_03CA07: ASL A
#_03CA08: ASL A
#_03CA09: TAY

#_03CA0A: LDA.w UNREACH_03C8EB+2,Y
#_03CA0D: SEP #$20
#_03CA0F: STA.w $081E,X

CODE_03CA12:
#_03CA12: SEP #$20
#_03CA14: STZ.w $081F,X
#_03CA17: REP #$20
#_03CA19: RTS

;===================================================================================================

ROUTINE_03CA1A:
#_03CA1A: TAX

#_03CA1B: LDA.w #$017F
#_03CA1E: STA.b $20

#_03CA20: LDA.w #$0180
#_03CA23: STA.w $081C,X
#_03CA26: JSR ROUTINE_03A04D
#_03CA29: JSR ROUTINE_03CB29
#_03CA2C: JMP ROUTINE_03CA74

;===================================================================================================

ROUTINE_03CA2F:
#_03CA2F: TAX

#_03CA30: LDA.w #$0180
#_03CA33: STA.b $20

#_03CA35: LDA.w #$FFE0
#_03CA38: BRA CODE_03CA4E

;===================================================================================================

ROUTINE_03CA3A:
#_03CA3A: TAX

#_03CA3B: LDA.w #$0180
#_03CA3E: STA.b $20

#_03CA40: LDA.w #$0000
#_03CA43: BRA CODE_03CA4E

;===================================================================================================

ROUTINE_03CA45:
#_03CA45: TAX

#_03CA46: LDA.w #$0180
#_03CA49: STA.b $20

#_03CA4B: LDA.w #$0020

CODE_03CA4E:
#_03CA4E: JSR ROUTINE_03A046
#_03CA51: JSR ROUTINE_03CB29
#_03CA54: JMP ROUTINE_03CA74

;===================================================================================================

ROUTINE_03CA57:
#_03CA57: TAX

#_03CA58: LDA.w #$00C0
#_03CA5B: STA.b $20

#_03CA5D: LDA.w #$FFF0
#_03CA60: BRA CODE_03CA6B

;===================================================================================================

ROUTINE_03CA62:
#_03CA62: TAX

#_03CA63: LDA.w #$00C0
#_03CA66: STA.b $20

#_03CA68: LDA.w #$0010

CODE_03CA6B:
#_03CA6B: JSR ROUTINE_03A046
#_03CA6E: JSR ROUTINE_03CB29
#_03CA71: JMP ROUTINE_03CA74

;===================================================================================================

ROUTINE_03CA74:
#_03CA74: LDA.w $05A0
#_03CA77: ASL A
#_03CA78: ASL A
#_03CA79: AND.w #$0020
#_03CA7C: STA.b $34

#_03CA7E: LDA.w $081C,X
#_03CA81: ASL A
#_03CA82: ASL A
#_03CA83: ASL A
#_03CA84: SEP #$20
#_03CA86: XBA
#_03CA87: REP #$20
#_03CA89: AND.w #$001E
#_03CA8C: CLC
#_03CA8D: ADC.b $34
#_03CA8F: TAY

#_03CA90: LDA.w UNREACH_03CA97,Y
#_03CA93: STA.w $0806,X
#_03CA96: RTS

UNREACH_03CA97:
#_03CA97: db $05,$0D,$05,$0D,$0D,$0D,$02,$0D
#_03CA9F: db $02,$0D,$02,$0D,$0C,$0D,$04,$0D
#_03CAA7: db $04,$0D,$04,$0D,$0A,$0D,$08,$0D
#_03CAAF: db $08,$0D,$08,$0D,$0B,$0D,$05,$0D
#_03CAB7: db $07,$0D,$07,$0D,$0D,$0D,$03,$0D
#_03CABF: db $03,$0D,$03,$0D,$0C,$0D,$06,$0D
#_03CAC7: db $06,$0D,$06,$0D,$0A,$0D,$09,$0D
#_03CACF: db $09,$0D,$09,$0D,$0B,$0D,$07,$0D

;===================================================================================================

ROUTINE_03CAD7:
#_03CAD7: TAX

#_03CAD8: LDA.w $081E,X
#_03CADB: AND.w #$00FF
#_03CADE: ASL A
#_03CADF: ASL A
#_03CAE0: TAY

#_03CAE1: LDA.w $081C,X
#_03CAE4: AND.w #$03FF
#_03CAE7: CMP.w UNREACH_03C8EB+2,Y
#_03CAEA: BNE CODE_03CAF1

#_03CAEC: SEP #$20
#_03CAEE: INC.w $081E,X

CODE_03CAF1:
#_03CAF1: SEP #$20
#_03CAF3: STZ.w $081F,X
#_03CAF6: REP #$20
#_03CAF8: RTS

;===================================================================================================

ROUTINE_03CAF9:
#_03CAF9: TAX
#_03CAFA: RTS

;===================================================================================================

ROUTINE_03CAFB:
#_03CAFB: TAX
#_03CAFC: JSR ROUTINE_03CB29
#_03CAFF: JMP ROUTINE_03CA74

;===================================================================================================

ROUTINE_03CB02:
#_03CB02: TAX

CODE_03CB03:
#_03CB03: JSR ROUTINE_03CB29

#_03CB06: LDA.w #ROUTINE_03C797
#_03CB09: JSR ROUTINE_038983
#_03CB0C: BNE CODE_03CB0F

#_03CB0E: RTS

CODE_03CB0F:
#_03CB0F: JMP ROUTINE_03CA74

;===================================================================================================

ROUTINE_03CB12:
#_03CB12: TAX
#_03CB13: JSR ROUTINE_03CB29
#_03CB16: JMP ROUTINE_03CA74

;===================================================================================================

ROUTINE_03CB19:
#_03CB19: TAX
#_03CB1A: JSR ROUTINE_03CB29

#_03CB1D: LDA.w #ROUTINE_03C797
#_03CB20: JSR ROUTINE_038983
#_03CB23: BNE CODE_03CB26

#_03CB25: RTS

CODE_03CB26:
#_03CB26: JMP ROUTINE_03CA74

;===================================================================================================

ROUTINE_03CB29:
#_03CB29: CLC

#_03CB2A: LDA.w $0818,X
#_03CB2D: ADC.w $080C,X
#_03CB30: STA.w $080C,X
#_03CB33: CLC

#_03CB34: LDA.w $081A,X
#_03CB37: ADC.w $080E,X
#_03CB3A: STA.w $080E,X
#_03CB3D: RTS

;===================================================================================================

ROUTINE_03CB3E:
#_03CB3E: TAX

#_03CB3F: LDA.w #$0180
#_03CB42: STA.w $081C,X

#_03CB45: LDA.w #$FFF0
#_03CB48: STA.w $0818,X

#_03CB4B: LDA.w #$0010
#_03CB4E: STA.w $081A,X
#_03CB51: JMP ROUTINE_03CB29

;===================================================================================================

ROUTINE_03CB54:
#_03CB54: TAX
#_03CB55: STZ.w $0818,X

#_03CB58: LDA.w #$0014
#_03CB5B: STA.w $081A,X
#_03CB5E: JMP ROUTINE_03CB29

;===================================================================================================

ROUTINE_03CB61:
#_03CB61: TAX

#_03CB62: LDA.w #$0010
#_03CB65: STA.w $0818,X
#_03CB68: STZ.w $081A,X
#_03CB6B: JMP ROUTINE_03CB29

;===================================================================================================

ROUTINE_03CB6E:
#_03CB6E: TAX
#_03CB6F: STZ.w $0818,X

#_03CB72: LDA.w #$FFF0
#_03CB75: STA.w $081A,X
#_03CB78: JMP ROUTINE_03CB29

;===================================================================================================

ROUTINE_03CB7B:
#_03CB7B: TAX

#_03CB7C: LDA.w #$FFF0
#_03CB7F: STA.w $0818,X
#_03CB82: STZ.w $081A,X
#_03CB85: JMP ROUTINE_03CB29

;===================================================================================================

ROUTINE_03CB88:
#_03CB88: TAX

#_03CB89: LDA.l $7FE81E,X
#_03CB8D: DEC A
#_03CB8E: STA.l $7FE81E,X
#_03CB92: BNE CODE_03CBE0

#_03CB94: SEP #$20

#_03CB96: LDA.b #$2E
#_03CB98: STA.w $081E,X
#_03CB9B: STZ.w $081F,X
#_03CB9E: REP #$20
#_03CBA0: RTS

;===================================================================================================

ROUTINE_03CBA1:
#_03CBA1: TAX

#_03CBA2: LDA.w $081E,X
#_03CBA5: AND.w #$00FF
#_03CBA8: ASL A
#_03CBA9: ASL A
#_03CBAA: TAY
#_03CBAB: SEP #$20

#_03CBAD: LDA.l $7FE81E,X
#_03CBB1: CMP.w UNREACH_03C8EB+3,Y
#_03CBB4: BCC CODE_03CBCB

#_03CBB6: LDA.b #$FF
#_03CBB8: STA.w $081F,X
#_03CBBB: REP #$20

#_03CBBD: LDA.w #$0200
#_03CBC0: STA.b $20

#_03CBC2: LDA.w $081C,X
#_03CBC5: JSR ROUTINE_03A04D
#_03CBC8: JMP CODE_03CB03

CODE_03CBCB:
#_03CBCB: SEP #$20
#_03CBCD: INC A
#_03CBCE: STA.l $7FE81E,X

#_03CBD2: LDA.w UNREACH_03C8EB+2,Y
#_03CBD5: DEC A
#_03CBD6: STA.w $081E,X
#_03CBD9: STZ.w $081F,X
#_03CBDC: REP #$20
#_03CBDE: RTS

;===================================================================================================

ROUTINE_03CBDF:
#_03CBDF: TAX

CODE_03CBE0:
#_03CBE0: LDA.w $081E,X
#_03CBE3: AND.w #$00FF
#_03CBE6: ASL A
#_03CBE7: ASL A
#_03CBE8: TAY
#_03CBE9: SEP #$20

#_03CBEB: LDA.w UNREACH_03C8EB+2,Y
#_03CBEE: DEC A
#_03CBEF: STA.w $081E,X
#_03CBF2: STZ.w $081F,X
#_03CBF5: REP #$20
#_03CBF7: RTS

;===================================================================================================

ROUTINE_03CBF8:
#_03CBF8: JMP ROUTINE_038C84

;===================================================================================================

ROUTINE_03CBFB:
#_03CBFB: TYX

#_03CBFC: LDA.l $7E7A48
#_03CC00: BNE .exit

#_03CC02: STZ.w $081C,X
#_03CC05: STZ.w $081E,X

#_03CC08: LDA.w #$FF80
#_03CC0B: STA.w $0816,X

#_03CC0E: LDA.w #$0008
#_03CC11: STA.w $0818,X

#_03CC14: LDA.w #$003A
#_03CC17: STA.w $0806,X
#_03CC1A: JMP AdvanceAIModeUp

.exit
#_03CC1D: RTS

;===================================================================================================

ROUTINE_03CC1E:
#_03CC1E: TYX
#_03CC1F: JSR ROUTINE_03805B

#_03CC22: LDA.w $0816,X
#_03CC25: BMI CODE_03CC2A

#_03CC27: INC.w $0818,X

CODE_03CC2A:
#_03CC2A: CLC

#_03CC2B: LDA.w $0816,X
#_03CC2E: ADC.w $0818,X
#_03CC31: STA.w $0816,X
#_03CC34: CLC
#_03CC35: ADC.w $080A,X
#_03CC38: STA.w $080A,X
#_03CC3B: BMI CODE_03CC58

#_03CC3D: CMP.w #$0060
#_03CC40: BCC CODE_03CC58

#_03CC42: LDA.w #$0060
#_03CC45: STA.w $080A,X
#_03CC48: STZ.w $081C,X
#_03CC4B: STZ.w $081E,X
#_03CC4E: STZ.w $081A,X

#_03CC51: LDA.w #$001C
#_03CC54: STA.w $0810,X
#_03CC57: RTS

CODE_03CC58:
#_03CC58: JSR ROUTINE_038AD2

#_03CC5B: LDA.w $05A0
#_03CC5E: AND.w #$0003
#_03CC61: BNE CODE_03CC67

#_03CC63: JSL ROUTINE_03916D

CODE_03CC67:
#_03CC67: LDA.w #$FE00

#_03CC6A: LDY.w #$301C
#_03CC6D: JSR ROUTINE_038CAA
#_03CC70: JMP ROUTINE_038860

;===================================================================================================

ROUTINE_03CC73:
#_03CC73: TYX
#_03CC74: JSR ROUTINE_03805B
#_03CC77: INC.w $081A,X

#_03CC7A: LDA.w $081A,X
#_03CC7D: CMP.w #$0400
#_03CC80: BCC CODE_03CC8E

#_03CC82: CMP.w #$0480
#_03CC85: BCC CODE_03CC8A

#_03CC87: JMP ROUTINE_038C85

CODE_03CC8A:
#_03CC8A: ROR A
#_03CC8B: BCC CODE_03CC8E

#_03CC8D: RTS

CODE_03CC8E:
#_03CC8E: JSR ROUTINE_0392C0

#_03CC91: LDA.w $080A,X
#_03CC94: BPL CODE_03CC9B

#_03CC96: CMP.w #$FF00
#_03CC99: BCC CODE_03CCC9

CODE_03CC9B:
#_03CC9B: LDA.w $04C0
#_03CC9E: BEQ CODE_03CCB9

#_03CCA0: LDA.w #$FFFF
#_03CCA3: STA.w $0812,X

#_03CCA6: LDY.w #$0040
#_03CCA9: LDA.w #$001E
#_03CCAC: JSR ROUTINE_0392EE
#_03CCAF: BEQ CODE_03CCB9

#_03CCB1: JSR ROUTINE_039390
#_03CCB4: BNE CODE_03CCB9

#_03CCB6: JMP ROUTINE_038C85

CODE_03CCB9:
#_03CCB9: LDY.w #$0008

#_03CCBC: LDA.w #$000A
#_03CCBF: JSR ROUTINE_039664

#_03CCC2: LDA.b $22
#_03CCC4: BEQ CODE_03CCC9

#_03CCC6: JMP CODE_0391A0

CODE_03CCC9:
#_03CCC9: JSR SlideDownIfAutoScrollerLevel
#_03CCCC: JMP CODE_03D3AF

;===================================================================================================

ROUTINE_03CCCF:
#_03CCCF: TYX

#_03CCD0: LDA.l $7E7A48
#_03CCD4: BNE .exit

#_03CCD6: STZ.w $0812,X
#_03CCD9: STZ.w $0814,X
#_03CCDC: STZ.w $0806,X
#_03CCDF: STZ.w $0808,X
#_03CCE2: JSR ROUTINE_0392C0

#_03CCE5: LDA.w #$0050
#_03CCE8: STA.w $0816,X

#_03CCEB: LDA.w #$00B0
#_03CCEE: STA.w $0810,X

.exit
#_03CCF1: RTS

;===================================================================================================

ROUTINE_03CCF2:
#_03CCF2: TYX
#_03CCF3: JSR ROUTINE_038632
#_03CCF6: BCC CODE_03CCF9

#_03CCF8: RTS

CODE_03CCF9:
#_03CCF9: LDA.w $0806,X
#_03CCFC: BNE CODE_03CD0A

#_03CCFE: CLC

#_03CCFF: LDA.w $0812,X
#_03CD02: ADC.w $0816,X
#_03CD05: BCS CODE_03CD0A

#_03CD07: STA.w $0812,X

CODE_03CD0A:
#_03CD0A: LDA.w $0812,X
#_03CD0D: SEP #$20
#_03CD0F: XBA
#_03CD10: REP #$20
#_03CD12: AND.w #$00FF
#_03CD15: ASL A
#_03CD16: TAY
#_03CD17: CPY.w #$0014
#_03CD1A: BCC CODE_03CD30

#_03CD1C: CPY.w #$001E
#_03CD1F: BCC CODE_03CD2A

#_03CD21: LDA.w #$00B2
#_03CD24: STA.w $0810,X

CODE_03CD27:
#_03CD27: LDY.w #$001E

CODE_03CD2A:
#_03CD2A: LDA.w #$FFFF
#_03CD2D: STA.w $0808,X

CODE_03CD30:
#_03CD30: CLC

#_03CD31: LDA.w $081C,X
#_03CD34: ADC.w #DATA_03CD5C
#_03CD37: STA.b $20

#_03CD39: LDA.b ($20),Y
#_03CD3B: STA.w $0814,X

#_03CD3E: LDA.w $0808,X
#_03CD41: BNE CODE_03CD46

#_03CD43: LDA.w $0812,X

CODE_03CD46:
#_03CD46: LDY.w $199E
#_03CD49: STA.w $1A00,Y

#_03CD4C: LDA.w #$FFFF
#_03CD4F: STA.w $0806,X
#_03CD52: TXA
#_03CD53: STA.w $1A50,Y
#_03CD56: INY
#_03CD57: INY
#_03CD58: STY.w $199E
#_03CD5B: RTS

DATA_03CD5C:
#_03CD5C: dw $DB4E
#_03CD5E: dw $DB6A
#_03CD60: dw $DB86
#_03CD62: dw $DBA2
#_03CD64: dw $DBA2
#_03CD66: dw $DBA2
#_03CD68: dw $DBA2
#_03CD6A: dw $DBA2
#_03CD6C: dw $DBA2
#_03CD6E: dw $DBA2
#_03CD70: dw $DBA2
#_03CD72: dw $DBA2
#_03CD74: dw $DBA2
#_03CD76: dw $DBA2
#_03CD78: dw $DBA2
#_03CD7A: dw $DC12
#_03CD7C: dw $DB4E
#_03CD7E: dw $DB6A
#_03CD80: dw $DB86
#_03CD82: dw $DBBE
#_03CD84: dw $DBBE
#_03CD86: dw $DBBE
#_03CD88: dw $DBBE
#_03CD8A: dw $DBBE
#_03CD8C: dw $DBBE
#_03CD8E: dw $DBBE
#_03CD90: dw $DBBE
#_03CD92: dw $DBBE
#_03CD94: dw $DBBE
#_03CD96: dw $DBBE
#_03CD98: dw $DBBE
#_03CD9A: dw $DC12
#_03CD9C: dw $DB4E
#_03CD9E: dw $DB6A
#_03CDA0: dw $DB86
#_03CDA2: dw $DBDA
#_03CDA4: dw $DBDA
#_03CDA6: dw $DBDA
#_03CDA8: dw $DBDA
#_03CDAA: dw $DBDA
#_03CDAC: dw $DBDA
#_03CDAE: dw $DBDA
#_03CDB0: dw $DBDA
#_03CDB2: dw $DBDA
#_03CDB4: dw $DBDA
#_03CDB6: dw $DBDA
#_03CDB8: dw $DBDA
#_03CDBA: dw $DC12
#_03CDBC: dw $DB4E
#_03CDBE: dw $DB6A
#_03CDC0: dw $DB86
#_03CDC2: dw $DBF6
#_03CDC4: dw $DBF6
#_03CDC6: dw $DBF6
#_03CDC8: dw $DBF6
#_03CDCA: dw $DBF6
#_03CDCC: dw $DBF6
#_03CDCE: dw $DBF6
#_03CDD0: dw $DBF6
#_03CDD2: dw $DBF6
#_03CDD4: dw $DBF6
#_03CDD6: dw $DBF6
#_03CDD8: dw $DBF6
#_03CDDA: dw $DC12
#_03CDDC: dw $E21E
#_03CDDE: dw $E21E
#_03CDE0: dw $E21E
#_03CDE2: dw $E21E
#_03CDE4: dw $E21E
#_03CDE6: dw $E21E
#_03CDE8: dw $E21E
#_03CDEA: dw $E21E
#_03CDEC: dw $E21E
#_03CDEE: dw $E21E
#_03CDF0: dw $E21E
#_03CDF2: dw $E21E
#_03CDF4: dw $E21E
#_03CDF6: dw $E21E
#_03CDF8: dw $E21E
#_03CDFA: dw $E246
#_03CDFC: dw $E232
#_03CDFE: dw $E232
#_03CE00: dw $E232
#_03CE02: dw $E232
#_03CE04: dw $E232
#_03CE06: dw $E232
#_03CE08: dw $E232
#_03CE0A: dw $E232
#_03CE0C: dw $E232
#_03CE0E: dw $E232
#_03CE10: dw $E232
#_03CE12: dw $E232
#_03CE14: dw $E232
#_03CE16: dw $E232
#_03CE18: dw $E232
#_03CE1A: dw $E246
#_03CE1C: dw $E3DA
#_03CE1E: dw $E3DA
#_03CE20: dw $E3DA
#_03CE22: dw $E3DA
#_03CE24: dw $E3DA
#_03CE26: dw $E3DA
#_03CE28: dw $E3DA
#_03CE2A: dw $E3DA
#_03CE2C: dw $E3DA
#_03CE2E: dw $E3DA
#_03CE30: dw $E3DA
#_03CE32: dw $E3DA
#_03CE34: dw $E3DA
#_03CE36: dw $E3DA
#_03CE38: dw $E3DA
#_03CE3A: dw $E40A
#_03CE3C: dw $E422
#_03CE3E: dw $E422
#_03CE40: dw $E422
#_03CE42: dw $E422
#_03CE44: dw $E422
#_03CE46: dw $E422
#_03CE48: dw $E422
#_03CE4A: dw $E422
#_03CE4C: dw $E422
#_03CE4E: dw $E422
#_03CE50: dw $E422
#_03CE52: dw $E422
#_03CE54: dw $E422
#_03CE56: dw $E422
#_03CE58: dw $E422
#_03CE5A: dw $E43A
#_03CE5C: dw $E44A
#_03CE5E: dw $E44A
#_03CE60: dw $E44A
#_03CE62: dw $E44A
#_03CE64: dw $E44A
#_03CE66: dw $E44A
#_03CE68: dw $E44A
#_03CE6A: dw $E44A
#_03CE6C: dw $E44A
#_03CE6E: dw $E44A
#_03CE70: dw $E44A
#_03CE72: dw $E44A
#_03CE74: dw $E44A
#_03CE76: dw $E44A
#_03CE78: dw $E44A
#_03CE7A: dw $E3F2
#_03CE7C: dw $E45A
#_03CE7E: dw $E45A
#_03CE80: dw $E45A
#_03CE82: dw $E45A
#_03CE84: dw $E45A
#_03CE86: dw $E45A
#_03CE88: dw $E45A
#_03CE8A: dw $E45A
#_03CE8C: dw $E45A
#_03CE8E: dw $E45A
#_03CE90: dw $E45A
#_03CE92: dw $E45A
#_03CE94: dw $E45A
#_03CE96: dw $E45A
#_03CE98: dw $E45A
#_03CE9A: dw $E472

;===================================================================================================

ROUTINE_03CE9C:
#_03CE9C: TYX
#_03CE9D: JSR ROUTINE_038632
#_03CEA0: BCS .exit

#_03CEA2: LDA.w $0806,X
#_03CEA5: BEQ CODE_03CEAA

#_03CEA7: JMP CODE_03CD27

CODE_03CEAA:
#_03CEAA: JMP ROUTINE_038C85

.exit
#_03CEAD: RTS

;===================================================================================================

ROUTINE_03CEAE:
#_03CEAE: LDA.w $080A,Y
#_03CEB1: STA.w $081A,Y

#_03CEB4: LDA.w #$0000
#_03CEB7: STA.w $080A,Y
#_03CEBA: BRA CODE_03CEC2

;===================================================================================================

ROUTINE_03CEBC:
#_03CEBC: LDA.w #$0004
#_03CEBF: STA.w $081A,Y

CODE_03CEC2:
#_03CEC2: TYX

#_03CEC3: LDA.w #$002E
#_03CEC6: STA.w $0810,X
#_03CEC9: JMP ROUTINE_0392C0

;===================================================================================================

ROUTINE_03CECC:
#_03CECC: TYX
#_03CECD: DEC.w $081A,X
#_03CED0: BNE CODE_03CED5

#_03CED2: JMP ROUTINE_038C85

CODE_03CED5:
#_03CED5: ROR A
#_03CED6: BCC .exit

#_03CED8: JMP ROUTINE_038B14

.exit
#_03CEDB: RTS

;===================================================================================================

ROUTINE_03CEDC:
#_03CEDC: JMP ROUTINE_038C84

;===================================================================================================

ROUTINE_03CEDF:
#_03CEDF: TYX

#_03CEE0: LDA.w #$FFE0
#_03CEE3: STA.w $081A,X

#_03CEE6: LDA.w #$0002
#_03CEE9: STA.w $0818,X

#_03CEEC: LDA.w #$0001
#_03CEEF: STA.b $20
#_03CEF1: JSR Random
#_03CEF4: AND.w #$00FF
#_03CEF7: SBC.w #$0070
#_03CEFA: ADC.w $081C,X
#_03CEFD: JSR ROUTINE_03A0D3

#_03CF00: LDA.b $24
#_03CF02: LSR A
#_03CF03: LSR A
#_03CF04: LSR A
#_03CF05: LSR A
#_03CF06: LSR A
#_03CF07: ASL.b $24
#_03CF09: BCC CODE_03CF0E

#_03CF0B: ORA.w #$FF00

CODE_03CF0E:
#_03CF0E: STA.w $081C,X

#_03CF11: LDA.b $26
#_03CF13: LSR A
#_03CF14: LSR A
#_03CF15: LSR A
#_03CF16: LSR A
#_03CF17: LSR A
#_03CF18: ASL.b $26
#_03CF1A: BCC CODE_03CF1F

#_03CF1C: ORA.w #$FF00

CODE_03CF1F:
#_03CF1F: STA.w $081E,X
#_03CF22: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03CF25:
#_03CF25: TYX

#_03CF26: LDA.w $081A,X
#_03CF29: BMI CODE_03CF2E

#_03CF2B: INC.w $0818,X

CODE_03CF2E:
#_03CF2E: CLC

#_03CF2F: LDA.w $081A,X
#_03CF32: ADC.w $0818,X
#_03CF35: STA.w $081A,X
#_03CF38: CLC
#_03CF39: ADC.w $080A,X
#_03CF3C: STA.w $080A,X
#_03CF3F: BMI CODE_03CF58

#_03CF41: CMP.w #$0060
#_03CF44: BCC CODE_03CF58

#_03CF46: LDA.w #$0060
#_03CF49: STA.w $080A,X
#_03CF4C: STZ.w $0812,X
#_03CF4F: STZ.w $0814,X
#_03CF52: STZ.w $081A,X
#_03CF55: JMP AdvanceAIModeUp

CODE_03CF58:
#_03CF58: CLC

#_03CF59: LDA.w $080C,X
#_03CF5C: ADC.w $081C,X
#_03CF5F: STA.w $080C,X
#_03CF62: CLC

#_03CF63: LDA.w $080E,X
#_03CF66: ADC.w $081E,X
#_03CF69: STA.w $080E,X

#_03CF6C: LDA.w $080A,X
#_03CF6F: BMI CODE_03CF78

#_03CF71: LDA.w $05A0
#_03CF74: ROR A
#_03CF75: BCC CODE_03CF78

#_03CF77: RTS

CODE_03CF78:
#_03CF78: JMP ROUTINE_038DC2

;===================================================================================================

ROUTINE_03CF7B:
#_03CF7B: JMP ROUTINE_038C84

;===================================================================================================

ROUTINE_03CF7E:
#_03CF7E: TYX
#_03CF7F: STZ.w $081A,X

#_03CF82: LDA.w #$0020
#_03CF85: STA.w $0806,X
#_03CF88: JMP ROUTINE_038A80

;===================================================================================================

ROUTINE_03CF8B:
#_03CF8B: TYX
#_03CF8C: INC.w $04C6
#_03CF8F: INC.w $081A,X

#_03CF92: LDA.w $081A,X
#_03CF95: CMP.w #$0004
#_03CF98: BCC CODE_03CF9D

#_03CF9A: JMP ROUTINE_038C85

CODE_03CF9D:
#_03CF9D: JMP ROUTINE_038DC2

;===================================================================================================

ROUTINE_03CFA0:
#_03CFA0: TYX

#_03CFA1: LDA.w #$0004
#_03CFA4: BRA CODE_03CFAA

;===================================================================================================

ROUTINE_03CFA6:
#_03CFA6: TYX

#_03CFA7: LDA.w #$0018

CODE_03CFAA:
#_03CFAA: STA.w $0818,X
#_03CFAD: STZ.w $081A,X

#_03CFB0: LDA.w #$0022
#_03CFB3: STA.w $0806,X

#_03CFB6: LDA.w #$0040
#_03CFB9: STA.w $0810,X
#_03CFBC: RTS

;===================================================================================================

ROUTINE_03CFBD:
#_03CFBD: TYX
#_03CFBE: INC.w $04C4
#_03CFC1: SEC

#_03CFC2: LDA.w $080E,X
#_03CFC5: SBC.w $081C,X
#_03CFC8: STA.w $080E,X
#_03CFCB: INC.w $081A,X

#_03CFCE: LDA.w $081A,X
#_03CFD1: CMP.w $0818,X
#_03CFD4: BCC CODE_03CFD9

#_03CFD6: JMP ROUTINE_038C85

CODE_03CFD9:
#_03CFD9: JMP ROUTINE_038DC2

;===================================================================================================

ROUTINE_03CFDC:
#_03CFDC: TYX

#_03CFDD: LDA.w #$0082
#_03CFE0: STA.w $0806,X

#_03CFE3: LDA.w #$00AA
#_03CFE6: STA.w $0810,X
#_03CFE9: RTS

;===================================================================================================

ROUTINE_03CFEA:
#_03CFEA: TYX
#_03CFEB: STZ.w $081C,X
#_03CFEE: STZ.w $081E,X

#_03CFF1: LDA.w #$000C
#_03CFF4: STA.w $0806,X

#_03CFF7: LDY.w #$0058
#_03CFFA: LDA.w #$0024
#_03CFFD: JSR ROUTINE_039664

#_03D000: LDA.w #$FC00
#_03D003: LDY.w #$201C
#_03D006: JSR ROUTINE_038CAA
#_03D009: JSR ROUTINE_0392C0
#_03D00C: JMP ROUTINE_038874

;===================================================================================================

ROUTINE_03D00F:
#_03D00F: LDX.w #$0018

#_03D012: LDA.w #$0020
#_03D015: BRA CODE_03D01D

;===================================================================================================

ROUTINE_03D017:
#_03D017: LDX.w #$0010

#_03D01A: LDA.w #$0010

CODE_03D01D:
#_03D01D: TXA
#_03D01E: STA.w $081E,Y
#_03D021: TYX
#_03D022: STA.w $081C,X
#_03D025: STZ.w $081A,X

#_03D028: LDA.w #$02CC
#_03D02B: STA.w $0806,X

#_03D02E: LDA.w #$00A4
#_03D031: STA.w $0810,X
#_03D034: RTS

;===================================================================================================

ROUTINE_03D035:
#_03D035: TYX
#_03D036: INC.w $04C2
#_03D039: INC.w $081A,X

#_03D03C: LDA.w $081A,X
#_03D03F: CMP.w $081E,X
#_03D042: BCC CODE_03D047

#_03D044: JMP ROUTINE_038C85

CODE_03D047:
#_03D047: CLC

#_03D048: LDA.w $080A,X
#_03D04B: ADC.w $081C,X
#_03D04E: BPL CODE_03D053

#_03D050: STA.w $080A,X

CODE_03D053:
#_03D053: JMP ROUTINE_038DC2

;===================================================================================================

ROUTINE_03D056:
#_03D056: TYX
#_03D057: STZ.w $081A,X

#_03D05A: LDA.w #$003C
#_03D05D: STA.w $0806,X

#_03D060: LDA.w #$009E
#_03D063: STA.w $0810,X
#_03D066: RTS

;===================================================================================================

ROUTINE_03D067:
#_03D067: TYX
#_03D068: JSR ROUTINE_03805B

#_03D06B: LDA.w $05A0
#_03D06E: AND.w #$000F
#_03D071: BNE CODE_03D079

#_03D073: LDA.w #$0021
#_03D076: STA.w $04A6

CODE_03D079:
#_03D079: LDA.w #$0002
#_03D07C: STA.b $20
#_03D07E: CLC

#_03D07F: LDA.w $081A,X
#_03D082: ADC.w #$0010
#_03D085: STA.w $081A,X

#_03D088: LDA.w $081A,X
#_03D08B: CMP.w #$0400
#_03D08E: BCC CODE_03D0DF

#_03D090: LDY.w $081C,X
#_03D093: LDA.w $0800,Y
#_03D096: BPL CODE_03D0AD

#_03D098: LDA.w $0810,Y
#_03D09B: CMP.w #$004A
#_03D09E: BEQ CODE_03D0B0

#_03D0A0: CMP.w #$01FC
#_03D0A3: BNE CODE_03D0AD

#_03D0A5: LDA.w #$0000
#_03D0A8: STA.w $081E,Y
#_03D0AB: BRA CODE_03D0C8

CODE_03D0AD:
#_03D0AD: JMP ROUTINE_038C85

CODE_03D0B0:
#_03D0B0: LDA.w #$0022
#_03D0B3: STA.w $04A6

#_03D0B6: LDA.w #$004C
#_03D0B9: STA.w $0810,Y

#_03D0BC: LDA.w #$0026
#_03D0BF: STA.w $0806,Y

#_03D0C2: LDA.w #$0000
#_03D0C5: STA.w $0818,Y

CODE_03D0C8:
#_03D0C8: LDA.w $080C,Y
#_03D0CB: ADC.w #$0080
#_03D0CE: STA.w $080C,X

#_03D0D1: LDA.w $080E,Y
#_03D0D4: STA.w $080E,X

#_03D0D7: LDA.w #$0096
#_03D0DA: STA.w $0810,X
#_03D0DD: BRA CODE_03D109

CODE_03D0DF:
#_03D0DF: JSR ROUTINE_03A0D3

#_03D0E2: LDA.b $24
#_03D0E4: LSR A
#_03D0E5: LSR A
#_03D0E6: LSR A
#_03D0E7: ASL.b $24
#_03D0E9: BCC CODE_03D0EE

#_03D0EB: ORA.w #$FF00

CODE_03D0EE:
#_03D0EE: CLC
#_03D0EF: ADC.w $080C,X
#_03D0F2: STA.w $080C,X

#_03D0F5: LDA.b $26
#_03D0F7: LSR A
#_03D0F8: LSR A
#_03D0F9: LSR A
#_03D0FA: LSR A
#_03D0FB: ASL.b $26
#_03D0FD: BCC CODE_03D102

#_03D0FF: ORA.w #$FF00

CODE_03D102:
#_03D102: CLC
#_03D103: ADC.w $080E,X
#_03D106: STA.w $080E,X

CODE_03D109:
#_03D109: LDA.w $05A0
#_03D10C: AND.w #$0003
#_03D10F: BNE CODE_03D115

#_03D111: JSL ROUTINE_03916D

CODE_03D115:
#_03D115: JMP ROUTINE_038DC2

;===================================================================================================

ROUTINE_03D118:
#_03D118: LDA.w #$FFA0
#_03D11B: STA.w $0816,Y

#_03D11E: LDA.w #$0005
#_03D121: STA.w $0818,Y
#_03D124: BRA CODE_03D138

;===================================================================================================

ROUTINE_03D126:
#_03D126: LDA.w #$0090
#_03D129: STA.w $0806,Y

#_03D12C: LDA.w #$FFC0
#_03D12F: STA.w $0816,Y

#_03D132: LDA.w #$0004
#_03D135: STA.w $0818,Y

CODE_03D138:
#_03D138: TYX

#_03D139: LDA.w #$0010
#_03D13C: STA.w $0812,X

#_03D13F: LDA.w #$FFF0
#_03D142: STA.w $0814,X
#_03D145: STZ.w $081C,X

#_03D148: LDA.w #$0004
#_03D14B: STA.w $081A,X

#_03D14E: LDA.w #$0098
#_03D151: STA.w $0810,X
#_03D154: RTS

;===================================================================================================

ROUTINE_03D155:
#_03D155: TYX
#_03D156: JSR ROUTINE_03805B

#_03D159: LDA.w $0816,X
#_03D15C: BMI CODE_03D161

#_03D15E: INC.w $0818,X

CODE_03D161:
#_03D161: CLC

#_03D162: LDA.w $0816,X
#_03D165: ADC.w $0818,X
#_03D168: STA.w $0816,X
#_03D16B: CLC
#_03D16C: ADC.w $080A,X
#_03D16F: STA.w $080A,X
#_03D172: BMI CODE_03D190

#_03D174: CMP.w #$0060
#_03D177: BCC CODE_03D190

#_03D179: LDA.w #$0060
#_03D17C: STA.w $080A,X
#_03D17F: STZ.w $0812,X
#_03D182: STZ.w $0814,X
#_03D185: STZ.w $081A,X

#_03D188: LDA.w #$009A
#_03D18B: STA.w $0810,X
#_03D18E: BRA CODE_03D19C

CODE_03D190:
#_03D190: JSR ROUTINE_038AA3

#_03D193: LDA.w #$FE00
#_03D196: LDY.w #$301C
#_03D199: JSR ROUTINE_038CAA

CODE_03D19C:
#_03D19C: JSR ROUTINE_0392C0
#_03D19F: JMP ROUTINE_038874

;===================================================================================================

ROUTINE_03D1A2:
#_03D1A2: TYX

#_03D1A3: LDA.w #$0026
#_03D1A6: STA.w $0810,X
#_03D1A9: RTS

;===================================================================================================

ROUTINE_03D1AA:
#_03D1AA: TYX
#_03D1AB: JSR ROUTINE_03D1EB

#_03D1AE: LDA.w #$0060
#_03D1B1: STA.w $080A,X

#_03D1B4: LDA.w #$0000
#_03D1B7: STA.w $0812,X
#_03D1BA: STA.w $0814,X
#_03D1BD: STA.w $081A,X
#_03D1C0: STA.l $7FE812,X

#_03D1C4: LDA.w #$0048
#_03D1C7: STA.w $0810,X

#_03D1CA: LDA.w #$0001
#_03D1CD: STA.w $0812,X
#_03D1D0: STZ.w $0814,X

#_03D1D3: LDA.w #$FE00
#_03D1D6: LDY.w #$20B2
#_03D1D9: JSR ROUTINE_038CAA
#_03D1DC: RTS

;===================================================================================================

ROUTINE_03D1DD:
#_03D1DD: TYX

#_03D1DE: LDA.w $0806,X
#_03D1E1: STA.l $7FE816,X
#_03D1E5: JSR ROUTINE_03D1EB
#_03D1E8: JMP ROUTINE_038650

;===================================================================================================

ROUTINE_03D1EB:
#_03D1EB: JSR ROUTINE_03D79A

#_03D1EE: LDA.w #$0004
#_03D1F1: STA.w $081A,X
#_03D1F4: STA.l $7FE812,X

#_03D1F8: LDA.w #$0028
#_03D1FB: STA.w $0806,X

#_03D1FE: LDA.w #$0046
#_03D201: STA.w $0810,X

#_03D204: LDA.w #$FF01
#_03D207: STA.w $0800,X
#_03D20A: RTS

;===================================================================================================

ROUTINE_03D20B:
#_03D20B: TYX
#_03D20C: JSR ROUTINE_03805B
#_03D20F: JSR ROUTINE_03D4DB
#_03D212: BNE CODE_03D215

#_03D214: RTS

CODE_03D215:
#_03D215: JSR ROUTINE_0392C0

#_03D218: LDA.w #$FE00
#_03D21B: LDY.w #$20B2
#_03D21E: JSR ROUTINE_038CAA
#_03D221: JMP ROUTINE_038860

;===================================================================================================

ROUTINE_03D224:
#_03D224: TYX
#_03D225: JSR ROUTINE_03805B
#_03D228: STZ.w $081C,X
#_03D22B: STZ.w $081E,X
#_03D22E: JSR ROUTINE_0392C0

#_03D231: LDA.l $7FE812,X
#_03D235: BEQ CODE_03D240

#_03D237: STZ.b $20
#_03D239: STZ.b $22
#_03D23B: JSR ROUTINE_038B73
#_03D23E: BCS .exit

CODE_03D240:
#_03D240: LDA.w $080A,X
#_03D243: BPL CODE_03D24A

#_03D245: CMP.w #$FF00
#_03D248: BCC CODE_03D253

CODE_03D24A:
#_03D24A: LDY.w #$0050

#_03D24D: LDA.w #$000C
#_03D250: JSR ROUTINE_039664

CODE_03D253:
#_03D253: LDY.w #$0050
#_03D256: JSR ROUTINE_0392EE
#_03D259: BEQ CODE_03D27A

#_03D25B: JSR ROUTINE_039385
#_03D25E: BNE CODE_03D27A

#_03D260: LDA.w $080C,X
#_03D263: STA.b $20

#_03D265: LDA.w $080E,X
#_03D268: STA.b $22

#_03D26A: LDA.w #$0006
#_03D26D: STA.b $24
#_03D26F: JSL PrepEnemySpawn_long

#_03D273: LDA.w #$0004
#_03D276: STA.w $0810,X

.exit
#_03D279: RTS

CODE_03D27A:
#_03D27A: JMP ROUTINE_038874

;===================================================================================================

ROUTINE_03D27D:
#_03D27D: TYX
#_03D27E: JSR ROUTINE_03805B
#_03D281: JSR ROUTINE_0392D5

#_03D284: LDY.w #$0050
#_03D287: LDA.w #$0024
#_03D28A: JSR ROUTINE_039664
#_03D28D: JMP ROUTINE_038874

;===================================================================================================

ROUTINE_03D290:
#_03D290: TYX
#_03D291: JSR ROUTINE_03805B
#_03D294: INC.w $0818,X

#_03D297: LDA.w $0818,X
#_03D29A: CMP.w #$0010
#_03D29D: BCC CODE_03D2CA

#_03D29F: CMP.w #$0020
#_03D2A2: BNE CODE_03D2BB

#_03D2A4: LDA.w $080C,X
#_03D2A7: STA.b $20

#_03D2A9: LDA.w $080E,X
#_03D2AC: STA.b $22

#_03D2AE: LDY.w #$0002
#_03D2B1: JSL ROUTINE_038A58
#_03D2B5: JSR ROUTINE_0387AD

#_03D2B8: LDA.w $0818,X

CODE_03D2BB:
#_03D2BB: CMP.w #$0030
#_03D2BE: BCC CODE_03D2C6

#_03D2C0: LDA.w #$004E
#_03D2C3: STA.w $0810,X

CODE_03D2C6:
#_03D2C6: ROR A
#_03D2C7: BCC CODE_03D2CA

#_03D2C9: RTS

CODE_03D2CA:
#_03D2CA: JSR ROUTINE_0392D5
#_03D2CD: JMP ROUTINE_038874

;===================================================================================================

ROUTINE_03D2D0:
#_03D2D0: JMP ROUTINE_038C84

;===================================================================================================

ROUTINE_03D2D3:
#_03D2D3: TYX

#_03D2D4: LDA.w #$0060
#_03D2D7: STA.w $080A,X

#_03D2DA: LDA.w #$0024
#_03D2DD: STA.w $0806,X

#_03D2E0: LDA.w #$0000
#_03D2E3: STA.w $0812,X
#_03D2E6: STA.w $0814,X
#_03D2E9: STA.l $7FE812,X

#_03D2ED: LDA.w #$FFFF
#_03D2F0: STA.w $081A,X

#_03D2F3: LDA.w #$0054
#_03D2F6: STA.w $0810,X
#_03D2F9: JMP ROUTINE_038880

;===================================================================================================

ROUTINE_03D2FC:
#_03D2FC: TYX

#_03D2FD: LDA.w $0806,X
#_03D300: STA.l $7FE816,X
#_03D304: JSR ROUTINE_03D79A

#_03D307: LDA.w #$0024
#_03D30A: STA.w $0806,X
#_03D30D: JSR Set_0814_to_FFFF

#_03D310: LDA.w #$2000
#_03D313: STA.w $0808,X

#_03D316: LDA.w #$FFFF
#_03D319: STA.w $081A,X
#_03D31C: STA.l $7FE812,X
#_03D320: JMP ROUTINE_038650

;===================================================================================================

ROUTINE_03D323:
#_03D323: TYX
#_03D324: JSR ROUTINE_03805B
#_03D327: JSR ROUTINE_03D4DB
#_03D32A: BNE CODE_03D32D

#_03D32C: RTS

CODE_03D32D:
#_03D32D: JSR ROUTINE_0392D5

#_03D330: LDA.w #$FE00
#_03D333: LDY.w #$20B2
#_03D336: JSR ROUTINE_038CAA
#_03D339: JMP ROUTINE_038860

;===================================================================================================

ROUTINE_03D33C:
#_03D33C: TYX

#_03D33D: LDA.l $7FE812,X
#_03D341: BEQ CODE_03D34D

#_03D343: STZ.b $20
#_03D345: STZ.b $22
#_03D347: JSR ROUTINE_038B73
#_03D34A: BCC CODE_03D34D

#_03D34C: RTS

CODE_03D34D:
#_03D34D: LDY.w #$0050

#_03D350: LDA.w #$000E
#_03D353: JSR ROUTINE_039664

#_03D356: LDA.w $081A,X
#_03D359: BPL CODE_03D35E

CODE_03D35B:
#_03D35B: JMP CODE_03D32D

CODE_03D35E:
#_03D35E: DEC.w $081A,X

#_03D361: LDA.w $081A,X
#_03D364: BEQ CODE_03D36A

#_03D366: ROR A
#_03D367: BCS CODE_03D35B

#_03D369: RTS

CODE_03D36A:
#_03D36A: LDA.w #$0022
#_03D36D: STA.w $04A6

#_03D370: LDA.w $080C,X
#_03D373: STA.b $20

#_03D375: LDA.w $080E,X
#_03D378: STA.b $22

#_03D37A: LDY.w #$0008

#_03D37D: LDA.w $18E4
#_03D380: CMP.w #$0008
#_03D383: BNE CODE_03D388

#_03D385: LDY.w #$0001

CODE_03D388:
#_03D388: JSL ROUTINE_038A58
#_03D38C: JSR ROUTINE_0387AD
#_03D38F: JMP ROUTINE_038C85

;===================================================================================================

ROUTINE_03D392:
#_03D392: JSR ROUTINE_03D79A

#_03D395: LDA.w #$0004
#_03D398: STA.w $081A,X

#_03D39B: LDA.w #$0038
#_03D39E: STA.w $0806,X

#_03D3A1: LDA.w #$007C
#_03D3A4: STA.w $0810,X
#_03D3A7: RTS

;===================================================================================================

ROUTINE_03D3A8:
#_03D3A8: TYX
#_03D3A9: JSR ROUTINE_03D4DB
#_03D3AC: BNE CODE_03D3AF

#_03D3AE: RTS

CODE_03D3AF:
#_03D3AF: JSR ROUTINE_0392C0

#_03D3B2: LDA.w #$FE00
#_03D3B5: LDY.w #$301C
#_03D3B8: JSR ROUTINE_038CAA
#_03D3BB: JMP ROUTINE_038874

;===================================================================================================

ROUTINE_03D3BE:
#_03D3BE: TYX
#_03D3BF: JSR SlideDownIfAutoScrollerLevel
#_03D3C2: JSR ROUTINE_03805B
#_03D3C5: JSR ROUTINE_03894A
#_03D3C8: BEQ .exit

#_03D3CA: INC.w $081A,X

#_03D3CD: LDA.w $081A,X
#_03D3D0: CMP.w #$0400
#_03D3D3: BCC CODE_03D3E1

#_03D3D5: CMP.w #$0480
#_03D3D8: BCC CODE_03D3DD

#_03D3DA: JMP ROUTINE_038C85

CODE_03D3DD:
#_03D3DD: ROR A
#_03D3DE: BCC CODE_03D3E1

.exit
#_03D3E0: RTS

CODE_03D3E1:
#_03D3E1: JSR ROUTINE_0392C0

#_03D3E4: LDA.w $080A,X
#_03D3E7: BPL CODE_03D3EE

#_03D3E9: CMP.w #$FF00
#_03D3EC: BCC CODE_03D41C

CODE_03D3EE:
#_03D3EE: LDA.w $04C0
#_03D3F1: BEQ CODE_03D40C

#_03D3F3: LDA.w #$FFFF
#_03D3F6: STA.w $0812,X

#_03D3F9: LDY.w #$0040
#_03D3FC: LDA.w #$001A
#_03D3FF: JSR ROUTINE_0392EE
#_03D402: BEQ CODE_03D40C

#_03D404: JSR ROUTINE_039390
#_03D407: BNE CODE_03D40C

#_03D409: JMP ROUTINE_038C85

CODE_03D40C:
#_03D40C: LDY.w #$0008

#_03D40F: LDA.w #$001A
#_03D412: JSR ROUTINE_039664

#_03D415: LDA.b $22
#_03D417: BEQ CODE_03D41C

#_03D419: JMP CODE_0391A0

CODE_03D41C:
#_03D41C: JMP CODE_03D3AF

;===================================================================================================

ROUTINE_03D41F:
#_03D41F: JSR ROUTINE_03D79A

#_03D422: LDA.w #$0004
#_03D425: STA.w $081A,X

#_03D428: LDA.w #$0036
#_03D42B: STA.w $0806,X

#_03D42E: LDA.w #$0076
#_03D431: STA.w $0810,X
#_03D434: RTS

;===================================================================================================

ROUTINE_03D435:
#_03D435: TYX
#_03D436: JSR ROUTINE_03805B
#_03D439: JSR ROUTINE_03D4DB
#_03D43C: BNE CODE_03D43F

#_03D43E: RTS

CODE_03D43F:
#_03D43F: JSR ROUTINE_0392C0

#_03D442: LDA.w #$FE00
#_03D445: LDY.w #$301C
#_03D448: JSR ROUTINE_038CAA
#_03D44B: JMP ROUTINE_038874

;===================================================================================================

ROUTINE_03D44E:
#_03D44E: TYX
#_03D44F: JSR ROUTINE_03805B
#_03D452: JSR SlideDownIfAutoScrollerLevel
#_03D455: JSR ROUTINE_03894A
#_03D458: BEQ .exit

#_03D45A: LDA.w $080A,X
#_03D45D: BPL CODE_03D464

#_03D45F: CMP.w #$FF00
#_03D462: BCC CODE_03D492

CODE_03D464:
#_03D464: LDA.w $04C0
#_03D467: BEQ CODE_03D482

#_03D469: LDA.w #$FFFF
#_03D46C: STA.w $0812,X

#_03D46F: LDY.w #$0040
#_03D472: LDA.w #$0018
#_03D475: JSR ROUTINE_0392EE
#_03D478: BEQ CODE_03D482

#_03D47A: JSR ROUTINE_039390
#_03D47D: BNE CODE_03D482

#_03D47F: JMP ROUTINE_038C85

CODE_03D482:
#_03D482: LDY.w #$0040

#_03D485: LDA.w #$0018
#_03D488: JSR ROUTINE_039664

#_03D48B: LDA.b $22
#_03D48D: BEQ CODE_03D492

#_03D48F: JMP CODE_0391A0

CODE_03D492:
#_03D492: INC.w $081A,X

#_03D495: LDA.w $081A,X
#_03D498: CMP.w #$0400
#_03D49B: BCC CODE_03D4A9

#_03D49D: CMP.w #$0480
#_03D4A0: BCC CODE_03D4A5

#_03D4A2: JMP ROUTINE_038C85

CODE_03D4A5:
#_03D4A5: ROR A
#_03D4A6: BCC CODE_03D4A9

.exit
#_03D4A8: RTS

CODE_03D4A9:
#_03D4A9: JMP CODE_03D43F

;===================================================================================================

ROUTINE_03D4AC:
#_03D4AC: JSR ROUTINE_03D79A

#_03D4AF: LDA.w #$0004
#_03D4B2: STA.w $081A,X

#_03D4B5: LDA.w #$0034
#_03D4B8: STA.w $0806,X

#_03D4BB: LDA.w #$0070
#_03D4BE: STA.w $0810,X
#_03D4C1: RTS

;===================================================================================================

ROUTINE_03D4C2:
#_03D4C2: TYX
#_03D4C3: JSR ROUTINE_03D4DB
#_03D4C6: BNE CODE_03D4C9

#_03D4C8: RTS

CODE_03D4C9:
#_03D4C9: JSR ROUTINE_03805B
#_03D4CC: JSR ROUTINE_0392C0

#_03D4CF: LDA.w #$FE00
#_03D4D2: LDY.w #$301C
#_03D4D5: JSR ROUTINE_038CAA
#_03D4D8: JMP ROUTINE_038874

;===================================================================================================

ROUTINE_03D4DB:
#_03D4DB: JSR ROUTINE_03894A
#_03D4DE: BRA CODE_03D4E3

;===================================================================================================

ROUTINE_03D4E0:
#_03D4E0: JMP CODE_03D575

CODE_03D4E3:
#_03D4E3: LDA.w $0816,X
#_03D4E6: BMI CODE_03D4EB

#_03D4E8: INC.w $0818,X

CODE_03D4EB:
#_03D4EB: CLC

#_03D4EC: LDA.w $0816,X
#_03D4EF: ADC.w $0818,X
#_03D4F2: STA.w $0816,X
#_03D4F5: CLC
#_03D4F6: ADC.w $080A,X
#_03D4F9: STA.w $080A,X
#_03D4FC: BMI CODE_03D533

#_03D4FE: CMP.w #$0060
#_03D501: BCC CODE_03D533

#_03D503: JSR AdvanceAIModeUp

#_03D506: LDA.w #$0060
#_03D509: STA.w $080A,X

#_03D50C: LDY.w $0804,X
#_03D50F: LDA.w $0802,X
#_03D512: JSR ROUTINE_038E3D
#_03D515: CMP.w #$001A
#_03D518: BEQ CODE_03D51F

#_03D51A: CMP.w #$001C
#_03D51D: BNE CODE_03D52A

CODE_03D51F:
#_03D51F: LDA.w #$00A8
#_03D522: JSR ROUTINE_038A2D
#_03D525: JSR ROUTINE_038C85
#_03D528: BRA CODE_03D575

CODE_03D52A:
#_03D52A: STZ.w $081C,X
#_03D52D: STZ.w $081E,X
#_03D530: STZ.w $0814,X

CODE_03D533:
#_03D533: LDA.w $081C,X
#_03D536: ORA.w $081E,X
#_03D539: BEQ CODE_03D575

#_03D53B: JSR ROUTINE_0388D4

#_03D53E: LDA.b $20
#_03D540: AND.w #$0003
#_03D543: BEQ CODE_03D556

#_03D545: CMP.w #$0003
#_03D548: BEQ CODE_03D52A

#_03D54A: ROR A
#_03D54B: BCC CODE_03D550

#_03D54D: STZ.w $081C,X

CODE_03D550:
#_03D550: ROR A
#_03D551: BCC CODE_03D556

#_03D553: STZ.w $081E,X

CODE_03D556:
#_03D556: JSR ROUTINE_038AD2
#_03D559: JSR ROUTINE_0392C0

#_03D55C: LDY.w $0804,X
#_03D55F: LDA.w $0802,X
#_03D562: JSR ROUTINE_038E3D

#_03D565: LDA.b $34
#_03D567: BNE CODE_03D52A

#_03D569: LDA.w $05A0
#_03D56C: AND.w #$0003
#_03D56F: BNE CODE_03D575

#_03D571: JSL ROUTINE_03916D

CODE_03D575:
#_03D575: LDA.w $0800,X
#_03D578: RTS

;===================================================================================================

ROUTINE_03D579:
#_03D579: TYX
#_03D57A: JSR ROUTINE_03894A
#_03D57D: BEQ .exit

#_03D57F: LDA.w $080A,X
#_03D582: BPL CODE_03D589

#_03D584: CMP.w #$FF00
#_03D587: BCC CODE_03D5B7

CODE_03D589:
#_03D589: LDA.w $04C0
#_03D58C: BEQ CODE_03D5A7

#_03D58E: LDA.w #$FFFF
#_03D591: STA.w $0812,X

#_03D594: LDY.w #$0040
#_03D597: LDA.w #$0016
#_03D59A: JSR ROUTINE_0392EE
#_03D59D: BEQ CODE_03D5A7

#_03D59F: JSR ROUTINE_039390
#_03D5A2: BNE CODE_03D5A7

#_03D5A4: JMP ROUTINE_038C85

CODE_03D5A7:
#_03D5A7: LDY.w #$0040

#_03D5AA: LDA.w #$0016
#_03D5AD: JSR ROUTINE_039664

#_03D5B0: LDA.b $22
#_03D5B2: BEQ CODE_03D5B7

#_03D5B4: JMP CODE_0391A0

CODE_03D5B7:
#_03D5B7: INC.w $081A,X

#_03D5BA: LDA.w $081A,X
#_03D5BD: CMP.w #$0400
#_03D5C0: BCC CODE_03D5CE

#_03D5C2: CMP.w #$0480
#_03D5C5: BCC CODE_03D5CA

#_03D5C7: JMP ROUTINE_038C85

CODE_03D5CA:
#_03D5CA: ROR A
#_03D5CB: BCC CODE_03D5CE

.exit
#_03D5CD: RTS

CODE_03D5CE:
#_03D5CE: JSR SlideDownIfAutoScrollerLevel
#_03D5D1: JMP CODE_03D4C9

;===================================================================================================

SlideDownIfAutoScrollerLevel:
#_03D5D4: LDA.w $18E4
#_03D5D7: CMP.w #$0008
#_03D5DA: BEQ .autoscroller

#_03D5DC: CMP.w #$000E
#_03D5DF: BNE .exit

.autoscroller
#_03D5E1: CLC

#_03D5E2: LDA.w $080E,X
#_03D5E5: ADC.w #$0020
#_03D5E8: STA.w $080E,X

.exit
#_03D5EB: RTS

;===================================================================================================

ROUTINE_03D5EC:
#_03D5EC: JSR ROUTINE_03D79A

#_03D5EF: LDA.w #$003C
#_03D5F2: STA.w $0806,X

#_03D5F5: LDA.w #$0004
#_03D5F8: STA.w $081A,X

#_03D5FB: LDA.w #$FFFF
#_03D5FE: STA.w $0812,X

#_03D601: LDA.w #$005E
#_03D604: STA.w $0810,X
#_03D607: RTS

;===================================================================================================

ROUTINE_03D608:
#_03D608: TYX
#_03D609: JSR ROUTINE_03D4DB
#_03D60C: BNE CODE_03D60F

#_03D60E: RTS

CODE_03D60F:
#_03D60F: JSR ROUTINE_0392C0

#_03D612: LDA.w #$FE00
#_03D615: LDY.w #$301C
#_03D618: JSR ROUTINE_038CAA
#_03D61B: JMP ROUTINE_038874

;===================================================================================================

ROUTINE_03D61E:
#_03D61E: TYX
#_03D61F: JSR ROUTINE_03805B
#_03D622: JSR SlideDownIfAutoScrollerLevel
#_03D625: JSR ROUTINE_03894A
#_03D628: BEQ .exit

#_03D62A: LDA.w $080A,X
#_03D62D: BPL CODE_03D634

#_03D62F: CMP.w #$FF00
#_03D632: BCC CODE_03D662

CODE_03D634:
#_03D634: LDA.w $04C0
#_03D637: BEQ CODE_03D652

#_03D639: LDA.w #$FFFF
#_03D63C: STA.w $0812,X

#_03D63F: LDY.w #$0040
#_03D642: LDA.w #$0014
#_03D645: JSR ROUTINE_0392EE
#_03D648: BEQ CODE_03D652

#_03D64A: JSR ROUTINE_039390
#_03D64D: BNE CODE_03D652

#_03D64F: JMP ROUTINE_038C85

CODE_03D652:
#_03D652: LDY.w #$0040

#_03D655: LDA.w #$0014
#_03D658: JSR ROUTINE_039664

#_03D65B: LDA.b $22
#_03D65D: BEQ CODE_03D662

#_03D65F: JMP CODE_0391A0

CODE_03D662:
#_03D662: INC.w $081A,X

#_03D665: LDA.w $081A,X
#_03D668: CMP.w #$0400
#_03D66B: BCC CODE_03D679

#_03D66D: CMP.w #$0480
#_03D670: BCC CODE_03D675

#_03D672: JMP ROUTINE_038C85

CODE_03D675:
#_03D675: ROR A
#_03D676: BCC CODE_03D679

.exit
#_03D678: RTS

CODE_03D679:
#_03D679: JMP CODE_03D60F

;===================================================================================================

ROUTINE_03D67C:
#_03D67C: JSR ROUTINE_03D753

#_03D67F: LDA.w #$0030
#_03D682: STA.w $0806,X

#_03D685: LDA.w #$006A
#_03D688: STA.w $0810,X
#_03D68B: RTS

;===================================================================================================

ROUTINE_03D68C:
#_03D68C: JSR ROUTINE_03D79A

#_03D68F: LDA.w #$0030
#_03D692: STA.w $0806,X
#_03D695: RTS

;===================================================================================================

ROUTINE_03D696:
#_03D696: TYX
#_03D697: INC.w $04CA
#_03D69A: JSR ROUTINE_03D85A
#_03D69D: BEQ .exit

#_03D69F: LDA.w $081A,X
#_03D6A2: CMP.w #$000C
#_03D6A5: BCS CODE_03D6AD

#_03D6A7: LDA.b $00
#_03D6A9: ROR A
#_03D6AA: BCS CODE_03D6AD

#_03D6AC: RTS

CODE_03D6AD:
#_03D6AD: JSR ROUTINE_0392C0

#_03D6B0: LDA.l $0018E4
#_03D6B4: CMP.w #$0008
#_03D6B7: BEQ CODE_03D6DF

#_03D6B9: LDA.w $081C,X
#_03D6BC: ORA.w $081E,X
#_03D6BF: BNE CODE_03D6DF

#_03D6C1: LDA.w $04C0
#_03D6C4: BEQ CODE_03D6DF

#_03D6C6: LDA.w #$FFFF
#_03D6C9: STA.w $0812,X

#_03D6CC: LDY.w #$0040
#_03D6CF: LDA.w #$0012
#_03D6D2: JSR ROUTINE_0392EE
#_03D6D5: BEQ CODE_03D6DF

#_03D6D7: JSR ROUTINE_039390
#_03D6DA: BNE CODE_03D6DF

#_03D6DC: JMP ROUTINE_038C85

CODE_03D6DF:
#_03D6DF: LDY.w $18CE
#_03D6E2: BEQ CODE_03D6F1

#_03D6E4: LDY.w #$0048
#_03D6E7: LDA.w #$0012
#_03D6EA: JSR ROUTINE_039C2D

#_03D6ED: LDA.b $22
#_03D6EF: BNE CODE_03D70B

CODE_03D6F1:
#_03D6F1: LDY.w #$0040

#_03D6F4: LDA.w #$0012
#_03D6F7: JSR ROUTINE_039664

#_03D6FA: LDA.b $22
#_03D6FC: BNE CODE_03D70B

#_03D6FE: LDA.w #$FE00
#_03D701: LDY.w #$201C
#_03D704: JSR ROUTINE_038CAA
#_03D707: JMP ROUTINE_038860

.exit
#_03D70A: RTS

CODE_03D70B:
#_03D70B: JMP ROUTINE_038C85

;===================================================================================================

ROUTINE_03D70E:
#_03D70E: TYX

#_03D70F: LDA.w #$0002
#_03D712: STA.w $081E,X
#_03D715: STZ.w $0816,X
#_03D718: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03D71B:
#_03D71B: TYX
#_03D71C: INC.w $081E,X

#_03D71F: LDA.w $081E,X
#_03D722: CMP.w #$0002
#_03D725: BCC CODE_03D73E

#_03D727: STZ.w $081E,X

#_03D72A: LDY.w $0816,X
#_03D72D: LDA.w UNREACH_03D747,Y
#_03D730: BNE CODE_03D735

#_03D732: JMP ROUTINE_038C85

CODE_03D735:
#_03D735: STA.w $0806,X
#_03D738: INY
#_03D739: INY
#_03D73A: TYA
#_03D73B: STA.w $0816,X

CODE_03D73E:
#_03D73E: LDA.w #$2000
#_03D741: STA.w $0808,X
#_03D744: JMP ROUTINE_038860

UNREACH_03D747:
#_03D747: db $40,$0D,$42,$0D,$42,$0D,$40,$0D
#_03D74F: db $40,$0D,$00,$00

;===================================================================================================

ROUTINE_03D753:
#_03D753: TYX

#_03D754: LDA.l $0018E4
#_03D758: CMP.w #$0008
#_03D75B: BNE CODE_03D762

#_03D75D: LDA.w #$0029
#_03D760: BRA CODE_03D765

CODE_03D762:
#_03D762: LDA.w #$003D

CODE_03D765:
#_03D765: STA.w $081A,X
#_03D768: JSR ROUTINE_03FFB7

#_03D76B: LDA.w #$0032
#_03D76E: STA.w $0806,X

#_03D771: LDA.w #$0064
#_03D774: STA.w $0810,X

#_03D777: LDA.w $081C,X
#_03D77A: ASL A
#_03D77B: ASL A
#_03D77C: TAY

#_03D77D: LDA.w UNREACH_03D78A,Y
#_03D780: STA.w $081C,X

#_03D783: LDA.w UNREACH_03D78C,Y
#_03D786: STA.w $081E,X
#_03D789: RTS

UNREACH_03D78A:
#_03D78A: db $F0,$FF

UNREACH_03D78C:
#_03D78C: db $F0,$FF,$10,$00,$F0,$FF,$F0,$FF
#_03D794: db $10,$00,$10,$00,$10,$00

;===================================================================================================

ROUTINE_03D79A:
#_03D79A: TYX
#_03D79B: JSR Random
#_03D79E: AND.w #$0006
#_03D7A1: TAY

#_03D7A2: LDA.w UNREACH_03D7D5,Y
#_03D7A5: STA.w $081C,X
#_03D7A8: JSR Random
#_03D7AB: AND.w #$0006
#_03D7AE: TAY

#_03D7AF: LDA.w UNREACH_03D7D5,Y
#_03D7B2: STA.w $081E,X

#_03D7B5: LDA.l $0018E4
#_03D7B9: CMP.w #$0008
#_03D7BC: BNE CODE_03D7C3

#_03D7BE: LDA.w #$001D
#_03D7C1: BRA CODE_03D7C6

CODE_03D7C3:
#_03D7C3: LDA.w #$003D

CODE_03D7C6:
#_03D7C6: STA.w $081A,X
#_03D7C9: JSR ROUTINE_03FFB7

#_03D7CC: LDA.w #$0032
#_03D7CF: STA.w $0806,X
#_03D7D2: JMP AdvanceAIModeUp

UNREACH_03D7D5:
#_03D7D5: db $F0,$FF,$00,$00,$10,$00,$00,$00
#_03D7DD: db $F0,$FF,$00,$00,$F8,$FF,$00,$00

;===================================================================================================

ROUTINE_03D7E5:
#_03D7E5: TYX
#_03D7E6: INC.w $04CA
#_03D7E9: JSR ROUTINE_03D85A
#_03D7EC: BEQ .exit

#_03D7EE: LDA.w $081A,X
#_03D7F1: CMP.w #$000C
#_03D7F4: BCS CODE_03D7FC

#_03D7F6: LDA.b $00
#_03D7F8: ROR A
#_03D7F9: BCS CODE_03D7FC

#_03D7FB: RTS

CODE_03D7FC:
#_03D7FC: JSR ROUTINE_0392C0

#_03D7FF: LDA.l $0018E4
#_03D803: CMP.w #$0008
#_03D806: BEQ CODE_03D82B

#_03D808: LDA.w $081C,X
#_03D80B: ORA.w $081E,X
#_03D80E: BNE CODE_03D82B

#_03D810: LDA.w $04C0
#_03D813: BEQ CODE_03D82B

#_03D815: LDA.w #$FFFF
#_03D818: STA.w $0812,X

#_03D81B: LDY.w #$0040
#_03D81E: LDA.w #$0010
#_03D821: JSR ROUTINE_0392EE
#_03D824: BEQ CODE_03D82B

#_03D826: JSR ROUTINE_039390
#_03D829: BEQ CODE_03D857

CODE_03D82B:
#_03D82B: LDY.w $18CE
#_03D82E: BEQ CODE_03D83D

#_03D830: LDY.w #$0048
#_03D833: LDA.w #$0010
#_03D836: JSR ROUTINE_039C2D

#_03D839: LDA.b $22
#_03D83B: BNE CODE_03D857

CODE_03D83D:
#_03D83D: LDY.w #$0048

#_03D840: LDA.w #$0010
#_03D843: JSR ROUTINE_039664

#_03D846: LDA.b $22
#_03D848: BNE CODE_03D857

#_03D84A: LDA.w #$FE00
#_03D84D: LDY.w #$201C
#_03D850: JSR ROUTINE_038CAA
#_03D853: JMP ROUTINE_038860

.exit
#_03D856: RTS

CODE_03D857:
#_03D857: JMP ROUTINE_038C85

;===================================================================================================

ROUTINE_03D85A:
#_03D85A: JSR ROUTINE_03894A
#_03D85D: BNE CODE_03D865

#_03D85F: JSR ROUTINE_038854
#_03D862: JMP CODE_03D91D

CODE_03D865:
#_03D865: LDA.w $0816,X
#_03D868: BMI CODE_03D86D

#_03D86A: INC.w $0818,X

CODE_03D86D:
#_03D86D: CLC

#_03D86E: LDA.w $0816,X
#_03D871: ADC.w $0818,X
#_03D874: STA.w $0816,X
#_03D877: CLC
#_03D878: ADC.w $080A,X
#_03D87B: STA.w $080A,X
#_03D87E: BMI CODE_03D8D2

#_03D880: CMP.w #$00A0
#_03D883: BCC CODE_03D8D2

#_03D885: LDA.w #$00A0
#_03D888: STA.w $080A,X

#_03D88B: LDA.l $0018E4
#_03D88F: CMP.w #$000E
#_03D892: BEQ CODE_03D8BC

#_03D894: LDY.w $0804,X
#_03D897: LDA.w $0802,X
#_03D89A: JSR ROUTINE_038E3D
#_03D89D: LSR A
#_03D89E: TAY

#_03D89F: LDA.w UNREACH_03D936,Y
#_03D8A2: AND.w #$00FF
#_03D8A5: TAY

#_03D8A6: LDA.w UNREACH_03D92E,Y
#_03D8A9: STA.b $20

#_03D8AB: JMP ($0020)

;===================================================================================================

ROUTINE_03D8AE:
#_03D8AE: LDA.w $18E4
#_03D8B1: CMP.w #$0006
#_03D8B4: BEQ CODE_03D8BC

;---------------------------------------------------------------------------------------------------

#ROUTINE_03D8B6:
#_03D8B6: LDA.w #$00A8
#_03D8B9: JSR ROUTINE_038A2D

;---------------------------------------------------------------------------------------------------

CODE_03D8BC:
#_03D8BC: JSR ROUTINE_038854
#_03D8BF: JSR ROUTINE_038C85
#_03D8C2: BRA CODE_03D91D

;===================================================================================================

ROUTINE_03D8C4:
#_03D8C4: JSR ROUTINE_03FFB7

#_03D8C7: LDA.w $081A,X
#_03D8CA: BEQ CODE_03D8BC

CODE_03D8CC:
#_03D8CC: STZ.w $081C,X
#_03D8CF: STZ.w $081E,X

CODE_03D8D2:
#_03D8D2: LDA.w $081C,X
#_03D8D5: ORA.w $081E,X
#_03D8D8: BEQ CODE_03D921

#_03D8DA: JSR ROUTINE_038AD2
#_03D8DD: JSR ROUTINE_0388D4

#_03D8E0: LDA.b $20
#_03D8E2: AND.w #$0003
#_03D8E5: BEQ CODE_03D8F8

#_03D8E7: CMP.w #$0003
#_03D8EA: BEQ CODE_03D8CC

#_03D8EC: ROR A
#_03D8ED: BCC CODE_03D8F2

#_03D8EF: STZ.w $081C,X

CODE_03D8F2:
#_03D8F2: ROR A
#_03D8F3: BCC CODE_03D8F8

#_03D8F5: STZ.w $081E,X

CODE_03D8F8:
#_03D8F8: JSR ROUTINE_0392C0

#_03D8FB: LDA.l $0018E4
#_03D8FF: CMP.w #$0008
#_03D902: BEQ CODE_03D911

#_03D904: LDY.w $0804,X
#_03D907: LDA.w $0802,X
#_03D90A: JSR ROUTINE_038E3D

#_03D90D: LDA.b $34
#_03D90F: BNE CODE_03D8CC

CODE_03D911:
#_03D911: LDA.w $05A0
#_03D914: AND.w #$0007
#_03D917: BNE CODE_03D91D

#_03D919: JSL ROUTINE_03916D

CODE_03D91D:
#_03D91D: LDA.w $0800,X
#_03D920: RTS

CODE_03D921:
#_03D921: CLC

#_03D922: LDA.w $080E,X
#_03D925: ADC.l $7E7A34
#_03D929: STA.w $080E,X
#_03D92C: BRA CODE_03D91D

UNREACH_03D92E:
#_03D92E: dw ROUTINE_03D8C4
#_03D930: dw ROUTINE_03D8AE
#_03D932: dw ROUTINE_03D8B6
#_03D934: dw ROUTINE_03D8AE

UNREACH_03D936:
#_03D936: db $00,$00,$00,$00,$00,$00,$00,$00
#_03D93E: db $00,$00,$06,$06,$06,$06,$06,$06
#_03D946: db $00,$00,$02,$02,$02,$04,$04,$04
#_03D94E: db $06,$06,$06,$00,$00,$00

;===================================================================================================

ROUTINE_03D954:
#_03D954: TYX

#_03D955: LDA.w #$0092
#_03D958: STA.w $0810,X
#_03D95B: RTS

;===================================================================================================

ROUTINE_03D95C:
#_03D95C: TYX

#_03D95D: LDA.w $04D0
#_03D960: BNE CODE_03D9AE

#_03D962: LDA.l $7E7A26
#_03D966: BNE CODE_03D9AE

#_03D968: LDA.w $05CE
#_03D96B: CMP.w #$0046
#_03D96E: BEQ CODE_03D9AE

#_03D970: CMP.w #$004E
#_03D973: BEQ CODE_03D9AE

#_03D975: CMP.w #$00A6
#_03D978: BEQ CODE_03D9AE

#_03D97A: CMP.w #$00AE
#_03D97D: BEQ CODE_03D9AE

#_03D97F: LDY.w $081E,X
#_03D982: LDA.w $0180,Y
#_03D985: BEQ CODE_03D9AE

#_03D987: LDA.w $0280,Y
#_03D98A: STA.w $080C,X

#_03D98D: LDA.w $02C0,Y
#_03D990: STA.w $080E,X

#_03D993: LDA.w $0240,Y
#_03D996: STA.w $080A,X
#_03D999: JSR ROUTINE_0392C0

#_03D99C: LDA.w #$FC00
#_03D99F: LDY.w #$301C
#_03D9A2: JSR ROUTINE_038CAA

#_03D9A5: LDA.w #$004C
#_03D9A8: STA.w $0806,X
#_03D9AB: JMP ROUTINE_038874

CODE_03D9AE:
#_03D9AE: JMP ROUTINE_038C85

;===================================================================================================

ROUTINE_03D9B1:
#_03D9B1: TYX
#_03D9B2: JSR Reset_0818_through_081F

#_03D9B5: LDA.w #$0028
#_03D9B8: STA.w $0810,X
#_03D9BB: RTS

;===================================================================================================

ROUTINE_03D9BC:
#_03D9BC: TYX

#_03D9BD: LDA.w #$0101
#_03D9C0: JSR ROUTINE_038CDF
#_03D9C3: BNE CODE_03D9CB

#_03D9C5: LDA.w #$002A
#_03D9C8: STA.w $0810,X

CODE_03D9CB:
#_03D9CB: JMP ROUTINE_0386A8

;===================================================================================================

ROUTINE_03D9CE:
#_03D9CE: TYX
#_03D9CF: JMP ROUTINE_038C84

;===================================================================================================

ROUTINE_03D9D2:
#_03D9D2: TYX
#_03D9D3: JSR Reset_0818_through_081F
#_03D9D6: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03D9D9:
#_03D9D9: TYX

#_03D9DA: LDA.w #$0102
#_03D9DD: JSR ROUTINE_038CDF
#_03D9E0: BNE CODE_03D9E5

#_03D9E2: JMP ROUTINE_038C85

CODE_03D9E5:
#_03D9E5: JSR ROUTINE_038AA3
#_03D9E8: JMP ROUTINE_0386A8

;===================================================================================================

ROUTINE_03D9EB:
#_03D9EB: TYX
#_03D9EC: JSR Reset_0818_through_081F
#_03D9EF: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03D9F2:
#_03D9F2: TYX

#_03D9F3: LDA.w #$0102
#_03D9F6: JSR ROUTINE_038CDF
#_03D9F9: BNE CODE_03D9FE

#_03D9FB: JMP AdvanceAIModeUp

CODE_03D9FE:
#_03D9FE: JMP ROUTINE_0386A8

;===================================================================================================

ROUTINE_03DA01:
#_03DA01: TYX
#_03DA02: JMP ROUTINE_038C84

;===================================================================================================

ROUTINE_03DA05:
#_03DA05: TYX
#_03DA06: STZ.w $0812,X
#_03DA09: STZ.w $0814,X
#_03DA0C: STZ.w $0806,X
#_03DA0F: STZ.w $0808,X
#_03DA12: JSR ROUTINE_0392C0

#_03DA15: LDA.w #$0050
#_03DA18: STA.w $0816,X

#_03DA1B: LDA.w #$0011
#_03DA1E: STA.w $04A6
#_03DA21: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03DA24:
#_03DA24: TYX
#_03DA25: JSR ROUTINE_038632
#_03DA28: BCC CODE_03DA2B

#_03DA2A: RTS

CODE_03DA2B:
#_03DA2B: JSR ROUTINE_03DB19
#_03DA2E: CPY.w #$0012
#_03DA31: BCC CODE_03DA44

#_03DA33: CPY.w #$0016
#_03DA36: BCC CODE_03DA3E

#_03DA38: JSR AdvanceAIModeUp

CODE_03DA3B:
#_03DA3B: LDY.w #$0016

CODE_03DA3E:
#_03DA3E: LDA.w #$FFFF
#_03DA41: STA.w $0808,X

CODE_03DA44:
#_03DA44: LDA.w UNREACH_03DA68,Y
#_03DA47: STA.w $0814,X

#_03DA4A: LDA.w $0808,X
#_03DA4D: BNE CODE_03DA52

#_03DA4F: LDA.w $0812,X

CODE_03DA52:
#_03DA52: LDY.w $199E
#_03DA55: STA.w $1A00,Y

#_03DA58: LDA.w #$FFFF
#_03DA5B: STA.w $0806,X
#_03DA5E: TXA
#_03DA5F: STA.w $1A50,Y
#_03DA62: INY
#_03DA63: INY
#_03DA64: STY.w $199E
#_03DA67: RTS

UNREACH_03DA68:
#_03DA68: db $12,$DB,$D2,$DA,$8A,$DA,$3E,$DA
#_03DA70: db $F2,$D9,$A6,$D9,$5A,$D9,$0E,$D9
#_03DA78: db $C2,$D8,$76,$D8,$2A,$D8,$DE,$D7

;===================================================================================================

ROUTINE_03DA80:
#_03DA80: TYX
#_03DA81: JSR ROUTINE_038632
#_03DA84: BCS CODE_03DA8E

#_03DA86: LDA.w $0806,X
#_03DA89: BEQ CODE_03DA8E

#_03DA8B: JMP CODE_03DA3B

CODE_03DA8E:
#_03DA8E: JMP ROUTINE_038C85

;===================================================================================================

ROUTINE_03DA91:
#_03DA91: TYX
#_03DA92: STZ.w $0812,X
#_03DA95: STZ.w $0814,X
#_03DA98: STZ.w $0806,X
#_03DA9B: STZ.w $0808,X
#_03DA9E: JSR ROUTINE_0392C0

#_03DAA1: LDA.w #$0050
#_03DAA4: STA.w $0816,X
#_03DAA7: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03DAAA:
#_03DAAA: TYX
#_03DAAB: JSR ROUTINE_038632
#_03DAAE: BCC CODE_03DAB1

#_03DAB0: RTS

CODE_03DAB1:
#_03DAB1: JSR ROUTINE_03DB19
#_03DAB4: CPY.w #$0014
#_03DAB7: BCC CODE_03DACD

#_03DAB9: CPY.w #$001E
#_03DABC: BCC CODE_03DAC7

#_03DABE: LDA.w #$00DA
#_03DAC1: STA.w $0810,X

CODE_03DAC4:
#_03DAC4: LDY.w #$001E

CODE_03DAC7:
#_03DAC7: LDA.w #$FFFF
#_03DACA: STA.w $0808,X

CODE_03DACD:
#_03DACD: LDA.w UNREACH_03DAF9,Y
#_03DAD0: STA.w $0814,X

#_03DAD3: LDA.w $0808,X
#_03DAD6: BNE ROUTINE_03DADB

#_03DAD8: LDA.w $0812,X

;===================================================================================================

ROUTINE_03DADB:
#_03DADB: LDY.w $199E
#_03DADE: STA.w $1A00,Y

#_03DAE1: LDA.w #$FFFF
#_03DAE4: STA.w $0806,X
#_03DAE7: TXA
#_03DAE8: STA.w $1A50,Y
#_03DAEB: INY
#_03DAEC: INY
#_03DAED: STY.w $199E
#_03DAF0: RTS

;===================================================================================================

ROUTINE_03DADB_long:
#_03DAF1: PHB
#_03DAF2: PHK
#_03DAF3: PLB
#_03DAF4: JSR ROUTINE_03DADB
#_03DAF7: PLB
#_03DAF8: RTL

UNREACH_03DAF9:
#_03DAF9: db $4E,$DB,$6A,$DB,$86,$DB,$A2,$DB
#_03DB01: db $A2,$DB,$A2,$DB,$A2,$DB,$A2,$DB
#_03DB09: db $A2,$DB,$A2,$DB,$A2,$DB,$A2,$DB
#_03DB11: db $A2,$DB,$A2,$DB,$A2,$DB,$92,$DC

;===================================================================================================

ROUTINE_03DB19:
#_03DB19: LDA.w $0806,X
#_03DB1C: BNE CODE_03DB2A

#_03DB1E: CLC

#_03DB1F: LDA.w $0812,X
#_03DB22: ADC.w $0816,X
#_03DB25: BCS CODE_03DB2A

#_03DB27: STA.w $0812,X

CODE_03DB2A:
#_03DB2A: LDA.w $0812,X
#_03DB2D: SEP #$20
#_03DB2F: XBA
#_03DB30: REP #$20
#_03DB32: AND.w #$00FF
#_03DB35: ASL A
#_03DB36: TAY
#_03DB37: RTS

;===================================================================================================

ROUTINE_03DB38:
#_03DB38: TYX
#_03DB39: JSR ROUTINE_038632
#_03DB3C: BCS .exit

#_03DB3E: LDA.w $0806,X
#_03DB41: BEQ CODE_03DB46

#_03DB43: JMP CODE_03DAC4

CODE_03DB46:
#_03DB46: JMP ROUTINE_038C85

.exit
#_03DB49: RTS

;===================================================================================================

ROUTINE_03DB4A:
#_03DB4A: JMP ROUTINE_03DA91

;===================================================================================================

ROUTINE_03DB4D:
#_03DB4D: TYX

;===================================================================================================

ROUTINE_03DB4E:
#_03DB4E: JSR ROUTINE_038632
#_03DB51: BCC CODE_03DB54

#_03DB53: RTS

CODE_03DB54:
#_03DB54: JSR ROUTINE_03DB6C
#_03DB57: JSL ROUTINE_09FD2D

#_03DB5B: LDA.w $0808,X
#_03DB5E: BNE CODE_03DB63

#_03DB60: LDA.w $0812,X

CODE_03DB63:
#_03DB63: JMP ROUTINE_03DADB

;===================================================================================================

ROUTINE_03DB66:
#_03DB66: JMP ROUTINE_03DB38

;===================================================================================================

ROUTINE_03DB69:
#_03DB69: JMP ROUTINE_03DA91

;===================================================================================================

ROUTINE_03DB6C:
#_03DB6C: JSR ROUTINE_03DB19
#_03DB6F: CPY.w #$0014
#_03DB72: BCC .exit

#_03DB74: CPY.w #$001E
#_03DB77: BCC CODE_03DB82

#_03DB79: LDA.w #$00E0
#_03DB7C: STA.w $0810,X

#_03DB7F: LDY.w #$001E

CODE_03DB82:
#_03DB82: LDA.w #$FFFF
#_03DB85: STA.w $0808,X

.exit
#_03DB88: RTS

;===================================================================================================

ROUTINE_03DB89:
#_03DB89: TYX
#_03DB8A: JSR ROUTINE_038632
#_03DB8D: BCC CODE_03DB90

#_03DB8F: RTS

CODE_03DB90:
#_03DB90: JSR ROUTINE_03DB6C

#_03DB93: LDA.w UNREACH_03DBA4,Y
#_03DB96: STA.w $0814,X

#_03DB99: LDA.w $0808,X
#_03DB9C: BNE CODE_03DBA1

#_03DB9E: LDA.w $0812,X

CODE_03DBA1:
#_03DBA1: JMP ROUTINE_03DADB

UNREACH_03DBA4:
#_03DBA4: db $2E,$DC,$2E,$DC,$2E,$DC,$2E,$DC
#_03DBAC: db $2E,$DC,$2E,$DC,$2E,$DC,$2E,$DC
#_03DBB4: db $2E,$DC,$2E,$DC,$2E,$DC,$2E,$DC
#_03DBBC: db $2E,$DC

UNREACH_03DBBE:
#_03DBBE: db $2E,$DC,$2E,$DC,$B2,$DC

;===================================================================================================

ROUTINE_03DBC4:
#_03DBC4: JMP ROUTINE_03DB38

;===================================================================================================

ROUTINE_03DBC7:
#_03DBC7: LDA.l $7E7A48
#_03DBCB: BNE .exit

#_03DBCD: JMP ROUTINE_03DA91

.exit
#_03DBD0: RTS

;===================================================================================================

ROUTINE_03DBD1:
#_03DBD1: TYX
#_03DBD2: JSR ROUTINE_038632
#_03DBD5: BCC CODE_03DBD8

#_03DBD7: RTS

CODE_03DBD8:
#_03DBD8: JSR ROUTINE_03DB6C
#_03DBDB: JSL ROUTINE_09FD02

#_03DBDF: LDA.w $0808,X
#_03DBE2: BNE CODE_03DBE7

#_03DBE4: LDA.w $0812,X

CODE_03DBE7:
#_03DBE7: JMP ROUTINE_03DADB

;===================================================================================================

ROUTINE_03DBEA:
#_03DBEA: JMP ROUTINE_03DB38

;===================================================================================================

ROUTINE_03DBED:
#_03DBED: JSR ROUTINE_03DA91

#_03DBF0: LDA.w #$0080
#_03DBF3: STA.w $0816,X

;===================================================================================================

ROUTINE_03DBF6:
#_03DBF6: RTS

;===================================================================================================

ROUTINE_03DBF7:
#_03DBF7: TYX
#_03DBF8: JSR ROUTINE_038632
#_03DBFB: BCC CODE_03DBFE

#_03DBFD: RTS

CODE_03DBFE:
#_03DBFE: JSR ROUTINE_03DB19
#_03DC01: CPY.w #$0018
#_03DC04: BCC CODE_03DC0C

#_03DC06: JSR AdvanceAIModeUp

CODE_03DC09:
#_03DC09: LDY.w #$0018

CODE_03DC0C:
#_03DC0C: LDA.w #$FFFF
#_03DC0F: STA.w $0808,X

;===================================================================================================

ROUTINE_03DC12:
#_03DC12: LDA.w UNREACH_03DC23,Y
#_03DC15: STA.w $0814,X

#_03DC18: LDA.w $0808,X
#_03DC1B: BNE CODE_03DC20

#_03DC1D: LDA.w $0812,X

CODE_03DC20:
#_03DC20: JMP ROUTINE_03DADB

UNREACH_03DC23:
#_03DC23: db $CE,$DC,$E6,$DC,$FE,$DC,$16,$DD
#_03DC2B: db $2E,$DD,$3E,$DD,$4E,$DD,$5E,$DD
#_03DC33: db $6E,$DD,$7E,$DD,$8E,$DD,$9E,$DD
#_03DC3B: db $AE,$DD,$D6,$DD,$C2,$DF,$D2,$DF
#_03DC43: db $12,$E0,$22,$E0,$32,$E0,$22,$E0
#_03DC4B: db $D6,$E0,$E6,$E0,$F6,$E0,$86,$E1
#_03DC53: db $96,$E1,$B6,$E1,$C6,$E1,$0E,$E2
#_03DC5B: db $22,$DF,$B2,$DF

;===================================================================================================

ROUTINE_03DC5F:
#_03DC5F: TYX
#_03DC60: JSR ROUTINE_038632
#_03DC63: BCS .exit

#_03DC65: LDA.w $0806,X
#_03DC68: BEQ CODE_03DC6D

#_03DC6A: JMP CODE_03DC09

CODE_03DC6D:
#_03DC6D: JMP ROUTINE_038C85

.exit
#_03DC70: RTS

;===================================================================================================

ROUTINE_03DC71:
#_03DC71: JMP ROUTINE_03DA91

;===================================================================================================

ROUTINE_03DC74:
#_03DC74: TYX
#_03DC75: JSR ROUTINE_038632
#_03DC78: BCC CODE_03DC7B

#_03DC7A: RTS

CODE_03DC7B:
#_03DC7B: JSR AdvanceAIModeUp

CODE_03DC7E:
#_03DC7E: LDY.w #$001A
#_03DC81: JMP CODE_03DC0C

;===================================================================================================

ROUTINE_03DC84:
#_03DC84: TYX
#_03DC85: JSR ROUTINE_038632
#_03DC88: BCS .exit

#_03DC8A: LDA.w $0806,X
#_03DC8D: BEQ CODE_03DC92

#_03DC8F: JMP CODE_03DC7E

CODE_03DC92:
#_03DC92: JMP ROUTINE_038C85

.exit
#_03DC95: RTS

;===================================================================================================

ROUTINE_03DC96:
#_03DC96: JSR ROUTINE_03DA91

#_03DC99: LDA.w #$0004
#_03DC9C: STA.w $0816,X
#_03DC9F: RTS

;===================================================================================================

ROUTINE_03DCA0:
#_03DCA0: TYX
#_03DCA1: JSR ROUTINE_038632
#_03DCA4: BCC CODE_03DCA7

#_03DCA6: RTS

CODE_03DCA7:
#_03DCA7: JSR ROUTINE_03DB19
#_03DCAA: CPY.w #$0004
#_03DCAD: BCC CODE_03DCB5

#_03DCAF: JSR AdvanceAIModeUp

CODE_03DCB2:
#_03DCB2: LDY.w #$0004

CODE_03DCB5:
#_03DCB5: LDA.w #$FFFF
#_03DCB8: STA.w $0808,X

#_03DCBB: LDA.w UNREACH_03DCCC,Y
#_03DCBE: STA.w $0814,X

#_03DCC1: LDA.w $0808,X
#_03DCC4: BNE CODE_03DCC9

#_03DCC6: LDA.w $0812,X

CODE_03DCC9:
#_03DCC9: JMP ROUTINE_03DADB

UNREACH_03DCCC:
#_03DCCC: db $7E,$DE,$7E,$DE,$8E,$DE

;===================================================================================================

ROUTINE_03DCD2:
#_03DCD2: TYX
#_03DCD3: JSR ROUTINE_038632
#_03DCD6: BCS .exit

#_03DCD8: LDA.w $0806,X
#_03DCDB: BEQ CODE_03DCE0

#_03DCDD: JMP CODE_03DCB2

CODE_03DCE0:
#_03DCE0: JMP ROUTINE_038C85

.exit
#_03DCE3: RTS

;===================================================================================================

ROUTINE_03DCE4:
#_03DCE4: JSR ROUTINE_03DA91

#_03DCE7: LDA.w $080A,X
#_03DCEA: STA.w $0818,X
#_03DCED: STZ.w $080A,X
#_03DCF0: RTS

;===================================================================================================

ROUTINE_03DCF1:
#_03DCF1: TYX
#_03DCF2: JSR ROUTINE_038632
#_03DCF5: BCC CODE_03DCF8

#_03DCF7: RTS

CODE_03DCF8:
#_03DCF8: JSR AdvanceAIModeUp

;===================================================================================================

ROUTINE_03DCFB:
#_03DCFB: LDY.w $0818,X
#_03DCFE: JMP CODE_03DC0C

;===================================================================================================

ROUTINE_03DD01:
#_03DD01: TYX
#_03DD02: JSR ROUTINE_038632
#_03DD05: BCS .exit

#_03DD07: LDA.w $0806,X
#_03DD0A: BEQ CODE_03DD0F

#_03DD0C: JMP ROUTINE_03DCFB

CODE_03DD0F:
#_03DD0F: LDA.w #$00C0
#_03DD12: TRB.w $0536
#_03DD15: JMP ROUTINE_038C85

.exit
#_03DD18: RTS

;===================================================================================================

ROUTINE_03DD19:
#_03DD19: JSR ROUTINE_03DCE4

#_03DD1C: LDA.w $080E,X
#_03DD1F: STA.w $081A,X
#_03DD22: SBC.w #$0080
#_03DD25: STA.w $080E,X
#_03DD28: RTS

;===================================================================================================

ROUTINE_03DD29:
#_03DD29: TYX
#_03DD2A: JSR ROUTINE_038632
#_03DD2D: BCC CODE_03DD30

#_03DD2F: RTS

CODE_03DD30:
#_03DD30: JSR ROUTINE_0392C0
#_03DD33: CLC

#_03DD34: LDA.w $080E,X
#_03DD37: ADC.w #$0080
#_03DD3A: AND.w #$FF80
#_03DD3D: CMP.w $081A,X
#_03DD40: BCC CODE_03DD53

#_03DD42: LDA.w $05CE
#_03DD45: CMP.w #$0106
#_03DD48: BNE CODE_03DD56

#_03DD4A: JSR AdvanceAIModeUp

#_03DD4D: LDA.w $081A,X
#_03DD50: STZ.w $081A,X

CODE_03DD53:
#_03DD53: STA.w $080E,X

CODE_03DD56:
#_03DD56: JMP ROUTINE_03DCFB

;===================================================================================================

ROUTINE_03DD59:
#_03DD59: TYX
#_03DD5A: JSR ROUTINE_038632
#_03DD5D: BCS .exit

#_03DD5F: LDA.w $0806,X
#_03DD62: BEQ CODE_03DD67

#_03DD64: JMP ROUTINE_03DCFB

CODE_03DD67:
#_03DD67: JMP ROUTINE_038C85

.exit
#_03DD6A: RTS

;===================================================================================================

ROUTINE_03DD6B:
#_03DD6B: TYX
#_03DD6C: JSR ROUTINE_03DA91

#_03DD6F: LDA.w $080A,X
#_03DD72: AND.w #$00FF
#_03DD75: STA.w $0818,X

#_03DD78: LDA.w $080B,X
#_03DD7B: AND.w #$00FF
#_03DD7E: STA.w $081A,X
#_03DD81: STZ.w $080A,X
#_03DD84: STZ.w $081E,X

#_03DD87: LDA.w $080C,X
#_03DD8A: AND.w #$FF80
#_03DD8D: STA.w $080C,X
#_03DD90: STA.b $20

#_03DD92: LDA.w $080E,X
#_03DD95: STA.w $081C,X
#_03DD98: STA.b $22
#_03DD9A: STZ.w $0816,X

#_03DD9D: LDA.w #$0120
#_03DDA0: STA.b $26
#_03DDA2: STX.b $30

#_03DDA4: LDA.w #$000C
#_03DDA7: STA.b $24
#_03DDA9: JSR PrepEnemySpawn

#_03DDAC: LDA.w #$0100
#_03DDAF: STA.w $0518
#_03DDB2: RTS

;===================================================================================================

ROUTINE_03DDB3:
#_03DDB3: LDA.l $7E7A48
#_03DDB7: BEQ .exit

#_03DDB9: AND.w #$7FFF
#_03DDBC: STA.l $7E7A48

.exit
#_03DDC0: RTS

;===================================================================================================

ROUTINE_03DDC1:
#_03DDC1: TYX
#_03DDC2: JSR ROUTINE_038632
#_03DDC5: BCC CODE_03DDC8

#_03DDC7: RTS

CODE_03DDC8:
#_03DDC8: LDA.w $0562
#_03DDCB: STA.w $080E,X
#_03DDCE: JSR ROUTINE_0392C0
#_03DDD1: JSR ROUTINE_03DDD5
#_03DDD4: RTS

;===================================================================================================

ROUTINE_03DDD5:
#_03DDD5: STZ.w $0806,X
#_03DDD8: JSR ROUTINE_03DDB3
#_03DDDB: BEQ CODE_03DDE8

#_03DDDD: LDA.w #$00FF
#_03DDE0: CMP.w $081E,X
#_03DDE3: BCC CODE_03DDE8

#_03DDE5: STA.w $081E,X

CODE_03DDE8:
#_03DDE8: LDA.w $05CE
#_03DDEB: CMP.w #$010C
#_03DDEE: BEQ CODE_03DE3C

#_03DDF0: CMP.w #$0112
#_03DDF3: BEQ CODE_03DE30

#_03DDF5: CMP.w #$010E
#_03DDF8: BNE ROUTINE_03DE51

#_03DDFA: INC.w $081E,X

#_03DDFD: LDA.w $081E,X
#_03DE00: CMP.w #$0140
#_03DE03: BCS CODE_03DE29

#_03DE05: CMP.w #$0100
#_03DE08: BCC CODE_03DE1E

#_03DE0A: STZ.w $0806,X
#_03DE0D: SEC

#_03DE0E: LDA.w $081C,X
#_03DE11: SBC.w #$0100
#_03DE14: STA.w $081C,X
#_03DE17: CMP.w $0562
#_03DE1A: BCS ROUTINE_03DE51

#_03DE1C: BRA CODE_03DE29

CODE_03DE1E:
#_03DE1E: LDA.w $081A,X
#_03DE21: ORA.w #$3000
#_03DE24: STA.w $0806,X
#_03DE27: BRA ROUTINE_03DE51

CODE_03DE29:
#_03DE29: INC.w $05CE
#_03DE2C: INC.w $05CE
#_03DE2F: RTS

CODE_03DE30:
#_03DE30: JSR AdvanceAIModeUp
#_03DE33: INC.w $0818,X
#_03DE36: INC.w $0818,X
#_03DE39: JMP ROUTINE_03DCFB

CODE_03DE3C:
#_03DE3C: LDA.w #$0100
#_03DE3F: STA.w $0518
#_03DE42: STA.w $056E

#_03DE45: LDA.w #$010E
#_03DE48: STA.w $05CE
#_03DE4B: JSR ROUTINE_03DE51
#_03DE4E: JMP ROUTINE_03DCFB

;===================================================================================================

ROUTINE_03DE51:
#_03DE51: CLC

#_03DE52: LDA.w $0816,X
#_03DE55: ADC.w #$0008
#_03DE58: STA.w $0816,X
#_03DE5B: AND.w #$00FF
#_03DE5E: JMP CODE_03DE81

#data03DE61:
#_03DE61: db $04,$00,$24,$05,$00,$17,$00,$00
#_03DE69: db $00,$02,$00,$30,$21,$00,$02,$00
#_03DE71: db $01,$00,$09,$21,$00,$29,$00,$00

;===================================================================================================

ROUTINE_03DE88_long:
#_03DE79: PHB
#_03DE7A: PHK
#_03DE7B: PLB
#_03DE7C: JSR ROUTINE_03DE88
#_03DE7F: PLB
#_03DE80: RTL

CODE_03DE81:
#_03DE81: PHA

#_03DE82: LDA.w $081C,X
#_03DE85: STA.b $20
#_03DE87: PLA

;===================================================================================================

ROUTINE_03DE88:
#_03DE88: STA.w $04D2

#_03DE8B: LDA.w #$0000
#_03DE8E: STA.w $0490
#_03DE91: STA.w $0492
#_03DE94: STA.w $0494
#_03DE97: SEC

#_03DE98: LDA.b $20
#_03DE9A: SBC.w $0562
#_03DE9D: LSR A
#_03DE9E: LSR A
#_03DE9F: LSR A
#_03DEA0: LSR A
#_03DEA1: CMP.w #$0800
#_03DEA4: BCC CODE_03DEA9

#_03DEA6: ORA.w #$F000

CODE_03DEA9:
#_03DEA9: TAY
#_03DEAA: BMI CODE_03DEB0

#_03DEAC: BEQ CODE_03DEB0

#_03DEAE: BRA CODE_03DED1

CODE_03DEB0:
#_03DEB0: CLC

#_03DEB1: LDA.w #$0100

;===================================================================================================

ROUTINE_03DEB4:
#_03DEB4: STA.w $0490
#_03DEB7: STA.w $0492
#_03DEBA: STA.w $0494
#_03DEBD: SEP #$20

#_03DEBF: LDA.b #$7F
#_03DEC1: STA.w $0480

#_03DEC4: LDA.b #$6F
#_03DEC6: STA.w $0483

#_03DEC9: LDA.b #$00
#_03DECB: STA.w $0486
#_03DECE: REP #$20
#_03DED0: RTS

CODE_03DED1:
#_03DED1: CMP.w #$0080
#_03DED4: BCS CODE_03DEFE

#_03DED6: CMP.w #$0009
#_03DED9: BCC CODE_03DEB0

#_03DEDB: PHA

#_03DEDC: LDA.w #$0100
#_03DEDF: STA.w $0492
#_03DEE2: STA.w $0494
#_03DEE5: PLA
#_03DEE6: SEP #$20
#_03DEE8: PHA
#_03DEE9: SEC
#_03DEEA: SBC.b #$70
#_03DEEC: EOR.b #$FF
#_03DEEE: INC A
#_03DEEF: STA.w $0486

#_03DEF2: LDA.b #$7F
#_03DEF4: STA.w $0483
#_03DEF7: PLA
#_03DEF8: STA.w $0480
#_03DEFB: REP #$20
#_03DEFD: RTS

CODE_03DEFE:
#_03DEFE: SEC
#_03DEFF: SBC.w #$007F
#_03DF02: CMP.w #$007F
#_03DF05: BCC CODE_03DF19

#_03DF07: SEP #$20

#_03DF09: LDA.b #$7F
#_03DF0B: STA.w $0480
#_03DF0E: STA.w $0483

#_03DF11: LDA.b #$00
#_03DF13: STA.w $0486
#_03DF16: REP #$20
#_03DF18: RTS

CODE_03DF19:
#_03DF19: PHA
#_03DF1A: CLC

#_03DF1B: LDA.w #$0100
#_03DF1E: STA.w $0494
#_03DF21: PLA
#_03DF22: SEP #$20
#_03DF24: INC A
#_03DF25: STA.w $0483

#_03DF28: LDA.b #$7F
#_03DF2A: STA.w $0480
#_03DF2D: STA.w $0486
#_03DF30: REP #$20
#_03DF32: RTS

;===================================================================================================

ROUTINE_03DF33:
#_03DF33: TYX
#_03DF34: JSR ROUTINE_038632
#_03DF37: BCS .exit

#_03DF39: LDA.w $0806,X
#_03DF3C: BEQ CODE_03DF41

#_03DF3E: JMP ROUTINE_03DCFB

CODE_03DF41:
#_03DF41: STZ.w $0518

#_03DF44: LDA.w #$0000
#_03DF47: STA.l $7EE000
#_03DF4B: STA.w $04D2
#_03DF4E: INC A
#_03DF4F: STA.w $056E
#_03DF52: JSR ROUTINE_03DEB4
#_03DF55: PHX

#_03DF56: LDX.w #data03DE61
#_03DF59: JSR ROUTINE_038BE0
#_03DF5C: INC.w $054E
#_03DF5F: PLX
#_03DF60: JSR ROUTINE_03E20C

#_03DF63: LDA.w #$00C0
#_03DF66: TRB.w $0536
#_03DF69: JMP ROUTINE_038C85

.exit
#_03DF6C: RTS

;===================================================================================================

ROUTINE_03DF6D:
#_03DF6D: TYX
#_03DF6E: JSL ROUTINE_08D367

#_03DF72: LDA.w $080A,X
#_03DF75: STA.w $0816,X

#_03DF78: LDA.w #$FF00
#_03DF7B: STA.w $080A,X
#_03DF7E: JSR ROUTINE_0392C0
#_03DF81: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03DF84:
#_03DF84: TYX

#_03DF85: LDA.w $05A0
#_03DF88: AND.w #$0007
#_03DF8B: BNE CODE_03DFAF

#_03DF8D: JSR Random
#_03DF90: AND.w #$02F0
#_03DF93: SBC.w #$0180
#_03DF96: ADC.w $05E6
#_03DF99: STA.b $20

#_03DF9B: LDA.w $05E8
#_03DF9E: STA.b $22

#_03DFA0: LDA.w #$0126
#_03DFA3: STA.b $26
#_03DFA5: STX.b $30

#_03DFA7: LDA.w #$000C
#_03DFAA: STA.b $24
#_03DFAC: JSR PrepEnemySpawn

CODE_03DFAF:
#_03DFAF: JSR ROUTINE_0392D5

#_03DFB2: LDY.w $0816,X
#_03DFB5: LDA.w $081E,Y
#_03DFB8: STA.w $081E,X
#_03DFBB: CMP.w #$0100
#_03DFBE: BCS CODE_03DFC5

#_03DFC0: LDA.w $0800,Y
#_03DFC3: BNE CODE_03DFCD

CODE_03DFC5:
#_03DFC5: JSR ROUTINE_038C85
#_03DFC8: JSL ROUTINE_08D35F
#_03DFCC: RTS

CODE_03DFCD:
#_03DFCD: LDA.w $0806,Y
#_03DFD0: BEQ .exit

#_03DFD2: STA.w $0808,X
#_03DFD5: CMP.w #$30DA
#_03DFD8: BEQ CODE_03DFDF

#_03DFDA: CMP.w #$30DC
#_03DFDD: BNE .exit

CODE_03DFDF:
#_03DFDF: JSR ROUTINE_038CBD

.exit
#_03DFE2: RTS

UNREACH_03DFE3:
#_03DFE3: db $02,$00,$00,$00,$00,$00,$80,$01
#_03DFEB: db $00,$00,$00,$00,$00,$00,$80,$01
#_03DFF3: db $80,$00

;===================================================================================================

ROUTINE_03DFF5:
#_03DFF5: TYX
#_03DFF6: JSR Reset_0818_through_081F

#_03DFF9: LDA.w $080A,X
#_03DFFC: STA.w $0816,X
#_03DFFF: STZ.w $080A,X

#_03E002: LDA.w #$3000
#_03E005: STA.w $0808,X
#_03E008: JSR ROUTINE_0392C0
#_03E00B: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03E00E:
#_03E00E: TYX

#_03E00F: LDY.w $0816,X
#_03E012: LDA.w $0808,Y
#_03E015: BNE CODE_03E01A

CODE_03E017:
#_03E017: JMP ROUTINE_038C85

CODE_03E01A:
#_03E01A: AND.w #$00FF
#_03E01D: CMP.w #$00DA
#_03E020: BNE CODE_03E02D

#_03E022: LDA.w #$FFE0
#_03E025: STA.w $081C,X

#_03E028: LDA.w #$0008
#_03E02B: BRA CODE_03E036

CODE_03E02D:
#_03E02D: LDA.w #$FFC0
#_03E030: STA.w $081C,X

#_03E033: LDA.w #$0000

CODE_03E036:
#_03E036: STA.b $20

#_03E038: LDA.w $05A0
#_03E03B: LSR A
#_03E03C: AND.w #$0006
#_03E03F: CLC
#_03E040: ADC.b $20
#_03E042: TAY

#_03E043: LDA.w UNREACH_03E074,Y
#_03E046: STA.w $0806,X

#_03E049: LDY.w $0816,X
#_03E04C: LDA.w $081E,Y
#_03E04F: CMP.w #$0400
#_03E052: BCS CODE_03E017

#_03E054: CMP.w #$03C0

#_03E057: LDA.w $081C,X
#_03E05A: BCC CODE_03E060

#_03E05C: LDA.w #$FF00
#_03E05F: CLC

CODE_03E060:
#_03E060: ADC.w $080A,X
#_03E063: STA.w $080A,X
#_03E066: JSR ROUTINE_0392D5

#_03E069: LDA.w $0804,X
#_03E06C: BPL CODE_03E071

#_03E06E: JMP ROUTINE_038C85

CODE_03E071:
#_03E071: JMP ROUTINE_038874

UNREACH_03E074:
#_03E074: db $CE,$00,$D0,$00,$D2,$00,$D4,$00
#_03E07C: db $D6,$00,$D8,$00,$D7,$00,$D9,$00

;===================================================================================================

ROUTINE_03E084:
#_03E084: TYX
#_03E085: JSR ROUTINE_03DA91

#_03E088: LDA.w $080A,X
#_03E08B: AND.w #$00FF
#_03E08E: STA.w $0818,X
#_03E091: STZ.w $081E,X

#_03E094: LDA.w #$FFFF
#_03E097: STA.w $0816,X

#_03E09A: LDA.w $080C,X
#_03E09D: AND.w #$FF80
#_03E0A0: STA.w $080C,X
#_03E0A3: STA.b $20

#_03E0A5: LDA.w $080E,X
#_03E0A8: STA.b $22
#_03E0AA: SEC
#_03E0AB: SBC.w $0562
#_03E0AE: STA.w $080A,X

#_03E0B1: LDA.w $0562
#_03E0B4: STA.w $081A,X
#_03E0B7: JSR ROUTINE_03E0CD
#_03E0BA: JSR CacheMyCoordinatesIn20

#_03E0BD: LDA.w #$0130
#_03E0C0: STA.b $26
#_03E0C2: STX.b $30

#_03E0C4: LDA.w #$000C
#_03E0C7: STA.b $24
#_03E0C9: JSR PrepEnemySpawn
#_03E0CC: RTS

;===================================================================================================

ROUTINE_03E0CD:
#_03E0CD: STZ.w $054C
#_03E0D0: CLC

#_03E0D1: LDA.w #$0100
#_03E0D4: STA.w $04D2
#_03E0D7: STA.w $081C,X
#_03E0DA: STA.w $051A
#_03E0DD: STA.w $056E
#_03E0E0: JMP ROUTINE_03DCFB

;===================================================================================================

ROUTINE_03E0E3:
#_03E0E3: INC.w $05CE
#_03E0E6: INC.w $05CE
#_03E0E9: RTS

;===================================================================================================

ROUTINE_03E0EA:
#_03E0EA: TYX
#_03E0EB: JSR ROUTINE_038632
#_03E0EE: BCC CODE_03E0F1

#_03E0F0: RTS

CODE_03E0F1:
#_03E0F1: INC.w $054C

#_03E0F4: LDA.w $054C
#_03E0F7: CMP.w #$0006
#_03E0FA: BCS CODE_03E0FF

#_03E0FC: JSR ROUTINE_03DCFB

CODE_03E0FF:
#_03E0FF: JSR ROUTINE_03DDB3
#_03E102: BEQ CODE_03E10A

#_03E104: LDA.w #$011A
#_03E107: STA.w $05CE

CODE_03E10A:
#_03E10A: LDA.w $05CE
#_03E10D: CMP.w #$0116
#_03E110: BEQ CODE_03E158

#_03E112: CMP.w #$0118
#_03E115: BEQ CODE_03E144

#_03E117: CMP.w #$011A
#_03E11A: BEQ CODE_03E132

#_03E11C: RTS

CODE_03E11D:
#_03E11D: JSR ROUTINE_03E0E3
#_03E120: JSR AdvanceAIModeUp

#_03E123: LDA.w #$0013
#_03E126: STA.w $0524

#_03E129: LDA.w #$002A
#_03E12C: STA.w $0818,X
#_03E12F: JMP ROUTINE_03DCFB

CODE_03E132:
#_03E132: CLC

#_03E133: LDA.w $081C,X
#_03E136: ADC.w #$0010
#_03E139: CMP.w #$0100
#_03E13C: BEQ CODE_03E11D

#_03E13E: STA.w $081C,X
#_03E141: JMP CODE_03E179

CODE_03E144:
#_03E144: JSR ROUTINE_03E1BB
#_03E147: INC.w $081E,X

#_03E14A: LDA.w $081E,X
#_03E14D: CMP.w #$0100
#_03E150: BCC CODE_03E155

#_03E152: JSR ROUTINE_03E0E3

CODE_03E155:
#_03E155: JMP CODE_03E179

CODE_03E158:
#_03E158: SEC

#_03E159: LDA.w $081C,X
#_03E15C: SBC.w #$0010
#_03E15F: BNE CODE_03E173

#_03E161: PHX

#_03E162: LDX.w #$0012
#_03E165: JSL ROUTINE_01E532_long
#_03E169: PLX
#_03E16A: JSR ROUTINE_038550
#_03E16D: JSR ROUTINE_03E0E3

#_03E170: LDA.w #$0000

CODE_03E173:
#_03E173: STA.w $081C,X
#_03E176: JMP CODE_03E179

CODE_03E179:
#_03E179: LDA.w $081C,X
#_03E17C: STA.b $20
#_03E17E: STZ.b $22
#_03E180: SEC

#_03E181: LDA.w $0562
#_03E184: SBC.w $081A,X
#_03E187: BCS CODE_03E18B

#_03E189: DEC.b $22

CODE_03E18B:
#_03E18B: ASL.b $22
#_03E18D: ROR A
#_03E18E: ASL.b $22
#_03E190: ROR A
#_03E191: ASL.b $22
#_03E193: ROR A
#_03E194: ASL.b $22
#_03E196: ROR A
#_03E197: CLC
#_03E198: ADC.b $20
#_03E19A: BPL CODE_03E1A3

#_03E19C: CMP.w #$FE00
#_03E19F: BCC CODE_03E1A8

#_03E1A1: BRA CODE_03E1AB

CODE_03E1A3:
#_03E1A3: CMP.w #$0200
#_03E1A6: BCC CODE_03E1AB

CODE_03E1A8:
#_03E1A8: LDA.w #$0100

CODE_03E1AB:
#_03E1AB: STA.w $04D2

#_03E1AE: LDA.w #$0000
#_03E1B1: STA.w $0490
#_03E1B4: STA.w $0492
#_03E1B7: STA.w $0494
#_03E1BA: RTS

;===================================================================================================

ROUTINE_03E1BB:
#_03E1BB: INC.w $0816,X

#_03E1BE: LDA.w $0816,X
#_03E1C1: LSR A
#_03E1C2: CMP.w #$0010
#_03E1C5: BCC CODE_03E1CE

#_03E1C7: CMP.w #$0040
#_03E1CA: BCS .exit

#_03E1CC: BRA CODE_03E1D3

CODE_03E1CE:
#_03E1CE: ASL A
#_03E1CF: TAY

#_03E1D0: LDA.w UNREACH_03E1DA,Y

CODE_03E1D3:
#_03E1D3: STA.w $05FA
#_03E1D6: STA.w $05FE

.exit
#_03E1D9: RTS

UNREACH_03E1DA:
#_03E1DA: db $80,$FF,$00,$00,$80,$FF,$00,$00
#_03E1E2: db $A0,$FF,$00,$00,$A0,$FF,$00,$00
#_03E1EA: db $C0,$FF,$00,$00,$E0,$FF,$00,$00
#_03E1F2: db $F0,$FF,$00,$00,$00,$00,$00,$00

;===================================================================================================

ROUTINE_03E1FA:
#_03E1FA: TYX
#_03E1FB: JSR ROUTINE_03E20C
#_03E1FE: PHX

#_03E1FF: LDX.w #data03DE61
#_03E202: JSR ROUTINE_038BE0
#_03E205: INC.w $054E
#_03E208: PLX
#_03E209: JMP ROUTINE_038C85

;===================================================================================================

ROUTINE_03E20C:
#_03E20C: LDA.l $7E7A46
#_03E210: STA.l $7E7B14

;===================================================================================================

ROUTINE_03E214:
#_03E214: LDA.w #$0000
#_03E217: STA.w $04D0
#_03E21A: STA.w $0518
#_03E21D: STA.w $081C,X
#_03E220: STA.l $7EE000
#_03E224: STA.w $04D2
#_03E227: STA.w $05BA
#_03E22A: STA.l $7E7A48
#_03E22E: STA.w $04D4
#_03E231: INC A

;===================================================================================================

ROUTINE_03E232:
#_03E232: STA.w $056E
#_03E235: RTS

;===================================================================================================

ROUTINE_03E236:
#_03E236: TYX
#_03E237: JSL ROUTINE_08D367
#_03E23B: JSR Reset_0818_through_081F

#_03E23E: LDA.w $080A,X
#_03E241: STA.w $0816,X
#_03E244: STZ.w $080A,X
#_03E247: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03E24A:
#_03E24A: TYX

#_03E24B: LDY.w $0816,X
#_03E24E: CLC

#_03E24F: LDA.w $081A,Y
#_03E252: SBC.w $0562
#_03E255: STA.b $20

#_03E257: LDA.w $04D2
#_03E25A: EOR.w #$FFFF
#_03E25D: INC A
#_03E25E: ASL A
#_03E25F: ASL A
#_03E260: ASL A
#_03E261: ASL A
#_03E262: CLC
#_03E263: ADC.w $0562
#_03E266: CLC
#_03E267: ADC.w $080A,Y
#_03E26A: STA.w $080E,X

#_03E26D: LDA.w $0800,Y
#_03E270: BNE CODE_03E27A

#_03E272: JSR ROUTINE_038C85
#_03E275: JSL ROUTINE_08D35F
#_03E279: RTS

CODE_03E27A:
#_03E27A: JSR ROUTINE_0392C0

#_03E27D: LDA.w #$011A
#_03E280: JSR ROUTINE_038D39

#_03E283: LDA.w $0806,X
#_03E286: STA.w $0808,X
#_03E289: JMP ROUTINE_038CBD

;===================================================================================================

ROUTINE_03E28C:
#_03E28C: JSR ROUTINE_03DCE4

#_03E28F: LDA.w $080E,X
#_03E292: STA.w $081A,X
#_03E295: STA.l $7FE814,X

#_03E299: LDA.w $080C,X
#_03E29C: STA.l $7FE812,X
#_03E2A0: RTS

;===================================================================================================

ROUTINE_03E2A1:
#_03E2A1: TYX
#_03E2A2: JSR ROUTINE_038632
#_03E2A5: BCS .exit

#_03E2A7: JSR AdvanceAIModeUp
#_03E2AA: JMP ROUTINE_03DCFB

.exit
#_03E2AD: RTS

;===================================================================================================

ROUTINE_03E2AE:
#_03E2AE: TYX

#_03E2AF: LDA.w $05A0
#_03E2B2: AND.w #$0003
#_03E2B5: BNE CODE_03E312

#_03E2B7: LDA.w $05DE
#_03E2BA: CMP.w #$0010
#_03E2BD: BCC CODE_03E312

#_03E2BF: CMP.w #$0050
#_03E2C2: BCS CODE_03E312

#_03E2C4: SEC
#_03E2C5: SBC.w #$0010
#_03E2C8: CMP.w #$0020
#_03E2CB: BCC CODE_03E2D4

#_03E2CD: SBC.w #$0020
#_03E2D0: EOR.w #$FFFF
#_03E2D3: INC A

CODE_03E2D4:
#_03E2D4: ASL A
#_03E2D5: ASL A
#_03E2D6: ASL A
#_03E2D7: ASL A
#_03E2D8: STA.b $20
#_03E2DA: JSR Random
#_03E2DD: AND.w #$03FF
#_03E2E0: SBC.w #$0200
#_03E2E3: ADC.w $05E6
#_03E2E6: ADC.b $20
#_03E2E8: STA.b $20

#_03E2EA: LDA.w #$813E
#_03E2ED: STA.b $26
#_03E2EF: CLC

#_03E2F0: LDA.w $0562
#_03E2F3: ADC.w #$0500
#_03E2F6: STA.b $22
#_03E2F8: JSR Random
#_03E2FB: AND.w #$0FFF
#_03E2FE: SBC.w #$0800
#_03E301: ADC.b $22
#_03E303: STA.b $22
#_03E305: STZ.b $2C
#_03E307: STZ.b $30

#_03E309: LDA.w #$000E
#_03E30C: STA.b $24
#_03E30E: JSL PrepEnemySpawn_long

CODE_03E312:
#_03E312: LDA.w $05E0
#_03E315: BEQ .exit

#_03E317: LDA.w #$0080
#_03E31A: TRB.w $0536
#_03E31D: JSR ROUTINE_0392C0

#_03E320: LDA.w #$003A
#_03E323: STA.w $0818,X
#_03E326: JSR ROUTINE_03DCFB
#_03E329: JSR ROUTINE_03E214
#_03E32C: PHX

#_03E32D: LDX.w #data03DE61
#_03E330: JSR ROUTINE_038BE0
#_03E333: INC.w $054E
#_03E336: PLX
#_03E337: JSL ROUTINE_08D35F

#_03E33B: LDA.w #$014E
#_03E33E: STA.w $0810,X

.exit
#_03E341: RTS

;===================================================================================================

ROUTINE_03E342:
#_03E342: TYX
#_03E343: JSR ROUTINE_038632
#_03E346: BCS .exit

#_03E348: LDA.w $0806,X
#_03E34B: BEQ CODE_03E351

#_03E34D: JSR ROUTINE_03DCFB

.exit
#_03E350: RTS

CODE_03E351:
#_03E351: JMP ROUTINE_038C85

;===================================================================================================

ROUTINE_03E354:
#_03E354: JSR ROUTINE_03DCE4

#_03E357: LDA.w $080E,X
#_03E35A: STA.w $081A,X

#_03E35D: LDA.w #$0000
#_03E360: STA.l $7FE818,X
#_03E364: STZ.w $054C

#_03E367: LDA.w #$0148
#_03E36A: STA.b $26

#_03E36C: LDA.w $05E6
#_03E36F: AND.w #$FF80
#_03E372: STA.w $080C,X
#_03E375: STA.b $20

#_03E377: LDA.w $05E8
#_03E37A: AND.w #$FF80
#_03E37D: STA.w $080E,X
#_03E380: STA.b $22
#_03E382: STZ.b $2C
#_03E384: STZ.b $30

#_03E386: LDA.w #$000E
#_03E389: STA.b $24
#_03E38B: JSL PrepEnemySpawn_long
#_03E38F: RTS

;===================================================================================================

ROUTINE_03E390:
#_03E390: TYX
#_03E391: INC.w $054C

#_03E394: LDA.w $054C
#_03E397: CMP.w #$0005
#_03E39A: BCC CODE_03E3A4

#_03E39C: JSR ROUTINE_038632
#_03E39F: BCS .exit

#_03E3A1: JSR AdvanceAIModeUp

CODE_03E3A4:
#_03E3A4: JMP ROUTINE_03DCFB

.exit
#_03E3A7: RTS

;===================================================================================================

ROUTINE_03E3A8:
#_03E3A8: TYX

#_03E3A9: LDA.l $7FE818,X
#_03E3AD: BNE CODE_03E3D7

#_03E3AF: JSR ROUTINE_038632
#_03E3B2: BCS .exit

#_03E3B4: LDA.w $0806,X
#_03E3B7: BEQ CODE_03E3BD

#_03E3B9: JSR ROUTINE_03DCFB

.exit
#_03E3BC: RTS

;---------------------------------------------------------------------------------------------------

CODE_03E3BD:
#_03E3BD: LDA.w $18EC
#_03E3C0: BPL EXIT_03E3F7

#_03E3C2: LDA.w $05CE
#_03E3C5: CMP.w #$0130
#_03E3C8: BNE EXIT_03E3F7

#_03E3CA: LDA.w #$002E
#_03E3CD: STA.l $7FE818,X
#_03E3D1: STA.w $0818,X
#_03E3D4: JMP ROUTINE_03DCFB

CODE_03E3D7:
#_03E3D7: LDA.w $0806,X

;===================================================================================================

ROUTINE_03E3DA:
#_03E3DA: BEQ CODE_03E3DF

#_03E3DC: JMP ROUTINE_03DCFB

CODE_03E3DF:
#_03E3DF: JSR ROUTINE_03E20C
#_03E3E2: PHX

#_03E3E3: LDX.w #data03DE61
#_03E3E6: JSR ROUTINE_038BE0
#_03E3E9: INC.w $054E
#_03E3EC: PLX
#_03E3ED: JSL ROUTINE_08D35F
#_03E3F1: INC.w $05DE
#_03E3F4: JMP ROUTINE_038C85

;---------------------------------------------------------------------------------------------------

#EXIT_03E3F7:
#_03E3F7: RTS

;===================================================================================================

ROUTINE_03E3F8:
#_03E3F8: TYX

#_03E3F9: LDA.l $7E2530
#_03E3FD: BNE .exit

#_03E3FF: STZ.w $080A,X

#_03E402: LDA.w $18EC
#_03E405: BMI .exit

#_03E407: LDA.w $05CE

;===================================================================================================

#ROUTINE_03E40A:
#_03E40A: CMP.w #$012A
#_03E40D: BCC .exit

#_03E40F: LDA.w #$011B
#_03E412: JSR ROUTINE_038CDF
#_03E415: BNE CODE_03E41A

#_03E417: JSR AdvanceAIModeUp

CODE_03E41A:
#_03E41A: JMP CODE_03E430

.exit
#_03E41D: RTS

;===================================================================================================

ROUTINE_03E41E:
#_03E41E: TYX

#_03E41F: LDA.w $05CE

;===================================================================================================

ROUTINE_03E422:
#_03E422: CMP.w #$0130
#_03E425: BCC CODE_03E42A

#_03E427: JSR AdvanceAIModeUp

CODE_03E42A:
#_03E42A: LDA.w #$0123
#_03E42D: JSR ROUTINE_038D39

CODE_03E430:
#_03E430: LDA.w $05E6
#_03E433: STA.w $080C,X

#_03E436: LDA.w $05E8
#_03E439: STA.w $080E,X
#_03E43C: JMP ROUTINE_038B14

;===================================================================================================

ROUTINE_03E43F:
#_03E43F: TYX

#_03E440: LDA.w #$011C
#_03E443: JSR ROUTINE_038CDF
#_03E446: BNE CODE_03E44B

#_03E448: JMP ROUTINE_038C85

CODE_03E44B:
#_03E44B: JMP CODE_03E430

;===================================================================================================

ROUTINE_03E44E:
#_03E44E: JSR ROUTINE_03DCE4

#_03E451: LDA.w $080E,X
#_03E454: STA.w $081A,X
#_03E457: RTS

CODE_03E458:
#_03E458: STA.b $20

;===================================================================================================

ROUTINE_03E45A:
#_03E45A: TYX
#_03E45B: JSR ROUTINE_038632
#_03E45E: BCS .exit

#_03E460: LDA.w $0806,X
#_03E463: BEQ CODE_03E469

#_03E465: JSR ROUTINE_03DCFB

.exit
#_03E468: RTS

CODE_03E469:
#_03E469: LDA.b $20
#_03E46B: STA.w $0818,X
#_03E46E: JSR ROUTINE_0392C0
#_03E471: JSR AdvanceAIModeUp
#_03E474: JMP ROUTINE_03DCFB

;===================================================================================================

ROUTINE_03E477:
#_03E477: LDA.w #$0032
#_03E47A: BRA CODE_03E458

;===================================================================================================

ROUTINE_03E47C:
#_03E47C: LDA.w #$0034
#_03E47F: BRA CODE_03E458

;===================================================================================================

ROUTINE_03E481:
#_03E481: TYX
#_03E482: JSR ROUTINE_038632
#_03E485: BCS .exit_a

#_03E487: LDA.w $0806,X
#_03E48A: BEQ CODE_03E490

#_03E48C: JSR ROUTINE_03DCFB

.exit_a
#_03E48F: RTS

CODE_03E490:
#_03E490: LDA.w $05CE
#_03E493: CMP.w #$0136
#_03E496: BNE .exit_b

#_03E498: LDA.w #$0036
#_03E49B: STA.w $0818,X
#_03E49E: JSR ROUTINE_03DCFB
#_03E4A1: JSR ROUTINE_03E214
#_03E4A4: PHX

#_03E4A5: LDX.w #data03DE61
#_03E4A8: JSR ROUTINE_038BE0
#_03E4AB: INC.w $054E
#_03E4AE: PLX
#_03E4AF: JSL ROUTINE_08D35F
#_03E4B3: INC.w $05E0

.exit_b
#_03E4B6: RTS

;===================================================================================================

ROUTINE_03E4B7:
#_03E4B7: TYX
#_03E4B8: JSR ROUTINE_038567
#_03E4BB: BNE .exit

#_03E4BD: LDY.w $0816,X
#_03E4C0: LDA.w UNREACH_03E4E4,Y
#_03E4C3: STA.w $081E,X

#_03E4C6: LDA.w UNREACH_03E4E6,Y
#_03E4C9: STA.l $7FE812,X

#_03E4CD: LDA.w #$1000
#_03E4D0: STA.l $7FE814,X

#_03E4D4: LDA.w $080A,X
#_03E4D7: STA.w $081C,X
#_03E4DA: STZ.w $080A,X
#_03E4DD: JSR ROUTINE_0392C0
#_03E4E0: JMP AdvanceAIModeUp

.exit
#_03E4E3: RTS

UNREACH_03E4E4:
#_03E4E4: db $80,$02

UNREACH_03E4E6:
#_03E4E6: db $00,$AD,$80,$03,$00,$AD,$80,$01
#_03E4EE: db $00,$AD,$80,$00,$00,$AD

;===================================================================================================

ROUTINE_03E4F4:
#_03E4F4: TYX

#_03E4F5: LDA.l $7FE812,X
#_03E4F9: BEQ CODE_03E551

#_03E4FB: CMP.w #$1600
#_03E4FE: BCC CODE_03E545

#_03E500: CMP.w #$8000
#_03E503: BCS CODE_03E515

#_03E505: LDA.l $7FE814,X
#_03E509: CMP.w #$0400
#_03E50C: BCC CODE_03E515

#_03E50E: SBC.w #$0100
#_03E511: STA.l $7FE814,X

CODE_03E515:
#_03E515: LDA.l $7FE814,X
#_03E519: STA.b $20
#_03E51B: SEC

#_03E51C: LDA.l $7FE812,X
#_03E520: SBC.b $20
#_03E522: STA.l $7FE812,X

CODE_03E526:
#_03E526: STA.b $20

#_03E528: LDA.w $081E,X
#_03E52B: JSR ROUTINE_03A04D

#_03E52E: LDY.w $081C,X
#_03E531: LDA.w $080C,Y
#_03E534: ADC.w $0818,X
#_03E537: STA.w $080C,X

#_03E53A: LDA.w $080E,Y
#_03E53D: ADC.w $081A,X
#_03E540: STA.w $080E,X
#_03E543: BRA CODE_03E551

CODE_03E545:
#_03E545: LDA.w #$0000
#_03E548: STA.l $7FE812,X

#_03E54C: LDA.w #$1610
#_03E54F: BRA CODE_03E526

CODE_03E551:
#_03E551: LDY.w $081C,X

#_03E554: LDA.w $0814,Y
#_03E557: STA.w $0814,X

#_03E55A: LDA.w $0812,Y
#_03E55D: CMP.w $0812,X
#_03E560: BCS CODE_03E56B

#_03E562: JSR ROUTINE_038550
#_03E565: JSR ROUTINE_038A25_0020
#_03E568: JSR AdvanceAIModeUp

CODE_03E56B:
#_03E56B: LDA.w $0814,X
#_03E56E: CMP.w #$0002
#_03E571: BCS CODE_03E578

#_03E573: LDA.w #$3600
#_03E576: BRA CODE_03E57B

CODE_03E578:
#_03E578: LDA.w #$3000

CODE_03E57B:
#_03E57B: STA.w $0808,X
#_03E57E: JMP ROUTINE_038860

;===================================================================================================

ROUTINE_03E581:
#_03E581: TYX

#_03E582: LDY.w $0816,X
#_03E585: CLC

#_03E586: LDA.w UNREACH_03E5A7,Y
#_03E589: ADC.w $080C,X
#_03E58C: STA.w $080C,X

#_03E58F: LDA.w UNREACH_03E5A9,Y
#_03E592: ADC.w $080E,X
#_03E595: STA.w $080E,X
#_03E598: JSR ROUTINE_03894A
#_03E59B: BEQ .exit

#_03E59D: LDA.w #$1201
#_03E5A0: JSR ROUTINE_038D39
#_03E5A3: JMP ROUTINE_0388AA

.exit
#_03E5A6: RTS

UNREACH_03E5A7:
#_03E5A7: db $80,$FF

UNREACH_03E5A9:
#_03E5A9: db $E0,$FF,$80,$00,$E0,$FF,$80,$FF
#_03E5B1: db $20,$00,$80,$00,$20,$00

;===================================================================================================

ROUTINE_03E5B7:
#_03E5B7: TYX
#_03E5B8: JSR ROUTINE_038567
#_03E5BB: BNE .exit

#_03E5BD: LDA.w #$0029
#_03E5C0: STA.w $04AA
#_03E5C3: STZ.w $080A,X
#_03E5C6: JSR ROUTINE_0392C0
#_03E5C9: JMP AdvanceAIModeUp

.exit
#_03E5CC: RTS

;===================================================================================================

ROUTINE_03E5CD:
#_03E5CD: TYX

#_03E5CE: LDY.w #$0008
#_03E5D1: LDA.w #$0020
#_03E5D4: JSR ROUTINE_039664

#_03E5D7: LDY.w #$0050
#_03E5DA: LDA.w #$0020
#_03E5DD: JSR ROUTINE_039C2D

#_03E5E0: LDY.w #$0068
#_03E5E3: JSR ROUTINE_0392EE
#_03E5E6: BEQ .exit

#_03E5E8: JSR ROUTINE_039385
#_03E5EB: BNE .exit

#_03E5ED: JSR ROUTINE_038A25_0020

#_03E5F0: LDA.w #$0000
#_03E5F3: STA.w $0816,X

#_03E5F6: LDA.w #$FFFF
#_03E5F9: STA.l $7E7A48
#_03E5FD: STZ.w $04F4
#_03E600: JMP AdvanceAIModeUp

.exit
#_03E603: RTS

;===================================================================================================

ROUTINE_03E604:
#_03E604: TYX
#_03E605: JSR ROUTINE_038038
#_03E608: BCC .exit

#_03E60A: LDA.w $05A0
#_03E60D: AND.w #$000F
#_03E610: BNE .exit

#_03E612: JSR ROUTINE_038550

#_03E615: LDA.w #$015E
#_03E618: STA.w $0810,X
#_03E61B: STA.w $04B6
#_03E61E: JSR Random
#_03E621: AND.w #$003F
#_03E624: SBC.w #$0020
#_03E627: ADC.w $080C,X
#_03E62A: STA.b $24
#_03E62C: JSR Random
#_03E62F: AND.w #$003F
#_03E632: SBC.w #$0020
#_03E635: ADC.w $080E,X
#_03E638: STA.b $26
#_03E63A: JSR ROUTINE_039552
#_03E63D: STZ.w $04B6

#_03E640: LDA.w #$015A
#_03E643: STA.w $0810,X
#_03E646: JSR ROUTINE_03E684
#_03E649: BNE .exit

#_03E64B: LDA.w #$0000
#_03E64E: STA.l $7E7A48
#_03E652: JMP ROUTINE_038C85

.exit
#_03E655: RTS

;===================================================================================================

ROUTINE_03E684_long:
#_03E656: PHB
#_03E657: PHK
#_03E658: PLB
#_03E659: JSR ROUTINE_03E684
#_03E65C: PLB
#_03E65D: RTL

;===================================================================================================

ROUTINE_03E65E:
#_03E65E: PHB
#_03E65F: PHK
#_03E660: PLB

#_03E661: LDA.w #$017B
#_03E664: STA.w $0816,X
#_03E667: PLB
#_03E668: RTL

;===================================================================================================

ROUTINE_03E669:
#_03E669: PHB
#_03E66A: PHK
#_03E66B: PLB

#_03E66C: LDA.w #$0046
#_03E66F: STA.w $0816,X
#_03E672: PLB
#_03E673: RTL

;===================================================================================================

ROUTINE_03E674:
#_03E674: PHB
#_03E675: PHK
#_03E676: PLB
#_03E677: TAY

#_03E678: LDA.w UNREACH_03E680,Y
#_03E67B: STA.w $0816,X
#_03E67E: PLB
#_03E67F: RTL

UNREACH_03E680:
#_03E680: db $57,$00,$E9,$00

;===================================================================================================

ROUTINE_03E684:
#_03E684: STZ.w $1980

#_03E687: LDY.w $0816,X
#_03E68A: LDA.w UNREACH_03E7E9,Y
#_03E68D: TAY

CODE_03E68E:
#_03E68E: LDA.w $0000,Y
#_03E691: INY
#_03E692: INY
#_03E693: CMP.w #$0000
#_03E696: BNE CODE_03E6A5

#_03E698: LDA.w $0816,X
#_03E69B: INC A
#_03E69C: INC A
#_03E69D: STA.w $0816,X
#_03E6A0: TAY

#_03E6A1: LDA.w UNREACH_03E7E9,Y
#_03E6A4: RTS

CODE_03E6A5:
#_03E6A5: CMP.w #$0001
#_03E6A8: BEQ CODE_03E713

#_03E6AA: CMP.w #$0002
#_03E6AD: BEQ CODE_03E706

#_03E6AF: CMP.w #$000B
#_03E6B2: BEQ CODE_03E70B

#_03E6B4: CMP.w #$0003
#_03E6B7: BEQ CODE_03E6DE

#_03E6B9: CMP.w #$0004
#_03E6BC: BEQ CODE_03E6E3

#_03E6BE: CMP.w #$0005
#_03E6C1: BEQ CODE_03E6E8

#_03E6C3: CMP.w #$0006
#_03E6C6: BEQ CODE_03E6ED

#_03E6C8: CMP.w #$0007
#_03E6CB: BEQ CODE_03E6F2

#_03E6CD: CMP.w #$0008
#_03E6D0: BEQ CODE_03E6F7

#_03E6D2: CMP.w #$0009
#_03E6D5: BEQ CODE_03E6FC

#_03E6D7: CMP.w #$000A
#_03E6DA: BEQ CODE_03E701

#_03E6DC: BRA CODE_03E729

CODE_03E6DE:
#_03E6DE: JSR QueuePockyPoseTransfer_30_30
#_03E6E1: BRA CODE_03E729

CODE_03E6E3:
#_03E6E3: JSR QueuePockyPoseTransfer_34_38
#_03E6E6: BRA CODE_03E729

CODE_03E6E8:
#_03E6E8: JSR QueuePockyPoseTransfer_38_40
#_03E6EB: BRA CODE_03E729

CODE_03E6ED:
#_03E6ED: JSR QueuePockyPoseTransfer_3C_48
#_03E6F0: BRA CODE_03E729

CODE_03E6F2:
#_03E6F2: JSR QueuePockyPoseTransfer_40_50
#_03E6F5: BRA CODE_03E729

CODE_03E6F7:
#_03E6F7: JSR QueuePockyPoseTransfer_44_58
#_03E6FA: BRA CODE_03E729

CODE_03E6FC:
#_03E6FC: JSR QueuePockyPoseTransfer_48_60
#_03E6FF: BRA CODE_03E729

CODE_03E701:
#_03E701: JSR QueuePockyPoseTransfer_4C_68
#_03E704: BRA CODE_03E729

CODE_03E706:
#_03E706: JSR ROUTINE_03E743
#_03E709: BRA CODE_03E729

CODE_03E70B:
#_03E70B: INC.w $1980
#_03E70E: JSR ROUTINE_03E743
#_03E711: BRA CODE_03E729

CODE_03E713:
#_03E713: JSR ROUTINE_03E72C

#_03E716: LDA.w $0000,Y
#_03E719: STA.b $26
#_03E71B: INY
#_03E71C: INY
#_03E71D: PHY
#_03E71E: STX.b $30

#_03E720: LDA.w #$000C
#_03E723: STA.b $24
#_03E725: JSR PrepEnemySpawn
#_03E728: PLY

CODE_03E729:
#_03E729: JMP CODE_03E68E

;===================================================================================================

ROUTINE_03E72C:
#_03E72C: CLC

#_03E72D: LDA.w $0000,Y
#_03E730: ADC.w $080C,X
#_03E733: STA.b $20
#_03E735: INY
#_03E736: INY
#_03E737: CLC

#_03E738: LDA.w $0000,Y
#_03E73B: ADC.w $080E,X
#_03E73E: STA.b $22
#_03E740: INY
#_03E741: INY
#_03E742: RTS

;===================================================================================================

ROUTINE_03E743:
#_03E743: JSR ROUTINE_03E72C

#_03E746: LDA.w $0002,Y
#_03E749: AND.w #$00FF
#_03E74C: STA.b $36

#_03E74E: LDA.w $0000,Y
#_03E751: STA.b $34
#_03E753: INY
#_03E754: INY
#_03E755: INY
#_03E756: CMP.w #$5000

#_03E759: LDA.w #$0000
#_03E75C: BCC CODE_03E761

#_03E75E: LDA.w #$0100

CODE_03E761:
#_03E761: STA.b $24

#_03E763: LDA.w $0000,Y
#_03E766: JSL ROUTINE_09FC8D_long
#_03E76A: INY
#_03E76B: INY
#_03E76C: PHX
#_03E76D: PHY
#_03E76E: PHA
#_03E76F: SEC

#_03E770: LDA.b $22
#_03E772: SBC.w $0562
#_03E775: TAY
#_03E776: SEC

#_03E777: LDA.b $20
#_03E779: SBC.w $0560
#_03E77C: JSR ROUTINE_0380D9
#_03E77F: PLX

#_03E780: LDA.w #$0004

CODE_03E783:
#_03E783: PHA
#_03E784: PHX
#_03E785: PHY
#_03E786: PHY

#_03E787: LDA.l $7E8000,X
#_03E78B: STA.b [$34],Y
#_03E78D: INY
#_03E78E: INY

#_03E78F: LDA.l $7E8002,X
#_03E793: STA.b [$34],Y
#_03E795: INY
#_03E796: INY

#_03E797: LDA.l $7E8004,X
#_03E79B: STA.b [$34],Y
#_03E79D: INY
#_03E79E: INY

#_03E79F: LDA.l $7E8006,X
#_03E7A3: STA.b [$34],Y

#_03E7A5: LDA.b $34
#_03E7A7: CMP.w #$5000

#_03E7AA: LDA.w #$3000
#_03E7AD: BCC CODE_03E7B2

#_03E7AF: LDA.w #$4000

CODE_03E7B2:
#_03E7B2: STA.b $20
#_03E7B4: PLA
#_03E7B5: PHA
#_03E7B6: LSR A
#_03E7B7: CLC
#_03E7B8: ADC.b $20
#_03E7BA: STA.b $38

#_03E7BC: LDA.w #$8008
#_03E7BF: STA.b $3A
#_03E7C1: PLA
#_03E7C2: CLC
#_03E7C3: ADC.b $34
#_03E7C5: STA.b $3C

#_03E7C7: LDA.w $1980
#_03E7CA: BEQ CODE_03E7D4

#_03E7CC: LDA.b $36
#_03E7CE: STA.b $3E
#_03E7D0: JSL ROUTINE_00DB57_long

CODE_03E7D4:
#_03E7D4: PLY
#_03E7D5: CLC
#_03E7D6: TYA
#_03E7D7: ADC.w #$0040
#_03E7DA: TAY
#_03E7DB: PLX
#_03E7DC: CLC
#_03E7DD: TXA
#_03E7DE: ADC.w #$0040
#_03E7E1: TAX
#_03E7E2: PLA
#_03E7E3: DEC A
#_03E7E4: BNE CODE_03E783

#_03E7E6: PLY
#_03E7E7: PLX
#_03E7E8: RTS

UNREACH_03E7E9:
#_03E7E9: db $8A,$EA,$0C,$EC,$18,$EC,$24,$EC
#_03E7F1: db $30,$EC,$3C,$EC,$48,$EC,$54,$EC
#_03E7F9: db $60,$EC,$00,$00,$01,$E8,$00,$00
#_03E801: db $0B,$00,$00,$FE,$00,$FE,$00,$30
#_03E809: db $7E,$28,$00,$0B,$00,$00,$00,$00
#_03E811: db $FE,$00,$30,$7E,$30,$00,$0B,$00
#_03E819: db $00,$FE,$00,$00,$00,$30,$7E,$38
#_03E821: db $00,$02,$00,$00,$00,$00,$00,$00
#_03E829: db $30,$7E,$00,$01,$00,$00,$33,$E8
#_03E831: db $00,$00,$0B,$00,$00,$00,$00,$00
#_03E839: db $00,$30,$7E,$00,$00,$00,$00,$48
#_03E841: db $E8,$76,$E8,$A4,$E8,$00,$00,$0B
#_03E849: db $00,$00,$00,$00,$00,$00,$50,$7E
#_03E851: db $18,$14,$0B,$00,$00,$00,$00,$FE
#_03E859: db $00,$50,$7E,$18,$13,$0B,$00,$00
#_03E861: db $FE,$00,$00,$00,$50,$7E,$10,$14
#_03E869: db $0B,$00,$00,$FE,$00,$FE,$00,$50
#_03E871: db $7E,$10,$13,$00,$00,$0B,$00,$00
#_03E879: db $02,$00,$00,$00,$50,$7E,$20,$14
#_03E881: db $0B,$00,$00,$02,$00,$FE,$00,$50
#_03E889: db $7E,$20,$13,$0B,$00,$00,$FC,$00
#_03E891: db $00,$00,$50,$7E,$08,$14,$0B,$00
#_03E899: db $00,$FC,$00,$FE,$00,$50,$7E,$08
#_03E8A1: db $13,$00,$00,$0B,$00,$00,$04,$00
#_03E8A9: db $00,$00,$50,$7E,$28,$14,$0B,$00
#_03E8B1: db $00,$04,$00,$FE,$00,$50,$7E,$28
#_03E8B9: db $13,$0B,$00,$00,$FA,$00,$00,$00
#_03E8C1: db $50,$7E,$00,$14,$0B,$00,$00,$FA
#_03E8C9: db $00,$FE,$00,$50,$7E,$00,$13,$00
#_03E8D1: db $00,$DA,$E8,$08,$E9,$36,$E9,$00
#_03E8D9: db $00,$0B,$00,$00,$00,$00,$00,$00
#_03E8E1: db $50,$7E,$00,$0C,$0B,$00,$00,$00
#_03E8E9: db $00,$FE,$00,$50,$7E,$00,$0B,$0B
#_03E8F1: db $00,$00,$FE,$00,$00,$00,$50,$7E
#_03E8F9: db $10,$0A,$0B,$00,$00,$FE,$00,$FE
#_03E901: db $00,$50,$7E,$10,$09,$00,$00,$0B
#_03E909: db $00,$00,$02,$00,$00,$00,$50,$7E
#_03E911: db $08,$0C,$0B,$00,$00,$02,$00,$FE
#_03E919: db $00,$50,$7E,$08,$0B,$0B,$00,$00
#_03E921: db $FC,$00,$00,$00,$50,$7E,$08,$0A
#_03E929: db $0B,$00,$00,$FC,$00,$FE,$00,$50
#_03E931: db $7E,$08,$09,$00,$00,$0B,$00,$00
#_03E939: db $04,$00,$00,$00,$50,$7E,$10,$0C
#_03E941: db $0B,$00,$00,$04,$00,$FE,$00,$50
#_03E949: db $7E,$10,$0B,$0B,$00,$00,$FA,$00
#_03E951: db $00,$00,$50,$7E,$00,$0A,$0B,$00
#_03E959: db $00,$FA,$00,$FE,$00,$50,$7E,$00
#_03E961: db $09,$00,$00,$78,$E9,$32,$EA,$36
#_03E969: db $EA,$42,$EA,$4E,$EA,$5A,$EA,$66
#_03E971: db $EA,$72,$EA,$7E,$EA,$00,$00,$02
#_03E979: db $00,$00,$FE,$00,$FC,$00,$30,$7E
#_03E981: db $18,$17,$02,$00,$00,$00,$00,$FC
#_03E989: db $00,$30,$7E,$20,$17,$02,$00,$00
#_03E991: db $FE,$00,$FE,$00,$30,$7E,$28,$17
#_03E999: db $02,$00,$00,$00,$00,$FE,$00,$30
#_03E9A1: db $7E,$30,$17,$02,$00,$00,$FC,$00
#_03E9A9: db $FE,$00,$50,$7E,$38,$17,$02,$00
#_03E9B1: db $00,$FE,$00,$FE,$00,$50,$7E,$00
#_03E9B9: db $18,$02,$00,$00,$00,$00,$FE,$00
#_03E9C1: db $50,$7E,$08,$18,$02,$00,$00,$02
#_03E9C9: db $00,$FE,$00,$50,$7E,$10,$18,$02
#_03E9D1: db $00,$00,$FC,$00,$00,$00,$50,$7E
#_03E9D9: db $18,$1A,$02,$00,$00,$FE,$00,$00
#_03E9E1: db $00,$50,$7E,$20,$1A,$02,$00,$00
#_03E9E9: db $00,$00,$00,$00,$50,$7E,$28,$1A
#_03E9F1: db $02,$00,$00,$02,$00,$00,$00,$50
#_03E9F9: db $7E,$30,$1A,$02,$00,$00,$FC,$00
#_03EA01: db $02,$00,$50,$7E,$38,$1A,$02,$00
#_03EA09: db $00,$FE,$00,$02,$00,$50,$7E,$00
#_03EA11: db $1B,$02,$00,$00,$00,$00,$02,$00
#_03EA19: db $50,$7E,$08,$1B,$02,$00,$00,$02
#_03EA21: db $00,$02,$00,$50,$7E,$10,$1B,$01
#_03EA29: db $00,$00,$FF,$00,$FF,$80,$00,$00
#_03EA31: db $00,$03,$00,$00,$00,$04,$00,$01
#_03EA39: db $00,$00,$01,$00,$FF,$80,$00,$00
#_03EA41: db $00,$05,$00,$01,$00,$00,$FE,$00
#_03EA49: db $01,$80,$00,$00,$00,$06,$00,$01
#_03EA51: db $00,$00,$02,$00,$01,$80,$00,$00
#_03EA59: db $00,$07,$00,$01,$00,$00,$FD,$00
#_03EA61: db $FF,$80,$00,$00,$00,$08,$00,$01
#_03EA69: db $00,$00,$03,$00,$FF,$80,$00,$00
#_03EA71: db $00,$09,$00,$01,$00,$00,$FC,$00
#_03EA79: db $01,$80,$00,$00,$00,$0A,$00,$01
#_03EA81: db $00,$00,$04,$00,$01,$80,$00,$00
#_03EA89: db $00,$02,$00,$00,$F8,$00,$FE,$00
#_03EA91: db $50,$7E,$00,$29,$02,$00,$00,$FC
#_03EA99: db $00,$00,$00,$50,$7E,$38,$29,$02
#_03EAA1: db $00,$00,$02,$00,$00,$00,$50,$7E
#_03EAA9: db $38,$29,$02,$00,$00,$06,$00,$FE
#_03EAB1: db $00,$50,$7E,$08,$29,$02,$00,$00
#_03EAB9: db $FA,$00,$F8,$00,$30,$7E,$00,$00
#_03EAC1: db $02,$00,$00,$FC,$00,$F8,$00,$30
#_03EAC9: db $7E,$00,$00,$02,$00,$00,$02,$00
#_03EAD1: db $F8,$00,$30,$7E,$00,$00,$02,$00
#_03EAD9: db $00,$04,$00,$F8,$00,$30,$7E,$00
#_03EAE1: db $00,$02,$00,$00,$FA,$00,$FA,$00
#_03EAE9: db $30,$7E,$18,$06,$02,$00,$00,$FC
#_03EAF1: db $00,$FA,$00,$30,$7E,$00,$00,$02
#_03EAF9: db $00,$00,$FE,$00,$FA,$00,$30,$7E
#_03EB01: db $00,$00,$02,$00,$00,$00,$00,$FA
#_03EB09: db $00,$30,$7E,$00,$00,$02,$00,$00
#_03EB11: db $02,$00,$FA,$00,$30,$7E,$00,$00
#_03EB19: db $02,$00,$00,$04,$00,$FA,$00,$30
#_03EB21: db $7E,$00,$06,$02,$00,$00,$F8,$00
#_03EB29: db $FC,$00,$30,$7E,$20,$10,$02,$00
#_03EB31: db $00,$FA,$00,$FC,$00,$30,$7E,$00
#_03EB39: db $00,$02,$00,$00,$FC,$00,$FC,$00
#_03EB41: db $30,$7E,$00,$00,$02,$00,$00,$FE
#_03EB49: db $00,$FC,$00,$30,$7E,$00,$00,$02
#_03EB51: db $00,$00,$00,$00,$FC,$00,$30,$7E
#_03EB59: db $00,$00,$02,$00,$00,$02,$00,$FC
#_03EB61: db $00,$30,$7E,$00,$00,$02,$00,$00
#_03EB69: db $04,$00,$FC,$00,$30,$7E,$00,$00
#_03EB71: db $02,$00,$00,$06,$00,$FC,$00,$30
#_03EB79: db $7E,$08,$07,$02,$00,$00,$F8,$00
#_03EB81: db $FE,$00,$30,$7E,$28,$29,$02,$00
#_03EB89: db $00,$FA,$00,$FE,$00,$30,$7E,$28
#_03EB91: db $29,$02,$00,$00,$FC,$00,$FE,$00
#_03EB99: db $30,$7E,$18,$2A,$02,$00,$00,$FE
#_03EBA1: db $00,$FE,$00,$30,$7E,$00,$00,$02
#_03EBA9: db $00,$00,$00,$00,$FE,$00,$30,$7E
#_03EBB1: db $00,$00,$02,$00,$00,$02,$00,$FE
#_03EBB9: db $00,$30,$7E,$18,$2A,$02,$00,$00
#_03EBC1: db $04,$00,$FE,$00,$30,$7E,$28,$29
#_03EBC9: db $02,$00,$00,$06,$00,$FE,$00,$30
#_03EBD1: db $7E,$28,$29,$02,$00,$00,$FC,$00
#_03EBD9: db $00,$00,$30,$7E,$00,$2A,$02,$00
#_03EBE1: db $00,$FE,$00,$00,$00,$30,$7E,$00
#_03EBE9: db $00,$02,$00,$00,$00,$00,$00,$00
#_03EBF1: db $30,$7E,$00,$00,$02,$00,$00,$02
#_03EBF9: db $00,$00,$00,$30,$7E,$00,$2A,$01
#_03EC01: db $00,$00,$00,$00,$00,$80,$00,$03
#_03EC09: db $00,$00,$00,$01,$00,$00,$FF,$00
#_03EC11: db $FF,$80,$00,$04,$00,$00,$00,$01
#_03EC19: db $00,$00,$01,$00,$FF,$80,$00,$07
#_03EC21: db $00,$00,$00,$08,$00,$01,$00,$00
#_03EC29: db $FD,$00,$01,$80,$00,$00,$00,$05
#_03EC31: db $00,$01,$00,$00,$03,$00,$01,$80
#_03EC39: db $00,$00,$00,$09,$00,$01,$00,$20
#_03EC41: db $FB,$00,$FF,$80,$00,$00,$00,$06
#_03EC49: db $00,$01,$00,$E0,$04,$00,$FF,$80
#_03EC51: db $00,$00,$00,$0A,$00,$01,$00,$80
#_03EC59: db $F8,$00,$01,$80,$00,$00,$00,$01
#_03EC61: db $00,$80,$07,$00,$01,$80,$00,$00
#_03EC69: db $00

;===================================================================================================

ROUTINE_03EC6A:
#_03EC6A: TYX

#_03EC6B: LDA.l $7E2530
#_03EC6F: BNE .exit

#_03EC71: LDA.w $080A,X
#_03EC74: STA.w $0816,X
#_03EC77: STZ.w $080A,X
#_03EC7A: JSR ROUTINE_0392C0
#_03EC7D: JMP AdvanceAIModeUp

.exit
#_03EC80: RTS

;===================================================================================================

ROUTINE_03EC81:
#_03EC81: TYX

#_03EC82: LDY.w $0816,X
#_03EC85: LDA.w $0800,Y
#_03EC88: BNE CODE_03EC8D

#_03EC8A: JMP ROUTINE_038C85

CODE_03EC8D:
#_03EC8D: LDA.b $00
#_03EC8F: AND.w #$003F
#_03EC92: BNE .exit

#_03EC94: JSR Random
#_03EC97: AND.w #$000F
#_03EC9A: TAY

#_03EC9B: LDA.w UNREACH_03ECD4,Y
#_03EC9E: AND.w #$00FF
#_03ECA1: ASL A
#_03ECA2: ASL A
#_03ECA3: ASL A
#_03ECA4: ASL A
#_03ECA5: ADC.w $0560
#_03ECA8: STA.b $20
#_03ECAA: STA.w $080C,X

#_03ECAD: LDA.w UNREACH_03ECE6,Y
#_03ECB0: AND.w #$00FF
#_03ECB3: ASL A
#_03ECB4: ASL A
#_03ECB5: ASL A
#_03ECB6: ASL A
#_03ECB7: ADC.w $0562
#_03ECBA: STA.b $22
#_03ECBC: STA.w $080E,X

#_03ECBF: LDA.w UNREACH_03ECF6,Y
#_03ECC2: AND.w #$00FF
#_03ECC5: STA.b $2C
#_03ECC7: PHX

#_03ECC8: LDX.w #$ED06
#_03ECCB: JSR ROUTINE_038C0E
#_03ECCE: PLX
#_03ECCF: JSL PrepEnemySpawn_long

.exit
#_03ECD3: RTS

UNREACH_03ECD4:
#_03ECD4: db $50,$5B,$66,$71,$7C,$87,$92,$9D
#_03ECDC: db $08,$10,$18,$20,$28,$D8,$E0,$E8
#_03ECE4: db $F0,$F8

UNREACH_03ECE6:
#_03ECE6: db $00,$00,$00,$00,$00,$00,$00,$00
#_03ECEE: db $30,$30,$30,$30,$30,$30,$30,$30

UNREACH_03ECF6:
#_03ECF6: db $02,$02,$02,$02,$02,$02,$02,$02
#_03ECFE: db $00,$00,$00,$00,$00,$00,$00,$00
#_03ED06: db $08,$00,$24,$00,$00,$10,$00,$62
#_03ED0E: db $01,$C6,$0E,$01,$00,$00,$00

;===================================================================================================

ROUTINE_03ED15:
#_03ED15: TYX
#_03ED15: RTS

;===================================================================================================

ROUTINE_03ED17:
#_03ED17: TYX
#_03ED18: JSR ROUTINE_03ED24
#_03ED1B: STZ.w $080A,X
#_03ED1E: JSR ROUTINE_0392C0
#_03ED21: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03ED24:
#_03ED24: LDA.w #$0008
#_03ED27: STA.l $7FE802,X

#_03ED2B: LDA.w #$0000
#_03ED2E: STA.l $7FE804,X
#_03ED32: RTS

;===================================================================================================

ROUTINE_03ED33:
#_03ED33: LDA.w $16F0
#_03ED36: CMP.w #$015A
#_03ED39: BEQ CODE_03ED40

#_03ED3B: LDA.w $16E0
#_03ED3E: BNE CODE_03ED53

CODE_03ED40:
#_03ED40: LDA.w $16EC
#_03ED43: STA.b $24

#_03ED45: LDA.w $16EE
#_03ED48: STA.b $26
#_03ED4A: JSR ROUTINE_039552
#_03ED4D: TYA
#_03ED4E: BEQ CODE_03ED53

#_03ED50: JSR ROUTINE_038C85

CODE_03ED53:
#_03ED53: LDA.w $0800,X
#_03ED56: RTS

;===================================================================================================

ROUTINE_03ED57:
#_03ED57: TYX
#_03ED58: JSR ROUTINE_03ED33
#_03ED5B: BEQ CODE_03ED68

#_03ED5D: LDA.w #$050B
#_03ED60: JSR ROUTINE_038CDF
#_03ED63: BNE CODE_03ED68

#_03ED65: JSR AdvanceAIModeUp

CODE_03ED68:
#_03ED68: JMP CODE_0388A2

;===================================================================================================

ROUTINE_03ED6B:
#_03ED6B: TYX
#_03ED6C: JSR ROUTINE_03ED33
#_03ED6F: BEQ CODE_03ED8E

#_03ED71: LDA.w $080C,X
#_03ED74: SBC.w $19EE

#_03ED77: LDA.w #$0000
#_03ED7A: ADC.w #$0506
#_03ED7D: JSR ROUTINE_038CDF
#_03ED80: BNE CODE_03ED8E

#_03ED82: LDA.w #$0D20
#_03ED85: STA.w $0806,X
#_03ED88: JSR Reset_0818_through_081F
#_03ED8B: JSR AdvanceAIModeUp

CODE_03ED8E:
#_03ED8E: LDA.w $081E,X
#_03ED91: CMP.w #$0002

#_03ED94: LDA.w #$3000
#_03ED97: BCS CODE_03ED9C

#_03ED99: LDA.w #$2000

CODE_03ED9C:
#_03ED9C: STA.w $0808,X
#_03ED9F: JMP ROUTINE_038860

;===================================================================================================

ROUTINE_03EDA2:
#_03EDA2: TYX
#_03EDA3: JSR ROUTINE_03ED33
#_03EDA6: BEQ CODE_03EE0E

#_03EDA8: LDA.w $05A0
#_03EDAB: AND.w #$001F
#_03EDAE: CMP.w #$001F

#_03EDB1: LDA.w $081E,X
#_03EDB4: ADC.w #$0000
#_03EDB7: STA.w $081E,X
#_03EDBA: ADC.w $081C,X
#_03EDBD: CMP.w #$0030
#_03EDC0: BCC CODE_03EDC5

#_03EDC2: LDA.w #$0030

CODE_03EDC5:
#_03EDC5: STA.w $081C,X
#_03EDC8: CLC
#_03EDC9: ADC.w $080E,X
#_03EDCC: STA.w $080E,X

#_03EDCF: LDY.w $0816,X
#_03EDD2: LDA.w UNREACH_03EE11,Y
#_03EDD5: ADC.w $0562
#_03EDD8: CMP.w $080E,X
#_03EDDB: BCS CODE_03EE0E

#_03EDDD: LDA.w UNREACH_03EE15,Y
#_03EDE0: ADC.w $0562
#_03EDE3: STA.w $080E,X

#_03EDE6: LDA.w UNREACH_03EE19,Y
#_03EDE9: STA.w $080A,X
#_03EDEC: JSR Reset_0818_through_081F
#_03EDEF: JSR Random
#_03EDF2: AND.w #$0007
#_03EDF5: BEQ CODE_03EE0B

#_03EDF7: LDA.w #$FFF8
#_03EDFA: STA.w $081C,X

#_03EDFD: LDA.w #$0009
#_03EE00: STA.w $04AA

#_03EE03: LDA.w #$016C
#_03EE06: STA.w $0810,X
#_03EE09: BRA CODE_03EE0E

CODE_03EE0B:
#_03EE0B: JSR AdvanceAIModeUp

CODE_03EE0E:
#_03EE0E: JMP ROUTINE_0388AA

UNREACH_03EE11:
#_03EE11: db $80,$05,$80,$04

UNREACH_03EE15:
#_03EE15: db $80,$08,$00,$09

UNREACH_03EE19:
#_03EE19: db $00,$FD,$80,$FB

;===================================================================================================

ROUTINE_03EE1D:
#_03EE1D: TYX
#_03EE1E: JSR ROUTINE_03ED33
#_03EE21: BEQ .exit

#_03EE23: LDA.w $05A0
#_03EE26: AND.w #$000F
#_03EE29: BNE CODE_03EE31

#_03EE2B: LDA.w #$0056
#_03EE2E: STA.w $04AA

CODE_03EE31:
#_03EE31: JSR ROUTINE_03F012
#_03EE34: BEQ .exit

#_03EE36: LDA.w #$0508
#_03EE39: JSR ROUTINE_038CDF
#_03EE3C: BNE CODE_03EE58

#_03EE3E: JSR Reset_0818_through_081F
#_03EE41: JSR Random
#_03EE44: AND.w #$0003
#_03EE47: BEQ CODE_03EE58

#_03EE49: LDA.w #$0D20
#_03EE4C: STA.w $0806,X

#_03EE4F: LDA.w #$0009
#_03EE52: STA.w $04AA
#_03EE55: JSR AdvanceAIModeUp

CODE_03EE58:
#_03EE58: LDA.w #$FE00

#_03EE5B: LDY.w #$301C
#_03EE5E: JSR ROUTINE_038CAA
#_03EE61: JMP ROUTINE_038860

.exit
#_03EE64: RTS

;===================================================================================================

ROUTINE_03EE65:
#_03EE65: TYX
#_03EE66: JSR ROUTINE_03ED33
#_03EE69: BEQ .exit

#_03EE6B: CLC

#_03EE6C: LDA.w $081E,X
#_03EE6F: ADC.w #$0001
#_03EE72: STA.w $081E,X
#_03EE75: ADC.w $081C,X
#_03EE78: BMI CODE_03EE82

#_03EE7A: CMP.w #$0060
#_03EE7D: BCC CODE_03EE82

#_03EE7F: LDA.w #$0060

CODE_03EE82:
#_03EE82: STA.w $081C,X
#_03EE85: CLC
#_03EE86: ADC.w $080A,X
#_03EE89: CMP.w #$FFF0
#_03EE8C: BPL CODE_03EE90

#_03EE8E: BCC CODE_03EE9F

CODE_03EE90:
#_03EE90: LDA.w #$0057
#_03EE93: STA.w $04AA
#_03EE96: JSR AdvanceAIModeUp
#_03EE99: JSR Reset_0818_through_081F

#_03EE9C: LDA.w #$FFF0

CODE_03EE9F:
#_03EE9F: STA.w $080A,X

#_03EEA2: LDA.w #$FE00
#_03EEA5: LDY.w #$301C
#_03EEA8: JSR ROUTINE_038CAA
#_03EEAB: JMP ROUTINE_038860

.exit
#_03EEAE: RTS

;===================================================================================================

ROUTINE_03EEAF:
#_03EEAF: TYX
#_03EEB0: JSR ROUTINE_03ED33
#_03EEB3: BEQ .exit

#_03EEB5: JSR ROUTINE_03F000
#_03EEB8: BEQ .exit

#_03EEBA: LDA.w $080C,X
#_03EEBD: SBC.w $19EE

#_03EEC0: LDA.w #$0000
#_03EEC3: ADC.w #$0509
#_03EEC6: JSR ROUTINE_038CDF
#_03EEC9: BNE CODE_03EED4

#_03EECB: JSR Reset_0818_through_081F

#_03EECE: LDA.w #$0174
#_03EED1: STA.w $0810,X

CODE_03EED4:
#_03EED4: LDA.w #$FE00

#_03EED7: LDY.w #$301C
#_03EEDA: JSR ROUTINE_038CAA
#_03EEDD: JMP ROUTINE_038860

.exit
#_03EEE0: RTS

;===================================================================================================

ROUTINE_03EEE1:
#_03EEE1: JMP ROUTINE_038C84

;===================================================================================================

ROUTINE_03EEE4:
#_03EEE4: TYX
#_03EEE5: JSR ROUTINE_03ED33
#_03EEE8: BEQ .exit

#_03EEEA: JSR ROUTINE_03F000
#_03EEED: BEQ .exit

#_03EEEF: LDA.w $080C,X
#_03EEF2: SBC.w $19EE

#_03EEF5: LDA.w #$0000
#_03EEF8: ADC.w #$0504
#_03EEFB: JSR ROUTINE_038CDF
#_03EEFE: BNE CODE_03EF4D

#_03EF00: JSR ROUTINE_03894A
#_03EF03: BEQ .exit

#_03EF05: LDA.w $080C,X
#_03EF08: SBC.w $19EE
#_03EF0B: BCS CODE_03EF11

#_03EF0D: EOR.w #$FFFF
#_03EF10: INC A

CODE_03EF11:
#_03EF11: CMP.w #$0100
#_03EF14: BCS CODE_03EF1E

CODE_03EF16:
#_03EF16: STZ.w $0816,X
#_03EF19: JSR AdvanceAIModeUp
#_03EF1C: BRA CODE_03EF4D

CODE_03EF1E:
#_03EF1E: LDA.w $080E,X
#_03EF21: SBC.w $19F0
#_03EF24: BCS CODE_03EF2A

#_03EF26: EOR.w #$FFFF
#_03EF29: INC A

CODE_03EF2A:
#_03EF2A: CMP.w #$0100
#_03EF2D: BCS CODE_03EF48

#_03EF2F: LDA.w $080C,X
#_03EF32: SBC.w $19EE

#_03EF35: LDA.w #$0018
#_03EF38: BCC CODE_03EF3D

#_03EF3A: LDA.w #$FFE8

CODE_03EF3D:
#_03EF3D: STA.w $0816,X

#_03EF40: LDA.w #$0178
#_03EF43: STA.w $0810,X
#_03EF46: BRA CODE_03EF4D

CODE_03EF48:
#_03EF48: JSR Reset_0818_through_081F
#_03EF4B: BRA CODE_03EF16

CODE_03EF4D:
#_03EF4D: LDA.w #$FE00

#_03EF50: LDY.w #$201C
#_03EF53: JSR ROUTINE_038CAA
#_03EF56: JMP ROUTINE_038860

.exit
#_03EF59: RTS

;===================================================================================================

ROUTINE_03EF5A:
#_03EF5A: TYX

#_03EF5B: LDA.w #$0501
#_03EF5E: JSR ROUTINE_038D39
#_03EF61: JSR ROUTINE_03ED33
#_03EF64: BEQ .exit

#_03EF66: JSR ROUTINE_03F000
#_03EF69: BEQ .exit

#_03EF6B: JSR ROUTINE_03894A
#_03EF6E: BEQ .exit

#_03EF70: CLC

#_03EF71: LDA.w $080E,X
#_03EF74: ADC.w #$0018
#_03EF77: STA.w $080E,X
#_03EF7A: INC.w $0816,X

#_03EF7D: LDA.w $0816,X
#_03EF80: CMP.w #$0008
#_03EF83: BCC CODE_03EFA2

#_03EF85: LDA.w $19F0
#_03EF88: SBC.w #$1000
#_03EF8B: STA.b $20

#_03EF8D: LDA.w $080E,X
#_03EF90: SBC.b $20
#_03EF92: CMP.w #$0F80
#_03EF95: BCC CODE_03EFA2

#_03EF97: CMP.w #$1080
#_03EF9A: BCS CODE_03EFA2

#_03EF9C: LDA.w #$0174
#_03EF9F: STA.w $0810,X

CODE_03EFA2:
#_03EFA2: LDA.w #$FE00

#_03EFA5: LDY.w #$201C
#_03EFA8: JSR ROUTINE_038CAA
#_03EFAB: JMP ROUTINE_038860

.exit
#_03EFAE: RTS

;===================================================================================================

ROUTINE_03EFAF:
#_03EFAF: TYX

#_03EFB0: LDA.w $0816,X
#_03EFB3: ASL A

#_03EFB4: LDA.w #$0000
#_03EFB7: ADC.w #$0502
#_03EFBA: JSR ROUTINE_038D39
#_03EFBD: CLC

#_03EFBE: LDA.w $080C,X
#_03EFC1: ADC.w $0816,X
#_03EFC4: STA.w $080C,X
#_03EFC7: JSR ROUTINE_03ED33
#_03EFCA: BEQ .exit

#_03EFCC: JSR ROUTINE_03F000
#_03EFCF: BEQ .exit

#_03EFD1: JSR ROUTINE_03894A
#_03EFD4: BEQ .exit

#_03EFD6: LDA.w $19EE
#_03EFD9: SBC.w #$1000
#_03EFDC: STA.b $20

#_03EFDE: LDA.w $080C,X
#_03EFE1: SBC.b $20
#_03EFE3: CMP.w #$0F80
#_03EFE6: BCC CODE_03EFF3

#_03EFE8: CMP.w #$1080
#_03EFEB: BCS CODE_03EFF3

#_03EFED: LDA.w #$0174
#_03EFF0: STA.w $0810,X

CODE_03EFF3:
#_03EFF3: LDA.w #$FE00

#_03EFF6: LDY.w #$201C
#_03EFF9: JSR ROUTINE_038CAA
#_03EFFC: JMP ROUTINE_038860

.exit
#_03EFFF: RTS

;===================================================================================================

ROUTINE_03F000:
#_03F000: LDY.w #$0008

#_03F003: LDA.w #$0020
#_03F006: JSR ROUTINE_039664

#_03F009: LDY.w #$0008
#_03F00C: LDA.w #$0020
#_03F00F: JSR ROUTINE_039C2D

;===================================================================================================

ROUTINE_03F012:
#_03F012: LDY.w #$0050
#_03F015: JSR ROUTINE_0392EE
#_03F018: BEQ CODE_03F025

#_03F01A: JSR ROUTINE_039385
#_03F01D: BNE CODE_03F025

#_03F01F: JSR ROUTINE_038A25_0020
#_03F022: JSR ROUTINE_038C85

CODE_03F025:
#_03F025: LDA.w $0800,X
#_03F028: RTS

;===================================================================================================

ROUTINE_03F029:
#_03F029: LDA.w $04F4
#_03F02C: BEQ CODE_03F036

#_03F02E: JSR ROUTINE_038A25_0020
#_03F031: JSR ROUTINE_038242
#_03F034: SEC
#_03F035: RTS

CODE_03F036:
#_03F036: LDA.w #ROUTINE_038242
#_03F039: JSR ROUTINE_0389C1
#_03F03C: BEQ CODE_03F051

#_03F03E: LDY.w #$0050
#_03F041: JSR ROUTINE_0392EE
#_03F044: BEQ CODE_03F053

#_03F046: JSR ROUTINE_039385
#_03F049: BNE CODE_03F053

#_03F04B: JSR ROUTINE_038A25_0020
#_03F04E: JSR ROUTINE_038236

CODE_03F051:
#_03F051: SEC
#_03F052: RTS

CODE_03F053:
#_03F053: CLC
#_03F054: RTS

;===================================================================================================

ROUTINE_03F055:
#_03F055: TYX
#_03F056: JSR ROUTINE_03F159
#_03F059: JSR ROUTINE_03F082

#_03F05C: LDA.w #$0100
#_03F05F: JSR ROUTINE_03F065
#_03F062: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03F065:
#_03F065: PHA

#_03F066: LDA.w #$0200
#_03F069: STA.b $20
#_03F06B: PLA
#_03F06C: STA.b $2C
#_03F06E: STA.l $7FE812,X
#_03F072: JSR ROUTINE_03A04D
#_03F075: JSR ROUTINE_03F27F

#_03F078: LDA.w UNREACH_03F245,Y
#_03F07B: STA.w $0806,X
#_03F07E: JSR Reset_0818_through_081F
#_03F081: RTS

;===================================================================================================

ROUTINE_03F082:
#_03F082: LDA.w $081C,X
#_03F085: STA.l $7FE816,X
#_03F089: JSR ROUTINE_0386CB

#_03F08C: LDA.w #$0001
#_03F08F: STA.w $0816,X

#_03F092: LDA.w #$0003
#_03F095: STA.l $7FE814,X
#_03F099: RTS

;===================================================================================================

ROUTINE_03F09A:
#_03F09A: TYX
#_03F09B: JSR ROUTINE_03F029
#_03F09E: BCS .exit

#_03F0A0: LDY.w #$0008
#_03F0A3: LDA.w #$0028
#_03F0A6: JSR ROUTINE_039664

#_03F0A9: LDA.b $22
#_03F0AB: BNE .exit

#_03F0AD: DEC.w $0816,X
#_03F0B0: BNE CODE_03F109

#_03F0B2: LDA.l $7FE814,X
#_03F0B6: BEQ CODE_03F0D7

#_03F0B8: DEC A
#_03F0B9: STA.l $7FE814,X
#_03F0BD: BNE CODE_03F0D7

#_03F0BF: LDA.w #$0043
#_03F0C2: STA.w $04AA

#_03F0C5: LDA.w #$018C
#_03F0C8: STA.w $0810,X

#_03F0CB: LDA.w #$0001
#_03F0CE: STA.w $0816,X

#_03F0D1: LDA.l $7FE816,X
#_03F0D5: BRA CODE_03F0F7

CODE_03F0D7:
#_03F0D7: JSR AdvanceAIModeUp

#_03F0DA: LDA.w #$0200
#_03F0DD: STA.b $20

#_03F0DF: LDA.w #$FFC0
#_03F0E2: STA.w $0816,X

#_03F0E5: LDA.w $0810,X
#_03F0E8: CMP.w #$018E
#_03F0EB: BNE CODE_03F0F3

#_03F0ED: LDA.l $7FE816,X
#_03F0F1: BRA CODE_03F0F7

CODE_03F0F3:
#_03F0F3: LDA.l $7FE812,X

CODE_03F0F7:
#_03F0F7: STA.b $2C
#_03F0F9: STA.l $7FE812,X
#_03F0FD: JSR ROUTINE_03A04D
#_03F100: JSR ROUTINE_03F27F

#_03F103: LDA.w UNREACH_03F245,Y
#_03F106: STA.w $0806,X

CODE_03F109:
#_03F109: LDA.w #$FE00

#_03F10C: LDY.w #$201C
#_03F10F: JSR ROUTINE_038CAA
#_03F112: JMP ROUTINE_038860

.exit
#_03F115: RTS

;===================================================================================================

ROUTINE_03F116:
#_03F116: JMP ROUTINE_03F290

;===================================================================================================

ROUTINE_03F119:
#_03F119: JMP ROUTINE_03F09A

;===================================================================================================

ROUTINE_03F11C:
#_03F11C: PHY
#_03F11D: JSR ROUTINE_03F290
#_03F120: PLX

#_03F121: LDA.w $0810,X
#_03F124: CMP.w #$018E
#_03F127: BEQ .exit

#_03F129: LDA.w #$0196
#_03F12C: STA.w $0810,X

.exit
#_03F12F: RTS

;===================================================================================================

ROUTINE_03F130:
#_03F130: TYX

#_03F131: LDA.l $7E2530
#_03F135: BNE .exit

#_03F137: JSR ROUTINE_03F159

#_03F13A: LDA.w #$0080
#_03F13D: STA.w $0816,X
#_03F140: JSR ROUTINE_0386EC
#_03F143: JSR Reset_0818_through_081F
#_03F146: JMP AdvanceAIModeUp

.exit
#_03F149: RTS

;===================================================================================================

ROUTINE_03F14A:
#_03F14A: LDA.w $05A0
#_03F14D: AND.w #$001F
#_03F150: BNE .exit

#_03F152: LDA.w #$0058
#_03F155: STA.w $04AA

.exit
#_03F158: RTS

;===================================================================================================

ROUTINE_03F159:
#_03F159: LDA.w #$0001
#_03F15C: STA.w $0812,X
#_03F15F: JMP CODE_038222

;===================================================================================================

ROUTINE_03F162:
#_03F162: TYX

#_03F163: LDA.w $0816,X
#_03F166: CMP.w #$0060

#_03F169: LDA.w #$0719
#_03F16C: BCS CODE_03F188

#_03F16E: JSR ROUTINE_03F14A
#_03F171: JSR ROUTINE_038173
#_03F174: JSR ROUTINE_03F029
#_03F177: BCS .exit

#_03F179: LDA.w #$0001
#_03F17C: STA.w $0812,X

#_03F17F: LDA.w #$8001
#_03F182: STA.w $0800,X

#_03F185: LDA.w #$0701

CODE_03F188:
#_03F188: JSR ROUTINE_038D39
#_03F18B: DEC.w $0816,X
#_03F18E: BNE CODE_03F19F

#_03F190: LDA.w #$0010
#_03F193: STA.w $0816,X
#_03F196: JSR ROUTINE_03F265
#_03F199: JSR ROUTINE_03F2E6
#_03F19C: JSR AdvanceAIModeUp

CODE_03F19F:
#_03F19F: LDA.w #$FE00

#_03F1A2: LDY.w #$201C
#_03F1A5: JSR ROUTINE_038CAA
#_03F1A8: JMP ROUTINE_038860

.exit
#_03F1AB: RTS

;===================================================================================================

ROUTINE_03F1AC:
#_03F1AC: TYX
#_03F1AD: JSR ROUTINE_03F029
#_03F1B0: BCS .exit

#_03F1B2: DEC.w $0816,X
#_03F1B5: BNE CODE_03F1CF

#_03F1B7: LDA.w #$0010
#_03F1BA: STA.w $0816,X
#_03F1BD: JSR ROUTINE_03F265

#_03F1C0: LDA.b $2C
#_03F1C2: STA.l $7FE812,X
#_03F1C6: JSR ROUTINE_03F2E6
#_03F1C9: JSR Reset_0818_through_081F
#_03F1CC: JSR AdvanceAIModeUp

CODE_03F1CF:
#_03F1CF: LDA.w #$FE00

#_03F1D2: LDY.w #$201C
#_03F1D5: JSR ROUTINE_038CAA
#_03F1D8: JMP ROUTINE_038860

.exit
#_03F1DB: RTS

;===================================================================================================

ROUTINE_03F1DC:
#_03F1DC: TYX
#_03F1DD: JSR ROUTINE_03F029
#_03F1E0: BCS .exit

#_03F1E2: LDY.w #$0008
#_03F1E5: LDA.w #$0028
#_03F1E8: JSR ROUTINE_039C2D

#_03F1EB: LDY.w #$0008
#_03F1EE: LDA.w #$0028
#_03F1F1: JSR ROUTINE_039664

#_03F1F4: LDA.b $22
#_03F1F6: BNE .exit

#_03F1F8: DEC.w $0816,X
#_03F1FB: BNE CODE_03F238

#_03F1FD: LDA.w #$0043
#_03F200: STA.w $04AA

#_03F203: LDA.w #$FFC0
#_03F206: STA.w $0816,X
#_03F209: JSR ROUTINE_03F265

#_03F20C: LDA.w #$0200
#_03F20F: STA.b $20
#_03F211: CLC

#_03F212: LDA.b $2C
#_03F214: STA.l $7FE812,X
#_03F218: ADC.w #$0040
#_03F21B: AND.w #$0380
#_03F21E: JSR ROUTINE_03A04D

#_03F221: LDA.w #$0010
#_03F224: STA.l $7FE818,X
#_03F228: STA.l $7FE81A,X
#_03F22C: JSR ROUTINE_03F27F

#_03F22F: LDA.w UNREACH_03F245,Y
#_03F232: STA.w $0806,X
#_03F235: JSR AdvanceAIModeUp

CODE_03F238:
#_03F238: LDA.w #$FE00

#_03F23B: LDY.w #$201C
#_03F23E: JSR ROUTINE_038CAA
#_03F241: JMP ROUTINE_038860

.exit
#_03F244: RTS

UNREACH_03F245:
#_03F245: db $4B,$0D,$4B,$0D,$4B,$0D,$4B,$0D
#_03F24D: db $4A,$0D,$4A,$0D,$4A,$0D,$4A,$0D
#_03F255: db $4A,$0D,$4E,$0D,$4E,$0D,$4E,$0D
#_03F25D: db $4F,$0D,$4F,$0D,$4F,$0D,$4B,$0D

;===================================================================================================

ROUTINE_03F265:
#_03F265: PHX

#_03F266: LDA.w $19EE
#_03F269: STA.b $20

#_03F26B: LDA.w $19F0
#_03F26E: STA.b $22

#_03F270: LDA.w $080C,X
#_03F273: STA.b $24

#_03F275: LDA.w $080E,X
#_03F278: STA.b $26
#_03F27A: JSR ROUTINE_02FB70_bounce
#_03F27D: PLX
#_03F27E: RTS

;===================================================================================================

ROUTINE_03F27F:
#_03F27F: LDA.b $2C
#_03F281: AND.w #$03FF
#_03F284: ASL A
#_03F285: ASL A
#_03F286: ASL A
#_03F287: STA.b $2C

#_03F289: LDA.b $2D
#_03F28B: AND.w #$001E
#_03F28E: TAY
#_03F28F: RTS

;===================================================================================================

ROUTINE_03F290:
#_03F290: TYX
#_03F291: JSR ROUTINE_03F029
#_03F294: BCS .exit

#_03F296: LDY.w #$0008
#_03F299: LDA.w #$0028
#_03F29C: JSR ROUTINE_039C2D

#_03F29F: LDY.w #$0008
#_03F2A2: LDA.w #$0028
#_03F2A5: JSR ROUTINE_039664

#_03F2A8: LDA.b $22
#_03F2AA: BEQ CODE_03F2AD

.exit
#_03F2AC: RTS

CODE_03F2AD:
#_03F2AD: JSR ROUTINE_03F310
#_03F2B0: CLC

#_03F2B1: LDA.w $0816,X
#_03F2B4: ADC.w #$0008
#_03F2B7: STA.w $0816,X
#_03F2BA: ADC.w $080A,X
#_03F2BD: BMI CODE_03F2D7

#_03F2BF: LDA.l $7FE812,X
#_03F2C3: STA.b $2C
#_03F2C5: JSR ROUTINE_03F2E6

#_03F2C8: LDA.w #$0010
#_03F2CB: STA.w $0816,X
#_03F2CE: JSR Reset_0818_through_081F
#_03F2D1: JSR AdvanceAIModeDown

#_03F2D4: LDA.w #$0000

CODE_03F2D7:
#_03F2D7: STA.w $080A,X

#_03F2DA: LDA.w #$FE00
#_03F2DD: LDY.w #$201C
#_03F2E0: JSR ROUTINE_038CAA
#_03F2E3: JMP ROUTINE_038860

;===================================================================================================

ROUTINE_03F2E6:
#_03F2E6: JSR ROUTINE_03F27F

#_03F2E9: LDA.w UNREACH_03F2F0,Y
#_03F2EC: STA.w $0806,X
#_03F2EF: RTS

UNREACH_03F2F0:
#_03F2F0: db $49,$0D,$49,$0D,$49,$0D,$49,$0D
#_03F2F8: db $48,$0D,$48,$0D,$48,$0D,$48,$0D
#_03F300: db $48,$0D,$4C,$0D,$4C,$0D,$4C,$0D
#_03F308: db $4D,$0D,$4D,$0D,$4D,$0D,$49,$0D

;===================================================================================================

ROUTINE_03F310:
#_03F310: STZ.b $3E

CODE_03F312:
#_03F312: LDA.w $081A,X
#_03F315: ASL A

#_03F316: LDA.w #$0100
#_03F319: BCC CODE_03F31E

#_03F31B: LDA.w #$FF00

CODE_03F31E:
#_03F31E: STA.b $3C
#_03F320: CLC
#_03F321: ADC.w $0804,X
#_03F324: TAY

#_03F325: LDA.w $0802,X
#_03F328: JSR ROUTINE_038E3D

#_03F32B: LDA.b $34
#_03F32D: BEQ CODE_03F355

#_03F32F: STZ.w $081A,X

#_03F332: LDA.w $0818,X
#_03F335: BNE CODE_03F355

#_03F337: LDA.b $3E
#_03F339: BEQ CODE_03F34C

#_03F33B: LDA.l $7FE81A,X
#_03F33F: EOR.w #$FFFF
#_03F342: INC A
#_03F343: STA.l $7FE81A,X
#_03F347: STA.w $081A,X
#_03F34A: BRA CODE_03F395

CODE_03F34C:
#_03F34C: INC.b $3E

#_03F34E: LDA.l $7FE818,X
#_03F352: STA.w $0818,X

CODE_03F355:
#_03F355: LDA.w $0818,X
#_03F358: ASL A

#_03F359: LDA.w #$0100
#_03F35C: BCC CODE_03F361

#_03F35E: LDA.w #$FF00

CODE_03F361:
#_03F361: CLC
#_03F362: ADC.w $0802,X

#_03F365: LDY.w $0804,X
#_03F368: JSR ROUTINE_038E3D

#_03F36B: LDA.b $34
#_03F36D: BEQ CODE_03F395

#_03F36F: STZ.w $0818,X

#_03F372: LDA.w $081A,X
#_03F375: BNE CODE_03F395

#_03F377: LDA.b $3E
#_03F379: BEQ CODE_03F389

#_03F37B: LDA.l $7FE818,X
#_03F37F: EOR.w #$FFFF
#_03F382: INC A
#_03F383: STA.l $7FE818,X
#_03F387: BRA CODE_03F395

CODE_03F389:
#_03F389: INC.b $3E

#_03F38B: LDA.l $7FE81A,X
#_03F38F: STA.w $081A,X
#_03F392: JMP CODE_03F312

CODE_03F395:
#_03F395: CLC

#_03F396: LDA.w $080E,X
#_03F399: ADC.w $081A,X
#_03F39C: STA.w $080E,X
#_03F39F: CLC

#_03F3A0: LDA.w $080C,X
#_03F3A3: ADC.w $0818,X
#_03F3A6: STA.w $080C,X
#_03F3A9: RTS

;===================================================================================================

ROUTINE_03F3AA:
#_03F3AA: TYX

#_03F3AB: LDA.w $04F4
#_03F3AE: BEQ CODE_03F3B9

#_03F3B0: JSR ROUTINE_038A25_0020
#_03F3B3: JSR ROUTINE_038242
#_03F3B6: JMP ROUTINE_03F4B7

CODE_03F3B9:
#_03F3B9: LDA.w #$000C
#_03F3BC: STA.w $1F2C

#_03F3BF: LDA.w #$0008
#_03F3C2: STA.w $1F2E
#_03F3C5: JSR ROUTINE_03F14A

#_03F3C8: LDA.w $19CC
#_03F3CB: ASL A
#_03F3CC: TAY
#_03F3CD: PHY

#_03F3CE: LDA.w $0816,X
#_03F3D1: AND.w #$00FF
#_03F3D4: CMP.w #$00FF
#_03F3D7: BNE CODE_03F3E5

#_03F3D9: PLA

#_03F3DA: LDY.w #$0058
#_03F3DD: LDA.w #$0020
#_03F3E0: JSR ROUTINE_039664
#_03F3E3: BRA CODE_03F446

CODE_03F3E5:
#_03F3E5: INC.w $0816,X
#_03F3E8: CMP.w #$00C0

#_03F3EB: LDA.w #$0000
#_03F3EE: BCC CODE_03F3F3

#_03F3F0: LDA.w #$0008

CODE_03F3F3:
#_03F3F3: CLC
#_03F3F4: ADC.w UNREACH_03F4A7,Y
#_03F3F7: JSR ROUTINE_038D39
#_03F3FA: PLA
#_03F3FB: ASL A
#_03F3FC: TAY

#_03F3FD: LDA.w UNREACH_03F487,Y
#_03F400: ADC.w $19EE
#_03F403: STA.w $080C,X

#_03F406: LDA.w UNREACH_03F489,Y
#_03F409: ADC.w $19F0
#_03F40C: STA.w $080E,X

#_03F40F: LDA.w $053A
#_03F412: AND.w #$8000
#_03F415: BEQ CODE_03F462

#_03F417: STZ.w $0814,X

#_03F41A: LDA.w #$0053
#_03F41D: STA.w $04A8

#_03F420: LDA.w $0816,X
#_03F423: AND.w #$00FF
#_03F426: CMP.w #$00C0
#_03F429: BCC CODE_03F437

#_03F42B: LDA.w $0816,X
#_03F42E: AND.w #$FF00
#_03F431: ORA.w #$00C0
#_03F434: STA.w $0816,X

CODE_03F437:
#_03F437: CLC

#_03F438: LDA.w $0816,X
#_03F43B: ADC.w #$0100
#_03F43E: STA.w $0816,X
#_03F441: CMP.w #$0800
#_03F444: BCC CODE_03F462

CODE_03F446:
#_03F446: JSR ROUTINE_03F265

#_03F449: LDA.w #$0400
#_03F44C: STA.b $20

#_03F44E: LDA.b $2C
#_03F450: EOR.w #$0200
#_03F453: JSR ROUTINE_03A04D
#_03F456: JSR ROUTINE_03F4B7

#_03F459: LDA.w #$FF80
#_03F45C: STA.w $0816,X
#_03F45F: JSR AdvanceAIModeUp

CODE_03F462:
#_03F462: LDA.w #$FE00

#_03F465: LDY.w #$201C
#_03F468: JSR ROUTINE_038CAA
#_03F46B: INC.w $0814,X
#_03F46E: BNE CODE_03F473

#_03F470: DEC.w $0814,X

CODE_03F473:
#_03F473: LDA.w $0814,X
#_03F476: CMP.w #$0008
#_03F479: BCS CODE_03F484

#_03F47B: LDA.w $0808,X
#_03F47E: ORA.w #$0600
#_03F481: STA.w $0808,X

CODE_03F484:
#_03F484: JMP ROUTINE_038860

UNREACH_03F487:
#_03F487: db $60,$00

UNREACH_03F489:
#_03F489: db $50,$00,$60,$FF,$30,$00,$30,$FF
#_03F491: db $00,$00,$60,$FF,$B0,$FF,$20,$00
#_03F499: db $50,$FF,$A0,$00,$B0,$FF,$D0,$00
#_03F4A1: db $00,$00,$A0,$00,$30,$00

UNREACH_03F4A7:
#_03F4A7: db $07,$07,$08,$07,$09,$07,$0A,$07
#_03F4AF: db $0B,$07,$0C,$07,$0D,$07,$0E,$07

;===================================================================================================

ROUTINE_03F4B7:
#_03F4B7: LDA.w #$0018
#_03F4BA: STA.w $1F2C

#_03F4BD: LDA.w #$0010
#_03F4C0: STA.w $1F2E
#_03F4C3: RTS

;===================================================================================================

ROUTINE_03F4C4:
#_03F4C4: TYX
#_03F4C5: JSR ROUTINE_03F310

#_03F4C8: LDA.w $0816,X
#_03F4CB: ADC.w #$0010
#_03F4CE: STA.w $0816,X
#_03F4D1: ADC.w $080A,X
#_03F4D4: BMI CODE_03F4EB

#_03F4D6: JSR ROUTINE_03F265
#_03F4D9: JSR ROUTINE_03F2E6

#_03F4DC: LDA.w #$0020
#_03F4DF: STA.w $0816,X
#_03F4E2: JSR Reset_0818_through_081F
#_03F4E5: JSR AdvanceAIModeUp

#_03F4E8: LDA.w #$0000

CODE_03F4EB:
#_03F4EB: STA.w $080A,X

#_03F4EE: LDA.w #$FE00
#_03F4F1: LDY.w #$201C
#_03F4F4: JSR ROUTINE_038CAA
#_03F4F7: JMP ROUTINE_038860

;===================================================================================================

ROUTINE_03F4FA:
#_03F4FA: RTS

;===================================================================================================

ROUTINE_03F4FB:
#_03F4FB: TYX
#_03F4FC: JSR ROUTINE_03F14A
#_03F4FF: JSR ROUTINE_03F029
#_03F502: BCS .exit

#_03F504: LDY.w #$0008
#_03F507: LDA.w #$0028
#_03F50A: JSR ROUTINE_039C2D

#_03F50D: LDA.w #$0701
#_03F510: JSR ROUTINE_038D39
#_03F513: DEC.w $0816,X
#_03F516: BNE CODE_03F52A

#_03F518: LDA.w #$0010
#_03F51B: STA.w $0816,X
#_03F51E: JSR ROUTINE_03F265
#_03F521: JSR ROUTINE_03F2E6

#_03F524: LDA.w #$0194
#_03F527: STA.w $0810,X

CODE_03F52A:
#_03F52A: LDA.w #$FE00

#_03F52D: LDY.w #$201C
#_03F530: JSR ROUTINE_038CAA
#_03F533: JMP ROUTINE_038860

.exit
#_03F536: RTS

;===================================================================================================

ROUTINE_03F537:
#_03F537: TYX

#_03F538: LDA.l $7FE814,X
#_03F53C: BEQ CODE_03F544

#_03F53E: DEC A
#_03F53F: STA.l $7FE814,X
#_03F543: RTS

CODE_03F544:
#_03F544: LDA.l $7FE818,X
#_03F548: ASL A
#_03F549: TAX
#_03F54A: JMP (PTR16_03F54D,X)

PTR16_03F54D:
#_03F54D: dw ROUTINE_03F633
#_03F54F: dw ROUTINE_03F642
#_03F551: dw ROUTINE_03F633
#_03F553: dw ROUTINE_03F651
#_03F555: dw ROUTINE_03F5FD
#_03F557: dw ROUTINE_03F60C
#_03F559: dw ROUTINE_03F60F
#_03F55B: dw ROUTINE_03F60C
#_03F55D: dw ROUTINE_03F61E
#_03F55F: dw ROUTINE_03F62D
#_03F561: dw ROUTINE_03F61E
#_03F563: dw ROUTINE_03F630
#_03F565: dw ROUTINE_03F5ED
#_03F567: dw ROUTINE_03F5F3
#_03F569: dw ROUTINE_03F630
#_03F56B: dw ROUTINE_03F5A0
#_03F56D: dw ROUTINE_03F5A7
#_03F56F: dw ROUTINE_03F5B4
#_03F571: dw ROUTINE_03F5CD
#_03F573: dw ROUTINE_03F58B
#_03F575: dw ROUTINE_03F5A7
#_03F577: dw ROUTINE_03F5B4
#_03F579: dw ROUTINE_03F5CD
#_03F57B: dw ROUTINE_03F592
#_03F57D: dw ROUTINE_03F5A7
#_03F57F: dw ROUTINE_03F5B4
#_03F581: dw ROUTINE_03F5CD
#_03F583: dw ROUTINE_03F599
#_03F585: dw ROUTINE_03F5A7
#_03F587: dw ROUTINE_03F5B4
#_03F589: dw ROUTINE_03F5CD

;===================================================================================================

ROUTINE_03F58B:
#_03F58B: TYX

#_03F58C: LDA.w #$0080
#_03F58F: JMP CODE_03F622

;===================================================================================================

ROUTINE_03F592:
#_03F592: TYX

#_03F593: LDA.w #$0080
#_03F596: JMP CODE_03F613

;===================================================================================================

ROUTINE_03F599:
#_03F599: TYX

#_03F59A: LDA.w #$0080
#_03F59D: JMP CODE_03F601

;===================================================================================================

ROUTINE_03F5A0:
#_03F5A0: TYX

#_03F5A1: LDA.w #$0080
#_03F5A4: JMP CODE_03F637

;===================================================================================================

ROUTINE_03F5A7:
#_03F5A7: TYX

#_03F5A8: LDA.w #$0020
#_03F5AB: JSR ROUTINE_03F667
#_03F5AE: JSR ROUTINE_03F683
#_03F5B1: JMP CODE_03F5E4

;===================================================================================================

ROUTINE_03F5B4:
#_03F5B4: TYX
#_03F5B5: JSR ROUTINE_03F672
#_03F5B8: JSR ROUTINE_03F683
#_03F5BB: JSR ROUTINE_03A07D

#_03F5BE: LDA.b $20
#_03F5C0: STA.l $7FE812,X

#_03F5C4: LDA.b $22
#_03F5C6: STA.l $7FE816,X
#_03F5CA: JMP CODE_03F5CE

;===================================================================================================

ROUTINE_03F5CD:
#_03F5CD: TYX

CODE_03F5CE:
#_03F5CE: CLC

#_03F5CF: LDA.l $7FE812,X
#_03F5D3: ADC.w $080C,X
#_03F5D6: STA.w $080C,X
#_03F5D9: CLC

#_03F5DA: LDA.l $7FE816,X
#_03F5DE: ADC.w $080E,X
#_03F5E1: STA.w $080E,X

CODE_03F5E4:
#_03F5E4: LDA.l $7FE81A,X
#_03F5E8: STA.b $20
#_03F5EA: JMP ($0020)

;===================================================================================================

ROUTINE_03F5ED:
#_03F5ED: TYX

#_03F5EE: LDA.w #$0050
#_03F5F1: BRA CODE_03F601

;===================================================================================================

ROUTINE_03F5F3:
#_03F5F3: TYX

#_03F5F4: LDA.w #$0008
#_03F5F7: JSR ROUTINE_03F667
#_03F5FA: JMP ROUTINE_03F77C

;===================================================================================================

ROUTINE_03F5FD:
#_03F5FD: TYX

#_03F5FE: LDA.w #$0060

CODE_03F601:
#_03F601: JSR ROUTINE_03F667
#_03F604: BEQ CODE_03F609

#_03F606: JMP CODE_03F840

CODE_03F609:
#_03F609: JMP ROUTINE_03F84A

;===================================================================================================

ROUTINE_03F60C:
#_03F60C: JMP ROUTINE_03F771

;===================================================================================================

ROUTINE_03F60F:
#_03F60F: TYX

#_03F610: LDA.w #$0060

CODE_03F613:
#_03F613: JSR ROUTINE_03F667
#_03F616: BEQ CODE_03F61B

#_03F618: JMP CODE_03F86F

CODE_03F61B:
#_03F61B: JMP ROUTINE_03F879

;===================================================================================================

ROUTINE_03F61E:
#_03F61E: TYX

#_03F61F: LDA.w #$0080

CODE_03F622:
#_03F622: JSR ROUTINE_03F667
#_03F625: BEQ CODE_03F62A

#_03F627: JMP CODE_03F818

CODE_03F62A:
#_03F62A: JMP ROUTINE_03F822

;===================================================================================================

ROUTINE_03F62D:
#_03F62D: JMP ROUTINE_03F86E

;===================================================================================================

ROUTINE_03F630:
#_03F630: JMP ROUTINE_03F83F

;===================================================================================================

ROUTINE_03F633:
#_03F633: TYX

#_03F634: LDA.w #$0020

CODE_03F637:
#_03F637: JSR ROUTINE_03F667
#_03F63A: BEQ CODE_03F63F

#_03F63C: JMP CODE_03F772

CODE_03F63F:
#_03F63F: JMP ROUTINE_03F77C

;===================================================================================================

ROUTINE_03F642:
#_03F642: TYX

#_03F643: LDA.w #$0020
#_03F646: JSR ROUTINE_03F667
#_03F649: BEQ CODE_03F64E

#_03F64B: JMP CODE_03F840

CODE_03F64E:
#_03F64E: JMP ROUTINE_03F84A

;===================================================================================================

ROUTINE_03F651:
#_03F651: TYX

#_03F652: LDA.w #$0020
#_03F655: JSR ROUTINE_03F667
#_03F658: BEQ CODE_03F65D

#_03F65A: JMP CODE_03F86F

CODE_03F65D:
#_03F65D: LDA.w #$0000
#_03F660: STA.l $7FE818,X
#_03F664: JMP ROUTINE_03F879

;===================================================================================================

ROUTINE_03F667:
#_03F667: STA.b $20

#_03F669: LDA.l $7FE816,X
#_03F66D: INC A
#_03F66E: CMP.b $20
#_03F670: BCC CODE_03F67E

;===================================================================================================

ROUTINE_03F672:
#_03F672: LDA.l $7FE818,X
#_03F676: INC A
#_03F677: STA.l $7FE818,X

#_03F67B: LDA.w #$0000

CODE_03F67E:
#_03F67E: STA.l $7FE816,X
#_03F682: RTS

;===================================================================================================

ROUTINE_03F683:
#_03F683: PHX
#_03F684: JSR ROUTINE_03A295
#_03F687: PLX

#_03F688: LDA.w #$0300
#_03F68B: STA.b $20

#_03F68D: LDA.b $2C
#_03F68F: ADC.w #$0080
#_03F692: ASL A
#_03F693: SEP #$20
#_03F695: XBA
#_03F696: REP #$20
#_03F698: AND.w #$0006
#_03F69B: TAY

#_03F69C: LDA.w UNREACH_03F6A6,Y
#_03F69F: STA.l $7FE81A,X

#_03F6A3: LDA.b $2C
#_03F6A5: RTS

UNREACH_03F6A6:
#_03F6A6: db $4A,$F8,$7C,$F7,$79,$F8,$22,$F8

;===================================================================================================

ROUTINE_03F84A_long:
#_03F6AE: PHB
#_03F6AF: PHK
#_03F6B0: PLB
#_03F6B1: JSR ROUTINE_03F84A
#_03F6B4: PLB
#_03F6B5: RTL

;===================================================================================================

ROUTINE_03F77C_long:
#_03F6B6: PHB
#_03F6B7: PHK
#_03F6B8: PLB
#_03F6B9: JSR ROUTINE_03F77C
#_03F6BC: PLB
#_03F6BD: RTL

;===================================================================================================

ROUTINE_03F879_long:
#_03F6BE: PHB
#_03F6BF: PHK
#_03F6C0: PLB
#_03F6C1: JSR ROUTINE_03F879
#_03F6C4: PLB
#_03F6C5: RTL

;===================================================================================================

ROUTINE_03F822_long:
#_03F6C6: PHB
#_03F6C7: PHK
#_03F6C8: PLB
#_03F6C9: JSR ROUTINE_03F822
#_03F6CC: PLB
#_03F6CD: RTL

;===================================================================================================

ROUTINE_03F6CE:
#_03F6CE: TYX

#_03F6CF: LDA.w $0806,X
#_03F6D2: ASL A
#_03F6D3: ASL A
#_03F6D4: ASL A
#_03F6D5: ASL A
#_03F6D6: ASL A
#_03F6D7: STA.l $7FE814,X

#_03F6DB: LDA.w #$0000
#_03F6DE: STA.l $7FE818,X
#_03F6E2: STA.l $7FE816,X

#_03F6E6: LDA.w $081C,X
#_03F6E9: CMP.w #$0024
#_03F6EC: BEQ CODE_03F73D

#_03F6EE: CMP.w #$0030
#_03F6F1: BCC CODE_03F716

#_03F6F3: LDY.w #$001B
#_03F6F6: LDA.w $080C,X
#_03F6F9: SBC.w $0560
#_03F6FC: BCC CODE_03F738

#_03F6FE: LDY.w #$0017
#_03F701: CMP.w #$1000
#_03F704: BCS CODE_03F738

#_03F706: LDY.w #$000F
#_03F709: LDA.w $080E,X
#_03F70C: SBC.w $0562
#_03F70F: BCC CODE_03F738

#_03F711: LDY.w #$0013
#_03F714: BRA CODE_03F738

CODE_03F716:
#_03F716: CMP.w #$0028
#_03F719: BNE CODE_03F720

#_03F71B: LDY.w #$000C
#_03F71E: BRA CODE_03F738

CODE_03F720:
#_03F720: CMP.w #$0010
#_03F723: BNE CODE_03F72D

#_03F725: LDY.w #$0004
#_03F728: JSR ROUTINE_03F740
#_03F72B: BRA CODE_03F738

CODE_03F72D:
#_03F72D: CMP.w #$0014
#_03F730: BNE CODE_03F73D

#_03F732: LDY.w #$0008
#_03F735: JSR ROUTINE_03F740

CODE_03F738:
#_03F738: TYA
#_03F739: STA.l $7FE818,X

CODE_03F73D:
#_03F73D: JMP CODE_03F757

;===================================================================================================

ROUTINE_03F740:
#_03F740: LDA.w $0806,X
#_03F743: CMP.w #$0003
#_03F746: BCC .exit

#_03F748: LDA.l $7FE814,X
#_03F74C: SBC.w #$0060
#_03F74F: STA.l $7FE814,X
#_03F753: INY
#_03F754: INY

.exit
#_03F755: RTS

;===================================================================================================

ROUTINE_03F756:
#_03F756: TYX

CODE_03F757:
#_03F757: JSR ROUTINE_0386CB

#_03F75A: LDA.w $18E4
#_03F75D: LDY.w #$0008
#_03F760: CMP.w #$0000
#_03F763: BNE CODE_03F76A

#_03F765: LDA.l $7E7A6E
#_03F769: TAY

CODE_03F76A:
#_03F76A: TYA
#_03F76B: STA.w $081A,X
#_03F76E: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03F771:
#_03F771: TYX

CODE_03F772:
#_03F772: CLC

#_03F773: LDA.w $080E,X
#_03F776: ADC.w $081A,X
#_03F779: STA.w $080E,X

;===================================================================================================

ROUTINE_03F77C:
#_03F77C: INC.w $081C,X

#_03F77F: LDA.w $081C,X
#_03F782: LSR A
#_03F783: LSR A
#_03F784: AND.w #$0006
#_03F787: TAY

#_03F788: LDA.w UNREACH_03F80D,Y
#_03F78B: STA.w $0806,X

CODE_03F78E:
#_03F78E: LDA.w $04F4
#_03F791: BEQ CODE_03F799

#_03F793: JSR ROUTINE_038A25_0020
#_03F796: JMP ROUTINE_03FB04

CODE_03F799:
#_03F799: LDA.w #ROUTINE_03FB04
#_03F79C: JSR ROUTINE_0389C1
#_03F79F: BEQ .exit

#_03F7A1: LDA.l $7FE81E,X
#_03F7A5: CMP.w #$8000
#_03F7A8: BCC CODE_03F7AD

#_03F7AA: JMP ROUTINE_03FB04

CODE_03F7AD:
#_03F7AD: LDA.w $081C,X
#_03F7B0: ROR A
#_03F7B1: BCS CODE_03F7C5

#_03F7B3: LDY.w #$0008
#_03F7B6: LDA.w #$0020
#_03F7B9: JSR ROUTINE_039664

#_03F7BC: LDY.w #$0008
#_03F7BF: LDA.w #$0020
#_03F7C2: JSR ROUTINE_039C2D

CODE_03F7C5:
#_03F7C5: LDA.l $7FE81E,X
#_03F7C9: BEQ CODE_03F800

#_03F7CB: LDY.w #$0050
#_03F7CE: JSR ROUTINE_0392EE
#_03F7D1: BEQ CODE_03F7FB

#_03F7D3: JSR ROUTINE_039385
#_03F7D6: BNE CODE_03F7FB

#_03F7D8: LDA.w $0556
#_03F7DB: CMP.w #$0001
#_03F7DE: BEQ CODE_03F7F8

#_03F7E0: BCS CODE_03F7EA

#_03F7E2: LDA.w $18E4
#_03F7E5: CMP.w #$0004
#_03F7E8: BCC CODE_03F7F8

CODE_03F7EA:
#_03F7EA: JSR ROUTINE_03867C
#_03F7ED: CMP.w #$0200
#_03F7F0: BCC CODE_03F7F8

#_03F7F2: LDA.w #$0086
#_03F7F5: JSR ROUTINE_038A2D

CODE_03F7F8:
#_03F7F8: JSR ROUTINE_03FAF7

CODE_03F7FB:
#_03F7FB: LDA.w $0812,X
#_03F7FE: BEQ .exit

CODE_03F800:
#_03F800: LDA.w #$FE00

#_03F803: LDY.w #$201C
#_03F806: JSR ROUTINE_038CAA
#_03F809: JMP ROUTINE_038860

.exit
#_03F80C: RTS

UNREACH_03F80D:
#_03F80D: db $DC,$0C,$DE,$0C,$DF,$0C,$DD,$0C
#_03F815: db $BB,$60

;===================================================================================================

ROUTINE_03F817:
#_03F817: TYX

CODE_03F818:
#_03F818: SEC

#_03F819: LDA.w $080E,X
#_03F81C: SBC.w $081A,X
#_03F81F: STA.w $080E,X

;===================================================================================================

ROUTINE_03F822:
#_03F822: INC.w $081C,X

#_03F825: LDA.w $081C,X
#_03F828: LSR A
#_03F829: LSR A
#_03F82A: AND.w #$0006
#_03F82D: TAY

#_03F82E: LDA.w UNREACH_03F837,Y
#_03F831: STA.w $0806,X
#_03F834: JMP CODE_03F78E

UNREACH_03F837:
#_03F837: db $E0,$0C,$E2,$0C,$E3,$0C,$E1,$0C

;===================================================================================================

ROUTINE_03F83F:
#_03F83F: TYX

CODE_03F840:
#_03F840: CLC

#_03F841: LDA.w $080C,X
#_03F844: ADC.w $081A,X
#_03F847: STA.w $080C,X

;===================================================================================================

ROUTINE_03F84A:
#_03F84A: LDA.w $081C,X
#_03F84D: INC A
#_03F84E: CMP.w #$0018
#_03F851: BCC CODE_03F856

#_03F853: LDA.w #$0000

CODE_03F856:
#_03F856: STA.w $081C,X
#_03F859: LSR A
#_03F85A: LSR A
#_03F85B: AND.w #$0006
#_03F85E: TAY

#_03F85F: LDA.w UNREACH_03F868,Y
#_03F862: STA.w $0806,X
#_03F865: JMP CODE_03F78E

UNREACH_03F868:
#_03F868: db $E5,$0C,$E7,$0C,$E9,$0C

;===================================================================================================

ROUTINE_03F86E:
#_03F86E: TYX

CODE_03F86F:
#_03F86F: SEC

#_03F870: LDA.w $080C,X
#_03F873: SBC.w $081A,X
#_03F876: STA.w $080C,X

;===================================================================================================

ROUTINE_03F879:
#_03F879: LDA.w $081C,X
#_03F87C: INC A
#_03F87D: CMP.w #$0018
#_03F880: BCC CODE_03F885

#_03F882: LDA.w #$0000

CODE_03F885:
#_03F885: STA.w $081C,X
#_03F888: LSR A
#_03F889: LSR A
#_03F88A: AND.w #$0006
#_03F88D: TAY

#_03F88E: LDA.w UNREACH_03F897,Y
#_03F891: STA.w $0806,X
#_03F894: JMP CODE_03F78E

UNREACH_03F897:
#_03F897: db $E4,$0C,$E6,$0C,$E8,$0C

;===================================================================================================

ROUTINE_03F89D:
#_03F89D: TYX
#_03F89E: JSR ROUTINE_0386CB

#_03F8A1: LDA.w #$0008
#_03F8A4: STA.w $081A,X
#_03F8A7: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03F8AA:
#_03F8AA: TYX

CODE_03F8AB:
#_03F8AB: LDA.w $080E,X
#_03F8AE: SBC.w $19F0
#_03F8B1: BCS CODE_03F8B7

#_03F8B3: EOR.w #$FFFF
#_03F8B6: INC A

CODE_03F8B7:
#_03F8B7: CMP.w #$0100
#_03F8BA: BCS CODE_03F8D3

#_03F8BC: LDA.w $080C,X
#_03F8BF: SBC.w $19EE

#_03F8C2: LDA.w #$01AA
#_03F8C5: BCC CODE_03F8CA

#_03F8C7: LDA.w #$01AE

CODE_03F8CA:
#_03F8CA: STA.w $0810,X

#_03F8CD: LDA.w #$0010
#_03F8D0: STA.w $081A,X

CODE_03F8D3:
#_03F8D3: STA.b $20

#_03F8D5: LDA.l $7FE81C,X
#_03F8D9: BNE CODE_03F8F3

#_03F8DB: LDA.w $18E4
#_03F8DE: CMP.w #$0004
#_03F8E1: BCC CODE_03F8F3

#_03F8E3: LDA.w $080C,X
#_03F8E6: SBC.w $19EE
#_03F8E9: BCS CODE_03F8F0

#_03F8EB: EOR.w #$FFFF
#_03F8EE: INC A
#_03F8EF: SEC

CODE_03F8F0:
#_03F8F0: JSR ROUTINE_03F8F6

CODE_03F8F3:
#_03F8F3: JMP CODE_03F772

;===================================================================================================

ROUTINE_03F8F6:
#_03F8F6: SBC.b $20
#_03F8F8: BCS CODE_03F8FF

#_03F8FA: EOR.w #$FFFF
#_03F8FD: INC A
#_03F8FE: SEC

CODE_03F8FF:
#_03F8FF: CMP.w #$0100
#_03F902: BCS CODE_03F907

#_03F904: JSR ROUTINE_03F8F6

CODE_03F907:
#_03F907: LDA.w #$0086
#_03F90A: STA.l $7FE81C,X
#_03F90E: JMP ROUTINE_038A2D

;===================================================================================================

ROUTINE_03F911:
#_03F911: TYX
#_03F912: JSR ROUTINE_0386CB

#_03F915: LDA.w #$0008
#_03F918: STA.w $081A,X
#_03F91B: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03F91E:
#_03F91E: TYX

CODE_03F91F:
#_03F91F: LDA.w $080E,X
#_03F922: SBC.w $19F0
#_03F925: BCS CODE_03F92B

#_03F927: EOR.w #$FFFF
#_03F92A: INC A

CODE_03F92B:
#_03F92B: CMP.w #$0100
#_03F92E: BCS CODE_03F947

#_03F930: LDA.w $080C,X
#_03F933: SBC.w $19EE

#_03F936: LDA.w #$01AA
#_03F939: BCC CODE_03F93E

#_03F93B: LDA.w #$01AE

CODE_03F93E:
#_03F93E: STA.w $0810,X

#_03F941: LDA.w #$0010
#_03F944: STA.w $081A,X

CODE_03F947:
#_03F947: STA.b $20

#_03F949: LDA.l $7FE81C,X
#_03F94D: BNE CODE_03F967

#_03F94F: LDA.w $18E4
#_03F952: CMP.w #$0004
#_03F955: BCC CODE_03F967

#_03F957: LDA.w $080C,X
#_03F95A: SBC.w $19EE
#_03F95D: BCS CODE_03F964

#_03F95F: EOR.w #$FFFF
#_03F962: INC A
#_03F963: SEC

CODE_03F964:
#_03F964: JSR ROUTINE_03F8F6

CODE_03F967:
#_03F967: JMP CODE_03F818

;===================================================================================================

ROUTINE_03F96A:
#_03F96A: TYX
#_03F96B: JSR ROUTINE_0386CB

#_03F96E: LDA.w #$0008
#_03F971: STA.w $081A,X
#_03F974: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03F977:
#_03F977: TYX

CODE_03F978:
#_03F978: LDA.w $080C,X
#_03F97B: SBC.w $19EE
#_03F97E: BCS CODE_03F984

#_03F980: EOR.w #$FFFF
#_03F983: INC A

CODE_03F984:
#_03F984: CMP.w #$0080
#_03F987: BCS CODE_03F9A2

#_03F989: LDA.w $080E,X
#_03F98C: SBC.w $19F0

#_03F98F: LDA.w #$01A2
#_03F992: BCC CODE_03F997

#_03F994: LDA.w #$01A6

CODE_03F997:
#_03F997: STA.w $0810,X

#_03F99A: LDA.w #$0010
#_03F99D: STA.w $081A,X
#_03F9A0: BRA CODE_03F9C2

CODE_03F9A2:
#_03F9A2: STA.b $20

#_03F9A4: LDA.l $7FE81C,X
#_03F9A8: BNE CODE_03F9C2

#_03F9AA: LDA.w $18E4
#_03F9AD: CMP.w #$0004
#_03F9B0: BCC CODE_03F9C2

#_03F9B2: LDA.w $080E,X
#_03F9B5: SBC.w $19F0
#_03F9B8: BCS CODE_03F9BF

#_03F9BA: EOR.w #$FFFF
#_03F9BD: INC A
#_03F9BE: SEC

CODE_03F9BF:
#_03F9BF: JSR ROUTINE_03F8F6

CODE_03F9C2:
#_03F9C2: JMP CODE_03F840

;===================================================================================================

ROUTINE_03F9C5:
#_03F9C5: TYX
#_03F9C6: JSR ROUTINE_0386CB

#_03F9C9: LDA.w #$0008
#_03F9CC: STA.w $081A,X
#_03F9CF: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03F9D2:
#_03F9D2: TYX

CODE_03F9D3:
#_03F9D3: LDA.w $080C,X
#_03F9D6: SBC.w $19EE
#_03F9D9: BCS CODE_03F9DF

#_03F9DB: EOR.w #$FFFF
#_03F9DE: INC A

CODE_03F9DF:
#_03F9DF: CMP.w #$0080
#_03F9E2: BCS CODE_03F9FB

#_03F9E4: LDA.w $080E,X
#_03F9E7: SBC.w $19F0

#_03F9EA: LDA.w #$01A2
#_03F9ED: BCC CODE_03F9F2

#_03F9EF: LDA.w #$01A6

CODE_03F9F2:
#_03F9F2: STA.w $0810,X

#_03F9F5: LDA.w #$0010
#_03F9F8: STA.w $081A,X

CODE_03F9FB:
#_03F9FB: STA.b $20

#_03F9FD: LDA.l $7FE81C,X
#_03FA01: BNE CODE_03FA1B

#_03FA03: LDA.w $18E4
#_03FA06: CMP.w #$0004
#_03FA09: BCC CODE_03FA1B

#_03FA0B: LDA.w $080E,X
#_03FA0E: SBC.w $19F0
#_03FA11: BCS CODE_03FA18

#_03FA13: EOR.w #$FFFF
#_03FA16: INC A
#_03FA17: SEC

CODE_03FA18:
#_03FA18: JSR ROUTINE_03F8F6

CODE_03FA1B:
#_03FA1B: JMP CODE_03F86F

;===================================================================================================

ROUTINE_03FA1E:
#_03FA1E: TYX
#_03FA1F: JSR ROUTINE_0386CB

#_03FA22: LDA.w #$0008
#_03FA25: STA.w $081A,X
#_03FA28: STZ.w $0818,X
#_03FA2B: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03FA2E:
#_03FA2E: TYX
#_03FA2F: JSR ROUTINE_03FA52
#_03FA32: ADC.w $080C,X
#_03FA35: STA.w $080C,X

#_03FA38: LDA.w $0818,X
#_03FA3B: SBC.w #$0080
#_03FA3E: AND.w #$01FF
#_03FA41: CMP.w #$0080

#_03FA44: LDA.w #$0006
#_03FA47: BCS CODE_03FA4C

#_03FA49: LDA.w #$0004

CODE_03FA4C:
#_03FA4C: STA.w $081A,X
#_03FA4F: JMP CODE_03F8AB

;===================================================================================================

ROUTINE_03FA52:
#_03FA52: LDA.w #$01C0
#_03FA55: STA.b $20
#_03FA57: CLC

#_03FA58: LDA.w $0818,X
#_03FA5B: ADC.w #$000A
#_03FA5E: STA.w $0818,X
#_03FA61: JSR ROUTINE_03A156

#_03FA64: LDA.b $24
#_03FA66: LSR A
#_03FA67: LSR A
#_03FA68: LSR A
#_03FA69: LSR A
#_03FA6A: ASL.b $24
#_03FA6C: BCC .exit

#_03FA6E: ORA.w #$F000

.exit
#_03FA71: RTS

;===================================================================================================

ROUTINE_03FA72:
#_03FA72: TYX
#_03FA73: JSR ROUTINE_0386CB

#_03FA76: LDA.w #$0008
#_03FA79: STA.w $081A,X
#_03FA7C: STZ.w $0818,X
#_03FA7F: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03FA82:
#_03FA82: TYX
#_03FA83: JSR ROUTINE_03FA52
#_03FA86: ADC.w $080C,X
#_03FA89: STA.w $080C,X

#_03FA8C: LDA.w $0818,X
#_03FA8F: SBC.w #$0080
#_03FA92: AND.w #$01FF
#_03FA95: CMP.w #$0080

#_03FA98: LDA.w #$0006
#_03FA9B: BCS CODE_03FAA0

#_03FA9D: LDA.w #$0004

CODE_03FAA0:
#_03FAA0: STA.w $081A,X
#_03FAA3: JMP CODE_03F91F

;===================================================================================================

ROUTINE_03FAA6:
#_03FAA6: TYX
#_03FAA7: JSR ROUTINE_0386CB

#_03FAAA: LDA.w #$0008
#_03FAAD: STA.w $081A,X
#_03FAB0: STZ.w $0818,X
#_03FAB3: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03FAB6:
#_03FAB6: TYX
#_03FAB7: JSR ROUTINE_03FA52
#_03FABA: ADC.w $080E,X
#_03FABD: STA.w $080E,X

#_03FAC0: LDA.w $0818,X
#_03FAC3: SBC.w #$0080
#_03FAC6: AND.w #$01FF
#_03FAC9: CMP.w #$0080

#_03FACC: LDA.w #$0006
#_03FACF: BCS CODE_03FAD4

#_03FAD1: LDA.w #$0004

CODE_03FAD4:
#_03FAD4: STA.w $081A,X
#_03FAD7: JMP CODE_03F978

;===================================================================================================

ROUTINE_03FADA:
#_03FADA: TYX
#_03FADB: JSR ROUTINE_0386CB

#_03FADE: LDA.w #$0008
#_03FAE1: STA.w $081A,X
#_03FAE4: STZ.w $0818,X
#_03FAE7: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03FAEA:
#_03FAEA: TYX
#_03FAEB: JSR ROUTINE_03FA52
#_03FAEE: ADC.w $080E,X
#_03FAF1: STA.w $080E,X
#_03FAF4: JMP CODE_03F9D3

;===================================================================================================

ROUTINE_03FAF7:
#_03FAF7: JSR ROUTINE_038A25_0020

#_03FAFA: LDY.w $0816,X
#_03FAFD: LDA.w $081E,Y
#_03FB00: DEC A
#_03FB01: STA.w $081E,Y

;===================================================================================================

ROUTINE_03FB04:
#_03FB04: LDY.w $0816,X

#_03FB07: LDA.w $0816,Y
#_03FB0A: DEC A
#_03FB0B: STA.w $0816,Y
#_03FB0E: BNE CODE_03FB1C

#_03FB10: LDA.w $080C,X
#_03FB13: STA.w $080C,Y

#_03FB16: LDA.w $080E,X
#_03FB19: STA.w $080E,Y

CODE_03FB1C:
#_03FB1C: JSR ROUTINE_038C85

#_03FB1F: LDA.w #$0000
#_03FB22: RTS

;===================================================================================================

ROUTINE_03FB23:
#_03FB23: STZ.w $080A,X
#_03FB26: JMP ROUTINE_038098

;===================================================================================================

ROUTINE_03FB29:
#_03FB29: TYX
#_03FB2A: JSR ROUTINE_03FB23

#_03FB2D: LDA.w #$FBEA
#_03FB30: JSR ROUTINE_039074
#_03FB33: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03FB36:
#_03FB36: TYX

#_03FB37: LDA.w $0816,X
#_03FB3A: BNE .exit

#_03FB3C: LDA.w $081E,X
#_03FB3F: BEQ CODE_03FB50

#_03FB41: CLC

#_03FB42: LDA.l $7FE800,X
#_03FB46: ADC.w #$0100
#_03FB49: STA.l $7FE800,X
#_03FB4D: JMP ROUTINE_038C85

CODE_03FB50:
#_03FB50: JSR ROUTINE_038088
#_03FB53: JSR PrepEnemySpawnMyCoordinates
#_03FB56: JMP ROUTINE_038C85

.exit
#_03FB59: RTS

;===================================================================================================

ROUTINE_03FB5A:
#_03FB5A: TYX
#_03FB5B: JSR ROUTINE_03FB23

#_03FB5E: LDA.w #$FC8A
#_03FB61: JMP CODE_03FB87

;===================================================================================================

ROUTINE_03FB64:
#_03FB64: RTS

;===================================================================================================

ROUTINE_03FB65:
#_03FB65: TYX
#_03FB66: JSR ROUTINE_03FB23

#_03FB69: LDA.w #$FC76
#_03FB6C: JMP CODE_03FB87

;===================================================================================================

ROUTINE_03FB6F:
#_03FB6F: RTS

;===================================================================================================

ROUTINE_03FB70:
#_03FB70: TYX
#_03FB71: JSR ROUTINE_03FB23

#_03FB74: LDA.w $0560
#_03FB77: ADC.w #$0800
#_03FB7A: SBC.w $080C,X
#_03FB7D: BCC CODE_03FB84

#_03FB7F: LDA.w #$FBFE
#_03FB82: BRA CODE_03FB87

CODE_03FB84:
#_03FB84: LDA.w #$FC12

CODE_03FB87:
#_03FB87: JSR ROUTINE_039074

#_03FB8A: LDA.w #$01D2
#_03FB8D: STA.w $0810,X
#_03FB90: RTS

;===================================================================================================

ROUTINE_03FB91:
#_03FB91: RTS

;===================================================================================================

ROUTINE_03FB92:
#_03FB92: TYX
#_03FB93: JSR ROUTINE_03FB23

#_03FB96: LDA.w $0562
#_03FB99: ADC.w #$0800
#_03FB9C: SBC.w $080E,X
#_03FB9F: BCC CODE_03FBA7

#_03FBA1: LDA.w #data00FBAE
#_03FBA4: JMP CODE_03FB87

CODE_03FBA7:
#_03FBA7: LDA.w #$FBC2
#_03FBAA: JMP CODE_03FB87

;===================================================================================================

ROUTINE_03FBAD:
#_03FBAD: RTS

;---------------------------------------------------------------------------------------------------

data03FBAE:
#_03FBAE: db $03,$00,$00,$00,$00,$00,$C0,$01
#_03FBB6: db $00,$FE,$00,$00,$C0,$01,$00,$02
#_03FBBE: db $00,$00,$C0,$01,$03,$00,$00,$00
#_03FBC6: db $00,$00,$C4,$01,$00,$FE,$00,$00
#_03FBCE: db $C4,$01,$00,$02,$00,$00,$C4,$01
#_03FBD6: db $03,$00,$00,$00,$00,$00,$C8,$01
#_03FBDE: db $00,$00,$00,$FE,$C8,$01,$00,$00
#_03FBE6: db $00,$02,$C8,$01,$03,$00,$00,$00
#_03FBEE: db $00,$00,$CC,$01,$00,$00,$00,$FE
#_03FBF6: db $CC,$01,$00,$00,$00,$02,$CC,$01
#_03FBFE: db $03,$00,$00,$00,$00,$00,$C8,$01
#_03FC06: db $00,$FE,$00,$00,$C8,$01,$00,$02
#_03FC0E: db $00,$00,$C8,$01,$03,$00,$00,$00
#_03FC16: db $00,$00,$CC,$01,$00,$FE,$00,$00
#_03FC1E: db $CC,$01,$00,$02,$00,$00,$CC,$01
#_03FC26: db $03,$00,$00,$00,$00,$00,$C0,$01
#_03FC2E: db $00,$00,$00,$FE,$C0,$01,$00,$00
#_03FC36: db $00,$02,$C0,$01,$03,$00,$00,$00
#_03FC3E: db $00,$00,$C4,$01,$00,$00,$00,$FE
#_03FC46: db $C4,$01,$00,$00,$00,$02,$C4,$01
#_03FC4E: db $03,$00,$00,$00,$00,$00,$B8,$01
#_03FC56: db $00,$FE,$00,$00,$B8,$01,$00,$02
#_03FC5E: db $00,$00,$B8,$01,$03,$00,$00,$00
#_03FC66: db $00,$00,$BC,$01,$00,$FE,$00,$00
#_03FC6E: db $BC,$01,$00,$02,$00,$00,$BC,$01
#_03FC76: db $03,$00,$00,$00,$00,$00,$B0,$01
#_03FC7E: db $00,$00,$00,$FE,$B0,$01,$00,$00
#_03FC86: db $00,$02,$B0,$01,$03,$00,$00,$00
#_03FC8E: db $00,$00,$B4,$01,$00,$00,$00,$FE
#_03FC96: db $B4,$01,$00,$00,$00,$02,$B4,$01

;===================================================================================================

ROUTINE_03FC9E:
#_03FC9E: LDA.w #data03FCA4
#_03FCA1: JMP CODE_03FCC1

#data03FCA4:
#_03FCA4: db $03,$00,$00,$00,$00,$00,$86,$01
#_03FCAC: db $00,$01,$00,$FE,$00,$00,$86,$01
#_03FCB4: db $80,$01,$00,$02,$00,$00,$86,$01
#_03FCBC: db $80,$00

;===================================================================================================

ROUTINE_03FCBE:
#_03FCBE: LDA.w #data03FCD0

CODE_03FCC1:
#_03FCC1: TYX
#_03FCC2: PHA
#_03FCC3: STZ.w $080A,X
#_03FCC6: JSR ROUTINE_038098
#_03FCC9: PLA
#_03FCCA: JSR ROUTINE_0390D7
#_03FCCD: JMP AdvanceAIModeUp

#data03FCD0:
#_03FCD0: db $03,$00,$00,$00,$00,$00,$F0,$01
#_03FCD8: db $00,$02,$00,$00,$00,$FE,$F0,$01
#_03FCE0: db $80,$02,$00,$00,$00,$02,$F0,$01
#_03FCE8: db $80,$01

;===================================================================================================

ROUTINE_03FCEA:
#_03FCEA: LDA.w #data00FD14
#_03FCED: JMP CODE_03FCC1

;===================================================================================================

ROUTINE_03FCF0:
#_03FCF0: TYX

#_03FCF1: LDA.w $0816,X
#_03FCF4: BNE .exit

#_03FCF6: LDA.w $081E,X
#_03FCF9: BEQ CODE_03FD0A

#_03FCFB: CLC

#_03FCFC: LDA.l $7FE800,X
#_03FD00: ADC.w #$0100
#_03FD03: STA.l $7FE800,X
#_03FD07: JMP ROUTINE_038C85

CODE_03FD0A:
#_03FD0A: JSR ROUTINE_038088
#_03FD0D: JSR PrepEnemySpawnMyCoordinates
#_03FD10: JMP ROUTINE_038C85

.exit
#_03FD13: RTS

;---------------------------------------------------------------------------------------------------

data03FD14:
#_03FD14: db $03,$00,$00,$00,$00,$00,$F2,$01
#_03FD1C: db $00,$00,$00,$00,$00,$FE,$F2,$01
#_03FD24: db $80,$03,$00,$00,$00,$02,$F2,$01
#_03FD2C: db $80,$00

;===================================================================================================

ROUTINE_03FD2E:
#_03FD2E: TYX

#_03FD2F: LDA.w #$0200
#_03FD32: JSR ROUTINE_03FD3E
#_03FD35: RTS

;===================================================================================================

ROUTINE_03FD36:
#_03FD36: TYX

#_03FD37: LDA.w #$0000
#_03FD3A: JSR ROUTINE_03FD3E
#_03FD3D: RTS

;===================================================================================================

ROUTINE_03FD3E:
#_03FD3E: PHA
#_03FD3F: JSR ROUTINE_03F159
#_03FD42: JSR ROUTINE_03F082
#_03FD45: PLA
#_03FD46: JSR ROUTINE_03F065
#_03FD49: JSR ROUTINE_038098

#_03FD4C: LDA.w #$0188
#_03FD4F: STA.w $0810,X
#_03FD52: RTS

;===================================================================================================

ROUTINE_03FD53:
#_03FD53: TYX
#_03FD54: STZ.w $080A,X
#_03FD57: JSR ROUTINE_038098

#_03FD5A: LDA.w #data00FD67
#_03FD5D: JSR ROUTINE_0390D7

#_03FD60: LDA.w #$01EA
#_03FD63: STA.w $0810,X
#_03FD66: RTS

;---------------------------------------------------------------------------------------------------

data03FD67:
#_03FD67: db $01,$00,$00,$00,$00,$00,$90,$01
#_03FD6F: db $00,$00

;===================================================================================================

ROUTINE_03FD71:
#_03FD71: TYX
#_03FD72: STZ.w $080A,X
#_03FD75: JSR Set_0814_to_FFFF
#_03FD78: STZ.w $0816,X
#_03FD7B: JSR AdvanceAIModeUp
#_03FD7E: JSR ROUTINE_03A295

#_03FD81: LDA.w #$0021
#_03FD84: JSL ROUTINE_02FE0D
#_03FD88: ASL A
#_03FD89: ASL A
#_03FD8A: ASL A
#_03FD8B: ASL A
#_03FD8C: STA.b $20
#_03FD8E: CLC

#_03FD8F: LDA.b $2C
#_03FD91: ADC.w $081C,X
#_03FD94: JSR ROUTINE_03A04D

#_03FD97: LDA.w #$0CEE
#_03FD9A: STA.w $0806,X
#_03FD9D: JMP ROUTINE_038173

;===================================================================================================

ROUTINE_03FDA0:
#_03FDA0: JMP ROUTINE_03BD6B

;===================================================================================================

ROUTINE_03FDA3:
#_03FDA3: JMP ROUTINE_03FE6A

;===================================================================================================

ROUTINE_03FDA6:
#_03FDA6: LDA.w $05A0
#_03FDA9: AND.w #$0007
#_03FDAC: BNE .exit

#_03FDAE: LDY.w $081A,X
#_03FDB1: LDA.w UNREACH_03FDC6,Y
#_03FDB4: STA.w $0806,X
#_03FDB7: INY
#_03FDB8: INY
#_03FDB9: CPY.w #$0008
#_03FDBC: BCC CODE_03FDC1

#_03FDBE: LDY.w #$0000

CODE_03FDC1:
#_03FDC1: TYA
#_03FDC2: STA.w $081A,X

.exit
#_03FDC5: RTS

UNREACH_03FDC6:
#_03FDC6: db $E2,$0F,$E4,$0F,$E2,$0F,$E6,$0F

;===================================================================================================

ROUTINE_03FDCE:
#_03FDCE: TYX
#_03FDCF: JSR ROUTINE_03FDA6

#_03FDD2: LDA.w $0812,X
#_03FDD5: CMP.w #$7FF0
#_03FDD8: BCS CODE_03FDF7

#_03FDDA: LDA.w #$8032
#_03FDDD: STA.b $26

#_03FDDF: LDA.w $080C,X
#_03FDE2: STA.b $20

#_03FDE4: LDA.w $080E,X
#_03FDE7: STA.b $22
#_03FDE9: STZ.b $30

#_03FDEB: LDA.w #$000C
#_03FDEE: STA.b $24
#_03FDF0: JSL PrepEnemySpawn_long
#_03FDF4: JMP Reset_0816_AndAdvanceAI_bank

CODE_03FDF7:
#_03FDF7: PHX
#_03FDF8: JSR ROUTINE_03FE83
#_03FDFB: PLX
#_03FDFC: JMP CODE_03FE3D

;===================================================================================================

ROUTINE_03FDFF:
#_03FDFF: TYX

#_03FE00: LDA.w #$003C
#_03FE03: JSR Increment_0816_AndCompareTo
#_03FE06: BCC CODE_03FE17

#_03FE08: LDA.w #$004E
#_03FE0B: STA.w $04AA

#_03FE0E: LDA.w #data03FE23
#_03FE11: JSR ROUTINE_0390FC
#_03FE14: JMP ROUTINE_038C85

CODE_03FE17:
#_03FE17: ROR A
#_03FE18: BCC CODE_03FE20

#_03FE1A: JSR ROUTINE_03FDA6
#_03FE1D: JMP CODE_03FEB6

CODE_03FE20:
#_03FE20: JMP CODE_03FE3D

#data03FE23:
#_03FE23: db $03,$00,$00,$00,$00,$00,$7C,$01
#_03FE2B: db $C0,$FF,$00,$00,$00,$00,$7C,$01
#_03FE33: db $00,$00,$00,$00,$00,$00,$7C,$01
#_03FE3B: db $40,$00

CODE_03FE3D:
#_03FE3D: LDA.w $0808,X
#_03FE40: AND.w #$FE00
#_03FE43: STA.b $24
#_03FE45: CLC

#_03FE46: LDA.w $0804,X
#_03FE49: ADC.w $080A,X
#_03FE4C: STA.b $22

#_03FE4E: LDA.w $0802,X
#_03FE51: STA.b $20

#_03FE53: LDA.w $05A0
#_03FE56: AND.w #$0010
#_03FE59: BNE CODE_03FE60

#_03FE5B: LDA.w #$0FF0
#_03FE5E: BRA CODE_03FE63

CODE_03FE60:
#_03FE60: LDA.w #$0FF2

CODE_03FE63:
#_03FE63: PHX
#_03FE64: JSL ROUTINE_028220
#_03FE68: PLX
#_03FE69: RTS

;===================================================================================================

ROUTINE_03FE6A:
#_03FE6A: TYX

#_03FE6B: LDA.w #$8000
#_03FE6E: STA.w $0812,X
#_03FE71: STA.w $081E,X
#_03FE74: STA.w $081C,X
#_03FE77: STZ.w $081A,X
#_03FE7A: STZ.w $0816,X
#_03FE7D: STZ.w $080A,X
#_03FE80: JMP AdvanceAIModeUp

;===================================================================================================

ROUTINE_03FE83:
#_03FE83: LDY.w #$0050
#_03FE86: JSR ROUTINE_0392EE
#_03FE89: BEQ CODE_03FE90

#_03FE8B: JSR ROUTINE_039385
#_03FE8E: BNE CODE_03FE90

CODE_03FE90:
#_03FE90: SEC

#_03FE91: LDA.w $081E,X
#_03FE94: SBC.w $0812,X
#_03FE97: CMP.w #$0008
#_03FE9A: BCC CODE_03FEB6

#_03FE9C: LDA.w $0812,X
#_03FE9F: STA.w $081E,X
#_03FEA2: STZ.b $20

#_03FEA4: LDA.w #$0100
#_03FEA7: JSR AddToScore_x10

#_03FEAA: LDA.w #$0000
#_03FEAD: JSR ROUTINE_0396C2

#_03FEB0: LDA.w #$000C
#_03FEB3: STA.w $04A8

CODE_03FEB6:
#_03FEB6: LDA.w #$2000
#_03FEB9: STA.w $0808,X
#_03FEBC: INC.w $0814,X
#_03FEBF: BNE CODE_03FEC4

#_03FEC1: DEC.w $0814,X

CODE_03FEC4:
#_03FEC4: LDA.w $0814,X
#_03FEC7: CMP.w #$0008
#_03FECA: BCS CODE_03FED5

#_03FECC: LDA.w $0808,X
#_03FECF: ORA.w #$0600
#_03FED2: STA.w $0808,X

CODE_03FED5:
#_03FED5: JMP ROUTINE_038860

;===================================================================================================

ROUTINE_03FED8:
#_03FED8: TYX

#_03FED9: LDY.w $0816,X
#_03FEDC: LDA.w UNREACH_03FF44,Y
#_03FEDF: CMP.w #$FFFF
#_03FEE2: BNE CODE_03FEE7

#_03FEE4: JMP ROUTINE_038C85

CODE_03FEE7:
#_03FEE7: CLC
#_03FEE8: ADC.w $080C,X
#_03FEEB: STA.w $080C,X
#_03FEEE: CLC

#_03FEEF: LDA.w UNREACH_03FF46,Y
#_03FEF2: ADC.w $080E,X
#_03FEF5: STA.w $080E,X
#_03FEF8: PHX
#_03FEF9: JSR ROUTINE_03FF32
#_03FEFC: PLX
#_03FEFD: TAY
#_03FEFE: BEQ CODE_03FF0A

#_03FF00: CLC

#_03FF01: LDA.w $0816,X
#_03FF04: ADC.w #$0006
#_03FF07: STA.w $0816,X

CODE_03FF0A:
#_03FF0A: INC.w $081C,X

#_03FF0D: LDA.w $081C,X
#_03FF10: CMP.w #$000B
#_03FF13: BCC CODE_03FF2F

#_03FF15: STZ.w $081C,X

#_03FF18: LDY.w $081A,X
#_03FF1B: LDA.w UNREACH_03FF85,Y
#_03FF1E: STA.w $0806,X
#_03FF21: INY
#_03FF22: INY
#_03FF23: CPY.w #$0008
#_03FF26: BCC CODE_03FF2B

#_03FF28: LDY.w #$0000

CODE_03FF2B:
#_03FF2B: TYA
#_03FF2C: STA.w $081A,X

CODE_03FF2F:
#_03FF2F: JMP ROUTINE_03FE83

;===================================================================================================

ROUTINE_03FF32:
#_03FF32: LDA.w UNREACH_03FF48,Y
#_03FF35: TAY

#_03FF36: LDA.w .vectors,Y
#_03FF39: STA.b $20

#_03FF3B: JMP ($0020)

.vectors
#_03FF3E: dw ROUTINE_03FF58
#_03FF40: dw ROUTINE_03FF67
#_03FF42: dw ROUTINE_03FF76

UNREACH_03FF44:
#_03FF44: db $FC,$FF

UNREACH_03FF46:
#_03FF46: db $04,$00

UNREACH_03FF48:
#_03FF48: db $00,$00,$00,$00,$04,$00,$02,$00
#_03FF50: db $02,$00,$02,$00,$04,$00,$FF,$FF

;===================================================================================================

ROUTINE_03FF58:
#_03FF58: LDA.w $080C,X
#_03FF5B: CMP.w #$3380

#_03FF5E: LDA.w #$0000
#_03FF61: BCS .exit

#_03FF63: LDA.w #$FFFF

.exit
#_03FF66: RTS

;===================================================================================================

ROUTINE_03FF67:
#_03FF67: LDA.w $080E,X
#_03FF6A: CMP.w #$7400

#_03FF6D: LDA.w #$0000
#_03FF70: BCC .exit

#_03FF72: LDA.w #$FFFF

.exit
#_03FF75: RTS

;===================================================================================================

ROUTINE_03FF76:
#_03FF76: LDA.w $080C,X
#_03FF79: CMP.w #$3880

#_03FF7C: LDA.w #$0000
#_03FF7F: BCC .exit

#_03FF81: LDA.w #$FFFF

.exit
#_03FF84: RTS

UNREACH_03FF85:
#_03FF85: db $DC,$0F,$DE,$0F,$E0,$0F,$DE,$0F
#_03FF8D: db $BC,$1A,$08,$F0,$08,$98,$3A,$3A
#_03FF95: db $3A,$3A,$9D,$1A,$08,$B9,$A7,$FF
#_03FF9D: db $9D,$16,$08,$B9,$A9,$FF,$9D,$18
#_03FFA5: db $08,$60,$E0,$FF,$03,$00,$C0,$FF
#_03FFAD: db $03,$00

;===================================================================================================

ROUTINE_03FFB7_long:
#_03FFAF: PHB
#_03FFB0: PHK
#_03FFB1: PLB
#_03FFB2: JSR ROUTINE_03FFB7
#_03FFB5: PLB
#_03FFB6: RTL

;===================================================================================================

ROUTINE_03FFB7:
#_03FFB7: LDA.w $081A,X
#_03FFBA: BEQ CODE_03FFC0

#_03FFBC: DEC A
#_03FFBD: STA.w $081A,X

CODE_03FFC0:
#_03FFC0: AND.w #$FFFC
#_03FFC3: TAY
#_03FFC4: BRA CODE_03FFD3

;===================================================================================================

ROUTINE_03FFC6:
#_03FFC6: LDY.w $081A,X
#_03FFC9: BEQ CODE_03FFD3

#_03FFCB: TYA
#_03FFCC: DEC A
#_03FFCD: DEC A
#_03FFCE: DEC A
#_03FFCF: DEC A
#_03FFD0: STA.w $081A,X

CODE_03FFD3:
#_03FFD3: PHX
#_03FFD4: TYX

#_03FFD5: LDA.l UNREACH_04FDFD,X
#_03FFD9: PLX
#_03FFDA: STA.w $0816,X
#_03FFDD: PHX
#_03FFDE: TYX

#_03FFDF: LDA.l UNREACH_04FDFF,X
#_03FFE3: PLX
#_03FFE4: STA.w $0818,X
#_03FFE7: RTS

;===================================================================================================

#_03FFE8: db $00, $00, $00, $00, $00, $00, $00, $00
#_03FFF0: db $00, $00, $00, $00, $00, $00, $00, $00
#_03FFF8: db $00, $00, $00, $00, $00, $00, $00, $00

;===================================================================================================
